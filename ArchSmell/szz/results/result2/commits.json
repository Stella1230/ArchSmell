{"d52060e0011724596befcc18b3b582f3e47c7daa":{"changes":{"src\/changes\/changes.xml":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/FailoverAppenderTest.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/FailoverAppender.java":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["24","      <action issue=\"LOG4J2-469\" dev=\"rgoers\" type=\"fix\">","25","        FailoverAppender was not resetting its status after the primary appender recovered.","26","      <\/action>"],"delete":[]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/FailoverAppenderTest.java":[{"add":["78","        onceLogger.error(\"Second log message\");","82","        assertEquals(\"Incorrect number of events in primary appender\", events.size(), 2);"],"delete":["81","        assertEquals(\"No events in primary appender\", events.size(), 1);"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/FailoverAppender.java":[{"add":["21","import java.util.concurrent.atomic.AtomicBoolean;","59","    private volatile long nextCheckMillis = 0;","107","        long localCheckMillis = nextCheckMillis;","108","        if (localCheckMillis == 0 || System.currentTimeMillis() > localCheckMillis) {","111","            failover(event, null);","118","            nextCheckMillis = 0;"],"delete":["58","    private long nextCheckMillis = 0;","59","","60","    private volatile boolean failure = false;","108","        if (!failure) {","111","            final long currentMillis = System.currentTimeMillis();","112","            if (currentMillis >= nextCheckMillis) {","113","                callAppender(event);","114","            } else {","115","                failover(event, null);","116","            }","125","            failure = true;"]}]}},"d38b85984248bd267fbdd6ece72a0e4941de5773":{"changes":{"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/net\/JndiManagerTest.java":"ADD"},"diff":{"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/net\/JndiManagerTest.java":[{"add":[],"delete":[]}]}},"8e89ecd4a94e2f600423564c8381f8a0f9b12fe6":{"changes":{"log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/LogManager.java":"MODIFY"},"diff":{"log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/LogManager.java":[{"add":["125","        LogManagerStatus.setInitialized(true);"],"delete":["124","            LogManagerStatus.setInitialized(true);"]}]}},"5ee43e8d754919ad84b47c2b96aaa783ab90c268":{"changes":{"src\/changes\/changes.xml":"MODIFY","flume-ng\/src\/main\/java\/org\/apache\/logging\/log4j\/flume\/appender\/FlumeAvroManager.java":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["25","      <action issue=\"LOG4J2-224\" dev=\"rgoers\" type=\"fix\">","26","        The FlumeAppender failed to start if the Flume RPCClient could not connect to any Flume agents.","27","      <\/action>"],"delete":[]}],"flume-ng\/src\/main\/java\/org\/apache\/logging\/log4j\/flume\/appender\/FlumeAvroManager.java":[{"add":["175","        try {","176","            Properties props = new Properties();","178","            props.put(\"client.type\", agents.length > 1 ? \"default_failover\" : \"default\");","180","            int count = 1;","181","            StringBuilder sb = new StringBuilder();","182","            for (Agent agent : agents) {","183","                if (sb.length() > 0) {","184","                    sb.append(\" \");","185","                }","186","                String hostName = \"host\" + count++;","187","                props.put(\"hosts.\" + hostName, agent.getHost() + \":\" + agent.getPort());","188","                sb.append(hostName);","190","            props.put(\"hosts\", sb.toString());","191","            if (batchSize > 0) {","192","                props.put(\"batch-size\", Integer.toString(batchSize));","194","            if (retries > 1) {","195","                if (retries > MAX_RECONNECTS) {","196","                    retries = MAX_RECONNECTS;","197","                }","198","                props.put(\"max-attempts\", Integer.toString(retries * agents.length));","199","            }","200","            if (requestTimeout >= 1000) {","201","                props.put(\"request-timeout\", Integer.toString(requestTimeout));","202","            }","203","            if (connectTimeout >= 1000) {","204","                props.put(\"connect-timeout\", Integer.toString(connectTimeout));","205","            }","206","            return RpcClientFactory.getInstance(props);","207","        } catch (Exception ex) {","208","            LOGGER.error(\"Unable to create Flume RPCClient: {}\", ex.getMessage());","209","            return null;"],"delete":["175","        Properties props = new Properties();","177","        props.put(\"client.type\", agents.length > 1 ? \"default_failover\" : \"default\");","179","        int count = 1;","180","        StringBuilder sb = new StringBuilder();","181","        for (Agent agent : agents) {","182","            if (sb.length() > 0) {","183","                sb.append(\" \");","185","            String hostName = \"host\" + count++;","186","            props.put(\"hosts.\" + hostName, agent.getHost() + \":\" + agent.getPort());","187","            sb.append(hostName);","188","        }","189","        props.put(\"hosts\", sb.toString());","190","        if (batchSize > 0) {","191","            props.put(\"batch-size\", Integer.toString(batchSize));","192","        }","193","        if (retries > 1) {","194","            if (retries > MAX_RECONNECTS) {","195","                retries = MAX_RECONNECTS;","197","            props.put(\"max-attempts\", Integer.toString(retries * agents.length));","199","        if (requestTimeout >= 1000) {","200","            props.put(\"request-timeout\", Integer.toString(requestTimeout));","201","        }","202","        if (connectTimeout >= 1000) {","203","            props.put(\"connect-timeout\", Integer.toString(connectTimeout));","204","        }","205","        return RpcClientFactory.getInstance(props);"]}]}},"f7311b4090b1ad130d0ccb48f5e5fd099f2a90e1":{"changes":{"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/pattern\/NameAbbreviatorTest.java":"MODIFY","src\/changes\/changes.xml":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/pattern\/NameAbbreviator.java":"MODIFY"},"diff":{"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/pattern\/NameAbbreviatorTest.java":[{"add":["67","    public void testAbbreviatorPatternsAppendLongPrefix() throws Exception {","76","    @Test","77","    public void testAbbreviatorPatternsAppend() throws Exception {","78","        final NameAbbreviator abbreviator = NameAbbreviator.getAbbreviator(this.pattern);","79","        final String PREFIX = \"some random text\";","80","        final StringBuilder destination = new StringBuilder(PREFIX);","81","        abbreviator.abbreviate(this.getClass().getName(), destination);","82","        final String actual = destination.toString();","83","        assertEquals(PREFIX + expected, actual);","84","    }"],"delete":["67","    public void testAbbreviatorPatternsAppend() throws Exception {"]}],"src\/changes\/changes.xml":[{"add":["42","      <action issue=\"LOG4J2-2365\" dev=\"ckozak\" type=\"fix\" due-to=\"Eugene Zimichev\">","43","        NameAbbreviator correctly abbreviates first fragments (#188).","44","      <\/action>"],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/pattern\/NameAbbreviator.java":[{"add":["357","            destination.append(original);","359","            int fragmentIndex = 0;","361","                pos = fragments[fragmentIndex].abbreviate(destination, pos);","362","                \/\/ last pattern in executed repeatedly","363","                if (fragmentIndex < fragments.length - 1) {","364","                    fragmentIndex++;","365","                }"],"delete":["356","            final StringBuilder sb = destination.append(original);\/\/new StringBuilder(original);","358","            for (int i = 0; i < fragments.length - 1 && pos < max; i++) {","359","                pos = fragments[i].abbreviate(sb, pos);","360","            }","362","            \/\/","363","            \/\/   last pattern in executed repeatedly","364","            \/\/","365","            final PatternAbbreviatorFragment terminalFragment = fragments[fragments.length - 1];","366","","368","                pos = terminalFragment.abbreviate(sb, pos);"]}]}},"c21ffb4d0aec37d0efccd9f87482f7561ad21ce1":{"changes":{"src\/changes\/changes.xml":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["75","      <action issue=\"LOG4J2-3447\" dev=\"pkarwasz\" type=\"fix\" due-to=\"Pooja Pandey\">","76","        Fixes appender concurrency problems in Log4j 1.x bridge.","77","      <\/action>"],"delete":[]}]}},"aa0d2abaf66e107f66ea3ebbe410ddd440212a6b":{"changes":{"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/layout\/LogEventFixtures.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/async\/RingBufferLogEventTest.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/impl\/ThrowableProxyTest.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/RingBufferLogEvent.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/impl\/ThrowableProxy.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/impl\/Log4jLogEvent.java":"MODIFY"},"diff":{"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/layout\/LogEventFixtures.java":[{"add":["58","        final ThrowableProxy throwableProxy = new ThrowableProxy(ioException);"],"delete":["58","        final ThrowableProxy throwableProxy = new ThrowableProxy(ioException, null);"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/async\/RingBufferLogEventTest.java":[{"add":["132","        assertEquals(new ThrowableProxy(t), other.getThrownProxy());"],"delete":["132","        assertEquals(new ThrowableProxy(t, null), other.getThrownProxy());"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/impl\/ThrowableProxyTest.java":[{"add":["58","        ThrowableProxy proxy = new ThrowableProxy(new IOException(\"test\"));","129","        final ThrowableProxy proxy = new ThrowableProxy(throwable);","142","        final ThrowableProxy proxy = new ThrowableProxy(throwable);","176","        final ThrowableProxy proxy = new ThrowableProxy(throwable);","198","        final ThrowableProxy subject = new ThrowableProxy(throwable);"],"delete":["58","        ThrowableProxy proxy = new ThrowableProxy(new IOException(\"test\"), null);","129","        final ThrowableProxy proxy = new ThrowableProxy(throwable, null);","142","        final ThrowableProxy proxy = new ThrowableProxy(throwable, null);","176","        final ThrowableProxy proxy = new ThrowableProxy(throwable, null);","198","        final ThrowableProxy subject = new ThrowableProxy(throwable, null);"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/RingBufferLogEvent.java":[{"add":["174","                thrownProxy = new ThrowableProxy(thrown);"],"delete":["174","                thrownProxy = new ThrowableProxy(thrown, null);"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/impl\/ThrowableProxy.java":[{"add":["112","    public ThrowableProxy(final Throwable throwable) {","113","        this(throwable, null);","114","    }","115","","116","    \/**","117","     * Constructs the wrapper for the Throwable that includes packaging data.","118","     * ","119","     * @param throwable","120","     *        The Throwable to wrap, must not be null.","121","     * @param visited","122","     *        The set of visited suppressed exceptions.","123","     *\/","124","    private ThrowableProxy(final Throwable throwable, Set<Throwable> visited) {"],"delete":["111","     * @param visited","112","     *        TODO","114","    public ThrowableProxy(final Throwable throwable, Set<Throwable> visited) {"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/impl\/Log4jLogEvent.java":[{"add":["322","            thrownProxy = new ThrowableProxy(thrown);"],"delete":["322","            thrownProxy = new ThrowableProxy(thrown, null);"]}]}},"d5d2c47cb2f024c158e256b77dc39380f35e744a":{"changes":{"src\/changes\/changes.xml":"MODIFY","pom.xml":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["157","      <action issue=\"LOG4J2-2117\" dev=\"ggregory\" type=\"update\">","158","        Jackson dependencies for 2.9.2 incorrectly bring in jackson-annotations 2.9.0 instead of 2.9.2.","159","      <\/action>"],"delete":[]}],"pom.xml":[{"add":["551","        <groupId>com.fasterxml.jackson.core<\/groupId>","552","        <artifactId>jackson-annotations<\/artifactId>","553","        <version>${jackson2Version}<\/version>","554","        <optional>true<\/optional>","555","      <\/dependency>","556","      <dependency>"],"delete":[]}]}},"fa938025e24ef68f5bc5f12082073ea707d9f985":{"changes":{"\/dev\/null":"DELETE","log4j-core\/src\/test\/resources\/log4j-routing2.json":"MODIFY","src\/changes\/changes.xml":"MODIFY","log4j-flume-ng\/pom.xml":"MODIFY","log4j-flume-ng\/src\/test\/java\/org\/apache\/logging\/log4j\/flume\/appender\/FlumeEmbeddedAppenderTest.java":"MODIFY","log4j-flume-ng\/src\/main\/java\/org\/apache\/logging\/log4j\/flume\/appender\/FlumeEmbeddedManager.java":"MODIFY","log4j-flume-ng\/src\/test\/resources\/embedded.xml":"MODIFY","pom.xml":"MODIFY","log4j-flume-ng\/src\/test\/resources\/default_embedded.xml":"MODIFY"},"diff":{"\/dev\/null":[{"add":[],"delete":[]}],"log4j-core\/src\/test\/resources\/log4j-routing2.json":[{"add":["16","{ \"configuration\": { \"status\": \"debug\", \"name\": \"RoutingTest\", \"packages\": \"org.apache.logging.log4j.test\",","46","        { \"name\": \"com.foo.bar\", \"level\": \"error\", \"additivity\": \"false\", \"AppenderRef\": { \"ref\": \"STDOUT\" }},","47","        { \"name\": \"org.apache.logging\", \"level\": \"error\", \"additivity\": \"false\", \"AppenderRef\": [{\"ref\": \"List\"}, {\"ref\": \"STDOUT\"}]}"],"delete":["16","{ \"configuration\": { \"status\": \"error\", \"name\": \"RoutingTest\", \"packages\": \"org.apache.logging.log4j.test\",","46","        { \"name\": \"com.foo.bar\", \"level\": \"error\", \"additivity\": \"false\", \"AppenderRef\": { \"ref\": \"STDOUT\" }}"]}],"src\/changes\/changes.xml":[{"add":["23","      <action issue=\"LOG4J2-453\" dev=\"rgoers\" type=\"update\">","24","        Update Flume Appender to use Flume 1.4.0.","25","      <\/action>","31","        Resolved memory leak by releasing reference to ThreadLocal when","35","        Resolved memory leak by populating AsyncLoggerConfigHelper ring buffer"],"delete":["28","        Resolved memory leak by releasing reference to ThreadLocal when ","32","        Resolved memory leak by populating AsyncLoggerConfigHelper ring buffer "]}],"log4j-flume-ng\/pom.xml":[{"add":["58","      <groupId>org.apache.logging.log4j<\/groupId>","59","      <artifactId>log4j-jcl<\/artifactId>","60","      <scope>test<\/scope>","61","    <\/dependency>","62","    <dependency>","86","      <artifactId>flume-ng-embedded-agent<\/artifactId>"],"delete":["81","      <artifactId>flume-ng-node<\/artifactId>"]}],"log4j-flume-ng\/src\/test\/java\/org\/apache\/logging\/log4j\/flume\/appender\/FlumeEmbeddedAppenderTest.java":[{"add":["195","    \/* Flume 1.4.0 does not support interceptors on the embedded agent","196","    @Test      *\/","208","    \/* @Test *\/","257","            System.out.println(\"Collector listening on port \" + port);"],"delete":["195","","196","    @Test","208","    @Test"]}],"log4j-flume-ng\/src\/main\/java\/org\/apache\/logging\/log4j\/flume\/appender\/FlumeEmbeddedManager.java":[{"add":["18","import java.util.HashMap;","20","import java.util.Map;","23","import org.apache.flume.EventDeliveryException;","24","import org.apache.flume.agent.embedded.EmbeddedAgent;","25","import org.apache.logging.log4j.LoggingException;","44","    private EmbeddedAgent agent;","52","     * @param shortName The short version of the agent name.","53","     * @param agent The embedded agent.","55","    protected FlumeEmbeddedManager(final String name, final String shortName, final EmbeddedAgent agent) {","57","        this.agent = agent;","87","            sb.append(name).append(\"[\");","90","                    sb.append(\"_\");","92","                sb.append(agent.getHost()).append(\"-\").append(agent.getPort());","98","            sb.append(name).append(\"-\");","103","                sep = \"_\";","113","        try {","114","            agent.put(event);","115","        } catch (EventDeliveryException ex) {","116","            throw new LoggingException(\"Unable to deliver event to Flume Appender \" + shortName, ex);","117","        }","122","        agent.stop();","167","                final Map<String, String> props = createProperties(data.name, data.agents, data.properties,","168","                    data.batchSize, data.dataDir);","169","                EmbeddedAgent agent = new EmbeddedAgent(name);","170","                agent.configure(props);","171","                agent.start();","172","                LOGGER.debug(\"Created Agent \" + name);","173","                return new FlumeEmbeddedManager(name, data.name, agent);","180","        private Map<String, String> createProperties(final String name, final Agent[] agents,","181","                                                     final Property[] properties, final int batchSize, String dataDir) {","182","            final Map<String, String> props = new HashMap<String, String>();","198","                        props.put(\"channel.type\", \"memory\");","200","                        props.put(\"channel.type\", \"file\");","206","                        props.put(\"channel.checkpointDir\", dataDir + \"checkpoint\");","207","                        props.put(\"channel.dataDirs\", dataDir + \"data\");","211","                    props.put(\"channel.type\", \"file\");","220","                    final String prefix = \"agent\" + i;","225","                    props.put(\"processor.priority.\" + prefix, Integer.toString(agents.length - i));","227","                props.put(\"sinks\", sb.toString());","228","                props.put(\"processor.type\", \"failover\");","257","                    if (upperKey.equals(\"SINKS\")) {","261","                    props.put(key, value);"],"delete":["19","import java.util.Properties;","22","import org.apache.flume.SourceRunner;","23","import org.apache.flume.node.NodeConfiguration;","24","import org.apache.flume.node.nodemanager.DefaultLogicalNodeManager;","37","    \/** Name for the Flume source *\/","38","    protected static final String SOURCE_NAME = \"log4j-source\";","39","","46","    private final FlumeNode node;","47","","48","    private NodeConfiguration conf;","49","","50","    private final Log4jEventSource source;","58","     * @param node The Flume Node.","60","    protected FlumeEmbeddedManager(final String name, final String shortName, final FlumeNode node) {","62","        this.node = node;","64","        final SourceRunner runner = node.getConfiguration().getSourceRunners().get(SOURCE_NAME);","65","        if (runner == null || runner.getSource() == null) {","66","            throw new IllegalStateException(\"No Source has been created for Appender \" + shortName);","67","        }","68","        source  = (Log4jEventSource) runner.getSource();","97","            sb.append(\"FlumeEmbedded[\");","100","                    sb.append(\",\");","102","                sb.append(agent.getHost()).append(\":\").append(agent.getPort());","108","            sb.append(name).append(\":\");","113","                sep = \",\";","123","        source.send(event);","128","        node.stop();","163","        private static final String SOURCE_TYPE = Log4jEventSource.class.getName();","174","                final DefaultLogicalNodeManager nodeManager = new DefaultLogicalNodeManager();","175","                final Properties props = createProperties(data.name, data.agents, data.properties, data.batchSize,","176","                    data.dataDir);","177","                final FlumeConfigurationBuilder builder = new FlumeConfigurationBuilder();","178","                final NodeConfiguration conf = builder.load(data.name, props, nodeManager);","179","","180","                final FlumeNode node = new FlumeNode(nodeManager, nodeManager, conf);","181","","182","                node.start();","183","","184","                return new FlumeEmbeddedManager(name, data.name, node);","191","        private Properties createProperties(final String name, final Agent[] agents, final Property[] properties,","192","                                            final int batchSize, String dataDir) {","193","            final Properties props = new Properties();","206","                props.put(name + \".sources\", FlumeEmbeddedManager.SOURCE_NAME);","207","                props.put(name + \".sources.\" + FlumeEmbeddedManager.SOURCE_NAME + \".type\", SOURCE_TYPE);","211","                        props.put(name + \".channels\", \"primary\");","212","                        props.put(name + \".channels.primary.type\", \"memory\");","214","                        props.put(name + \".channels\", \"primary\");","215","                        props.put(name + \".channels.primary.type\", \"file\");","221","                        props.put(name + \".channels.primary.checkpointDir\", dataDir + \"checkpoint\");","222","                        props.put(name + \".channels.primary.dataDirs\", dataDir + \"data\");","226","                    props.put(name + \".channels\", \"primary\");","227","                    props.put(name + \".channels.primary.type\", \"file\");","236","                    final String prefix = name + \".sinks.agent\" + i;","237","                    props.put(prefix + \".channel\", \"primary\");","242","                    props.put(name + \".sinkgroups.group1.processor.priority.agent\" + i, Integer.toString(priority));","243","                    --priority;","245","                props.put(name + \".sinks\", sb.toString());","246","                props.put(name + \".sinkgroups\", \"group1\");","247","                props.put(name + \".sinkgroups.group1.sinks\", sb.toString());","248","                props.put(name + \".sinkgroups.group1.processor.type\", \"failover\");","249","                final String sourceChannels = \"primary\";","250","                props.put(name + \".channels\", sourceChannels);","251","                props.put(name + \".sources.\" + FlumeEmbeddedManager.SOURCE_NAME + \".channels\", sourceChannels);","253","                String channels = null;","256","                props.put(name + \".sources\", FlumeEmbeddedManager.SOURCE_NAME);","257","                props.put(name + \".sources.\" + FlumeEmbeddedManager.SOURCE_NAME + \".type\", SOURCE_TYPE);","258","","277","                    \/\/ Prohibit setting the sources as they are set above but allow interceptors to be set","278","                    if (upperKey.startsWith(\"SOURCES.\") && !upperKey.startsWith(\"SOURCES.LOG4J-SOURCE.INTERCEPTORS\")) {","279","                        final String msg = \"Specification of Sources is not allowed in Flume Appender: \" + key;","280","                        LOGGER.error(msg);","281","                        throw new ConfigurationException(msg);","282","                    }","283","","291","                    if (upperKey.equals(\"CHANNELS\")) {","292","                        channels = value.trim();","293","                    } else if (upperKey.equals(\"SINKS\")) {","297","                    props.put(name + '.' + key, value);","300","                String sourceChannels = channels;","301","","302","                if (channels == null) {","303","                    sourceChannels = \"primary\";","304","                    props.put(name + \".channels\", sourceChannels);","305","                }","306","","307","                props.put(name + \".sources.\" + FlumeEmbeddedManager.SOURCE_NAME + \".channels\", sourceChannels);","308",""]}],"log4j-flume-ng\/src\/test\/resources\/embedded.xml":[{"add":["1","<Configuration status=\"debug\" name=\"MyApp\" packages=\"\">","4","      <Property name=\"channel.type\">memory<\/Property>","5","      <!-- Flume 1.4.0 does not support interceptors on the embedded agent","9","      <Property name=\"sources.log4j-source.interceptors.environment_interceptor.value\">local<\/Property>   -->","11","      <Property name=\"agent1.type\">avro<\/Property>","12","      <Property name=\"agent1.hostname\">localhost<\/Property>","13","      <Property name=\"agent1.port\">${sys:primaryPort}<\/Property>","14","      <Property name=\"agent1.batch-size\">1<\/Property>","15","      <Property name=\"agent2.type\">avro<\/Property>","16","      <Property name=\"agent2.hostname\">localhost<\/Property>","17","      <Property name=\"agent2.port\">${sys:alternatePort}<\/Property>","18","      <Property name=\"agent2.batch-size\">1<\/Property>","19","      <Property name=\"processor.type\">failover<\/Property>","20","      <Property name=\"processor.priority.agent1\">10<\/Property>","21","      <Property name=\"processor.priority.agent2\">5<\/Property>","32","    <Root level=\"debug\">"],"delete":["1","<Configuration status=\"warn\" name=\"MyApp\" packages=\"\">","4","      <Property name=\"channels\">primary<\/Property>","5","      <Property name=\"channels.primary.type\">memory<\/Property>","9","      <Property name=\"sources.log4j-source.interceptors.environment_interceptor.value\">local<\/Property>","11","      <Property name=\"sinks.agent1.channel\">primary<\/Property>","12","      <Property name=\"sinks.agent1.type\">avro<\/Property>","13","      <Property name=\"sinks.agent1.hostname\">localhost<\/Property>","14","      <Property name=\"sinks.agent1.port\">${sys:primaryPort}<\/Property>","15","      <Property name=\"sinks.agent1.batch-size\">1<\/Property>","16","      <Property name=\"sinks.agent2.channel\">primary<\/Property>","17","      <Property name=\"sinks.agent2.type\">avro<\/Property>","18","      <Property name=\"sinks.agent2.hostname\">localhost<\/Property>","19","      <Property name=\"sinks.agent2.port\">${sys:alternatePort}<\/Property>","20","      <Property name=\"sinks.agent2.batch-size\">1<\/Property>","21","      <Property name=\"sinkgroups\">group1<\/Property>","22","      <Property name=\"sinkgroups.group1.sinks\">agent1 agent2<\/Property>","23","      <Property name=\"sinkgroups.group1.processor.type\">failover<\/Property>","24","      <Property name=\"sinkgroups.group1.processor.priority.agent1\">10<\/Property>","25","      <Property name=\"sinkgroups.group1.processor.priority.agent2\">5<\/Property>","36","    <Root level=\"warn\">"]}],"pom.xml":[{"add":["140","    <flumeVersion>1.4.0<\/flumeVersion>","306","        <artifactId>flume-ng-embedded-agent<\/artifactId>","307","        <version>${flumeVersion}<\/version>","308","        <exclusions>","309","          <exclusion>","310","            <groupId>org.slf4j<\/groupId>","311","            <artifactId>slf4j-log4j12<\/artifactId>","312","          <\/exclusion>","313","          <exclusion>","314","            <groupId>log4j<\/groupId>","315","            <artifactId>log4j<\/artifactId>","316","          <\/exclusion>","317","          <exclusion>","318","            <groupId>org.codehaus.jackson<\/groupId>","319","            <artifactId>jackson-core-asl<\/artifactId>","320","          <\/exclusion>","321","          <exclusion>","322","            <groupId>org.codehaus.jackson<\/groupId>","323","            <artifactId>jackson-mapper-asl<\/artifactId>","324","          <\/exclusion>","325","        <\/exclusions>","326","      <\/dependency>","327","      <dependency>","328","        <groupId>org.apache.flume<\/groupId>"],"delete":["140","    <flumeVersion>1.3.1<\/flumeVersion>"]}],"log4j-flume-ng\/src\/test\/resources\/default_embedded.xml":[{"add":["1","<Configuration status=\"debug\" name=\"MyApp\" packages=\"\">","16","    <Root level=\"debug\">"],"delete":["1","<Configuration status=\"warn\" name=\"MyApp\" packages=\"\">","16","    <Root level=\"error\">"]}]}},"9d7dbe733129c66d0e497eb904930718185b998c":{"changes":{"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/pattern\/DatePatternConverterTest.java":"ADD","src\/changes\/changes.xml":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/pattern\/DatePatternConverter.java":"MODIFY"},"diff":{"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/pattern\/DatePatternConverterTest.java":[{"add":[],"delete":[]}],"src\/changes\/changes.xml":[{"add":["24","      <action issue=\"LOG4J2-670\" dev=\"rpopma\" type=\"fix\">","25","        DatePatternConverter ISO8601_PATTERN now conforms to ISO8601.","26","      <\/action>"],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/pattern\/DatePatternConverter.java":[{"add":["114","    private static final String ISO8601_BASIC_PATTERN = \"yyyyMMdd'T'HHmmss,SSS\";","124","    static final String ISO8601_PATTERN = \"yyyy-MM-dd'T'HH:mm:ss,SSS\";"],"delete":["114","    private static final String ISO8601_BASIC_PATTERN = \"yyyyMMdd HHmmss,SSS\";","124","    private static final String ISO8601_PATTERN = \"yyyy-MM-dd HH:mm:ss,SSS\";"]}]}},"b7ec6c8adb38fabdbcbdf55c664cdb8de35ce7e5":{"changes":{"core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/SyslogAppenderTest.java":"MODIFY","core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/SocketAppenderTest.java":"MODIFY","src\/site\/xdoc\/manual\/appenders.xml":"MODIFY","core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/net\/TCPSocketManager.java":"MODIFY","src\/changes\/changes.xml":"MODIFY","core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/SocketAppender.java":"MODIFY","core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/SyslogAppender.java":"MODIFY","core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/net\/SocketServerTest.java":"MODIFY"},"diff":{"core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/SyslogAppenderTest.java":[{"add":["212","        return SyslogAppender.createAppender(\"localhost\", PORT, protocol, \"-1\", null, \"Test\", \"true\", \"false\", \"LOCAL0\", \"Audit\","],"delete":["212","        return SyslogAppender.createAppender(\"localhost\", PORT, protocol, \"-1\", \"Test\", \"true\", \"false\", \"LOCAL0\", \"Audit\","]}],"core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/SocketAppenderTest.java":[{"add":["45","import static org.junit.Assert.fail;","54","    private static final String DYN_PORT = \"8300\";","55","    private static final String ERROR_PORT = \"8301\";","56","    private static final int PORTNUM1 = Integer.parseInt(PORT);","57","    private static final int PORTNUM2 = Integer.parseInt(DYN_PORT);","72","        tcp = new TCPSocketServer(PORTNUM1);","103","            \"false\", \"Test\", null, null, null, null, null, null);","131","            \"false\", \"Test\", null, null, null, null, null, null);","145","    @Test","146","    public void testTcpAppenderDeadlock() throws Exception {","147","","148","        final SocketAppender appender = SocketAppender.createAppender(\"localhost\", DYN_PORT, \"tcp\", \"10000\",","149","                \"false\", \"Test\", null, null, null, null, null, null);","150","            appender.start();","151","            \/\/ set appender on root and set level to debug","152","            root.addAppender(appender);","153","            root.setAdditive(false);","154","            root.setLevel(Level.DEBUG);","155","","156","            new TCPSocketServer(PORTNUM2).start();","157","","158","            root.debug(\"This message is written because a deadlock never.\");","159","","160","            LogEvent event = list.poll(3, TimeUnit.SECONDS);","161","            assertNotNull(\"No event retrieved\", event);","162","    }","163","","164","    @Test","165","    public void testTcpAppenderNoWait() throws Exception {","166","","167","        final SocketAppender appender = SocketAppender.createAppender(\"localhost\", ERROR_PORT, \"tcp\", \"10000\",","168","            \"true\", \"Test\", null, \"false\", null, null, null, null);","169","        appender.start();","170","        \/\/ set appender on root and set level to debug","171","        root.addAppender(appender);","172","        root.setAdditive(false);","173","        root.setLevel(Level.DEBUG);","174","","175","        try {","176","            root.debug(\"This message is written because a deadlock never.\");","177","            fail(\"No Exception was thrown\");","178","        } catch (Exception ex) {","179","            \/\/ Failure is expected.","180","        }","181","    }","182","","183","","190","            this.sock = new DatagramSocket(PORTNUM1);","223","        public TCPSocketServer(int port) throws IOException {","224","            this.sock = new ServerSocket(port);"],"delete":["53","    private static final int PORTNUM = Integer.parseInt(PORT);","68","        tcp = new TCPSocketServer();","99","            \"Test\", null, null, null, null, null, null);","127","            \"Test\", null, null, null, null, null, null);","147","            this.sock = new DatagramSocket(PORTNUM);","180","        public TCPSocketServer() throws IOException {","181","            this.sock = new ServerSocket(PORTNUM);"]}],"src\/site\/xdoc\/manual\/appenders.xml":[{"add":["1375","\t\t\t\t\tFileAppender with \"bufferedIO=true\" in our","1487","\t\t\t\t\tin our","1489","","1498","\t\t\t\t\tFastRollingFileAppender uses a FastRollingFileManager","1571","","1982","              <td>immediateFail<\/td>","1983","              <td>boolean<\/td>","1984","              <td>When set to true, log events will not wait to try to reconnect and will fail immediately if the","1985","              socket is not available.<\/td>","1986","            <\/tr>","1987","            <tr>","2110","              <td>immediateFail<\/td>","2111","              <td>boolean<\/td>","2112","              <td>When set to true, log events will not wait to try to reconnect and will fail immediately if the","2113","                socket is not available.<\/td>","2114","            <\/tr>","2115","            <tr>"],"delete":["1375","\t\t\t\t\tFileAppender with \"bufferedIO=true\" in our ","1487","\t\t\t\t\tin our ","1489","\t\t\t\t\t","1498","\t\t\t\t\tFastRollingFileAppender uses a FastRollingFileManager ","1571","\t\t\t\t\t\t\t"]}],"core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/net\/TCPSocketManager.java":[{"add":["56","    private final boolean immediateFail;","57","","69","                            final String host, final int port, final int delay, final boolean immediateFail) {","73","        this.immediateFail = immediateFail;","90","    public static TCPSocketManager getSocketManager(final String host, int port, int delay, boolean immediateFail) {","100","        return (TCPSocketManager) getManager(\"TCP:\" + host + \":\" + port,","101","            new FactoryData(host, port, delay, immediateFail), FACTORY);","105","    protected void write(final byte[] bytes, final int offset, final int length)  {","107","            if (connector != null && !immediateFail) {","115","        synchronized (this) {","116","            try {","117","                getOutputStream().write(bytes, offset, length);","118","            } catch (final IOException ex) {","119","                if (retry && connector == null) {","120","                    connector = new Reconnector(this);","121","                    connector.setDaemon(true);","122","                    connector.setPriority(Thread.MIN_PRIORITY);","123","                    connector.start();","124","                }","125","                final String msg = \"Error writing to \" + getName();","126","                throw new AppenderRuntimeException(msg, ex);","154","","222","        private final boolean immediateFail;","224","        public FactoryData(final String host, final int port, final int delay, final boolean immediateFail) {","228","            this.immediateFail = immediateFail;","250","                return new TCPSocketManager(name, os, socket, address, data.host, data.port, data.delay,","251","                    data.immediateFail);","259","            return new TCPSocketManager(name, os, null, address, data.host, data.port, data.delay, data.immediateFail);"],"delete":["67","                            final String host, final int port, final int delay) {","87","    public static TCPSocketManager getSocketManager(final String host, int port, int delay) {","97","        return (TCPSocketManager) getManager(\"TCP:\" + host + \":\" + port, new FactoryData(host, port, delay), FACTORY);","101","    protected synchronized void write(final byte[] bytes, final int offset, final int length)  {","103","            if (connector != null) {","111","        try {","112","            getOutputStream().write(bytes, offset, length);","113","        } catch (final IOException ex) {","114","            if (retry && connector == null) {","115","                connector = new Reconnector(this);","116","                connector.setDaemon(true);","117","                connector.setPriority(Thread.MIN_PRIORITY);","118","                connector.start();","120","            final String msg = \"Error writing to \" + getName();","121","            throw new AppenderRuntimeException(msg, ex);","148","    ","217","        public FactoryData(final String host, final int port, final int delay) {","242","                return new TCPSocketManager(name, os, socket, address, data.host, data.port, data.delay);","250","            return new TCPSocketManager(name, os, null, address, data.host, data.port, data.delay);"]}],"src\/changes\/changes.xml":[{"add":["25","      <action issue=\"LOG4J2-205\" dev=\"rgoers\" type=\"fix\">","26","        Fix deadlock in SocketAppender. Added option to not wait for socket reconnect.","27","      <\/action>"],"delete":[]}],"core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/SocketAppender.java":[{"add":["73","     * @param immediateFail True if the write should fail if no socket is immediately available.","81","     * @param config The Configuration","89","                                                @PluginAttr(\"immediateFail\") final String immediateFail,","101","        final boolean fail = immediateFail == null ? true : Boolean.valueOf(immediateFail);","115","        final AbstractSocketManager manager = createSocketManager(prot, host, port, reconnectDelay, fail);","124","                                                               final int delay, final boolean immediateFail) {","128","                return TCPSocketManager.getSocketManager(host, port, delay, immediateFail);"],"delete":["80","     * @param config The Configuration               ","112","        final AbstractSocketManager manager = createSocketManager(prot, host, port, reconnectDelay);","121","                                                               final int delay) {","125","                return TCPSocketManager.getSocketManager(host, port, delay);"]}],"core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/SyslogAppender.java":[{"add":["54","     * @param immediateFail True if the write should fail if no socket is immediately available.","87","                                                @PluginAttr(\"immediateFail\") final String immediateFail,","115","        final boolean fail = immediateFail == null ? true : Boolean.valueOf(immediateFail);","128","        final AbstractSocketManager manager = createSocketManager(prot, host, port, reconnectDelay, fail);"],"delete":["125","        final AbstractSocketManager manager = createSocketManager(prot, host, port, reconnectDelay);"]}],"core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/net\/SocketServerTest.java":[{"add":["94","            null, \"Test\", null, null, null, socketFilter, null, null);"],"delete":["94","            \"Test\", null, null, null, socketFilter, null, null);"]}]}},"3165330ab71f5313a2bc1d83eb07546e9499ca42":{"changes":{"log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/spi\/AbstractLogger.java":"MODIFY","log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/Logger.java":"MODIFY"},"diff":{"log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/spi\/AbstractLogger.java":[{"add":["174","    public void catching(final Level level, final Throwable throwable) {","175","        catching(FQCN, level, throwable);","183","     * @param throwable The Throwable.","185","    protected void catching(final String fqcn, final Level level, final Throwable throwable) {","187","            logMessageSafely(fqcn, level, CATCHING_MARKER, catchingMsg(throwable), throwable);","192","    public void catching(final Throwable throwable) {","194","            logMessageSafely(FQCN, Level.ERROR, CATCHING_MARKER, catchingMsg(throwable), throwable);","198","    protected Message catchingMsg(final Throwable throwable) {","210","        } catch (final Throwable throwable) {","220","        } catch (final Throwable throwable) {","255","    public void debug(final Marker marker, final CharSequence message, final Throwable throwable) {","256","        logIfEnabled(FQCN, Level.DEBUG, marker, message, throwable);","260","    public void debug(final Marker marker, final Message message) {","261","        logIfEnabled(FQCN, Level.DEBUG, marker, message, message != null ? message.getThrowable() : null);","265","    public void debug(final Marker marker, final Message message, final Throwable throwable) {","266","        logIfEnabled(FQCN, Level.DEBUG, marker, message, throwable);","275","    public void debug(final Marker marker, final Object message, final Throwable throwable) {","276","        logIfEnabled(FQCN, Level.DEBUG, marker, message, throwable);","290","    public void debug(final Marker marker, final String message, final Throwable throwable) {","291","        logIfEnabled(FQCN, Level.DEBUG, marker, message, throwable);","295","    public void debug(final Message message) {","296","        logIfEnabled(FQCN, Level.DEBUG, null, message, message != null ? message.getThrowable() : null);","300","    public void debug(final Message message, final Throwable throwable) {","301","        logIfEnabled(FQCN, Level.DEBUG, null, message, throwable);","310","    public void debug(final CharSequence message, final Throwable throwable) {","311","        logIfEnabled(FQCN, Level.DEBUG, null, message, throwable);","320","    public void debug(final Object message, final Throwable throwable) {","321","        logIfEnabled(FQCN, Level.DEBUG, null, message, throwable);","335","    public void debug(final String message, final Throwable throwable) {","336","        logIfEnabled(FQCN, Level.DEBUG, null, message, throwable);","340","    public void debug(final Supplier<?> messageSupplier) {","341","        logIfEnabled(FQCN, Level.DEBUG, null, messageSupplier, (Throwable) null);","345","    public void debug(final Supplier<?> messageSupplier, final Throwable throwable) {","346","        logIfEnabled(FQCN, Level.DEBUG, null, messageSupplier, throwable);","350","    public void debug(final Marker marker, final Supplier<?> messageSupplier) {","351","        logIfEnabled(FQCN, Level.DEBUG, marker, messageSupplier, (Throwable) null);","360","    public void debug(final Marker marker, final Supplier<?> messageSupplier, final Throwable throwable) {","361","        logIfEnabled(FQCN, Level.DEBUG, marker, messageSupplier, throwable);","370","    public void debug(final Marker marker, final MessageSupplier messageSupplier) {","371","        logIfEnabled(FQCN, Level.DEBUG, marker, messageSupplier, (Throwable) null);","375","    public void debug(final Marker marker, final MessageSupplier messageSupplier, final Throwable throwable) {","376","        logIfEnabled(FQCN, Level.DEBUG, marker, messageSupplier, throwable);","380","    public void debug(final MessageSupplier messageSupplier) {","381","        logIfEnabled(FQCN, Level.DEBUG, null, messageSupplier, (Throwable) null);","385","    public void debug(final MessageSupplier messageSupplier, final Throwable throwable) {","386","        logIfEnabled(FQCN, Level.DEBUG, null, messageSupplier, throwable);","559","     * @param messageSupplier The Supplier of the Message.","562","    protected EntryMessage enter(final String fqcn, final MessageSupplier messageSupplier) {","566","                    messageSupplier.get()), null);","663","    public void error(final Marker marker, final Message message) {","664","        logIfEnabled(FQCN, Level.ERROR, marker, message, message != null ? message.getThrowable() : null);","668","    public void error(final Marker marker, final Message message, final Throwable throwable) {","669","        logIfEnabled(FQCN, Level.ERROR, marker, message, throwable);","678","    public void error(final Marker marker, final CharSequence message, final Throwable throwable) {","679","        logIfEnabled(FQCN, Level.ERROR, marker, message, throwable);","688","    public void error(final Marker marker, final Object message, final Throwable throwable) {","689","        logIfEnabled(FQCN, Level.ERROR, marker, message, throwable);","703","    public void error(final Marker marker, final String message, final Throwable throwable) {","704","        logIfEnabled(FQCN, Level.ERROR, marker, message, throwable);","708","    public void error(final Message message) {","709","        logIfEnabled(FQCN, Level.ERROR, null, message, message != null ? message.getThrowable() : null);","713","    public void error(final Message message, final Throwable throwable) {","714","        logIfEnabled(FQCN, Level.ERROR, null, message, throwable);","723","    public void error(final CharSequence message, final Throwable throwable) {","724","        logIfEnabled(FQCN, Level.ERROR, null, message, throwable);","733","    public void error(final Object message, final Throwable throwable) {","734","        logIfEnabled(FQCN, Level.ERROR, null, message, throwable);","748","    public void error(final String message, final Throwable throwable) {","749","        logIfEnabled(FQCN, Level.ERROR, null, message, throwable);","753","    public void error(final Supplier<?> messageSupplier) {","754","        logIfEnabled(FQCN, Level.ERROR, null, messageSupplier, (Throwable) null);","758","    public void error(final Supplier<?> messageSupplier, final Throwable throwable) {","759","        logIfEnabled(FQCN, Level.ERROR, null, messageSupplier, throwable);","763","    public void error(final Marker marker, final Supplier<?> messageSupplier) {","764","        logIfEnabled(FQCN, Level.ERROR, marker, messageSupplier, (Throwable) null);","773","    public void error(final Marker marker, final Supplier<?> messageSupplier, final Throwable throwable) {","774","        logIfEnabled(FQCN, Level.ERROR, marker, messageSupplier, throwable);","783","    public void error(final Marker marker, final MessageSupplier messageSupplier) {","784","        logIfEnabled(FQCN, Level.ERROR, marker, messageSupplier, (Throwable) null);","788","    public void error(final Marker marker, final MessageSupplier messageSupplier, final Throwable throwable) {","789","        logIfEnabled(FQCN, Level.ERROR, marker, messageSupplier, throwable);","793","    public void error(final MessageSupplier messageSupplier) {","794","        logIfEnabled(FQCN, Level.ERROR, null, messageSupplier, (Throwable) null);","798","    public void error(final MessageSupplier messageSupplier, final Throwable throwable) {","799","        logIfEnabled(FQCN, Level.ERROR, null, messageSupplier, throwable);","976","    public void fatal(final Marker marker, final Message message) {","977","        logIfEnabled(FQCN, Level.FATAL, marker, message, message != null ? message.getThrowable() : null);","981","    public void fatal(final Marker marker, final Message message, final Throwable throwable) {","982","        logIfEnabled(FQCN, Level.FATAL, marker, message, throwable);","991","    public void fatal(final Marker marker, final CharSequence message, final Throwable throwable) {","992","        logIfEnabled(FQCN, Level.FATAL, marker, message, throwable);","1001","    public void fatal(final Marker marker, final Object message, final Throwable throwable) {","1002","        logIfEnabled(FQCN, Level.FATAL, marker, message, throwable);","1016","    public void fatal(final Marker marker, final String message, final Throwable throwable) {","1017","        logIfEnabled(FQCN, Level.FATAL, marker, message, throwable);","1021","    public void fatal(final Message message) {","1022","        logIfEnabled(FQCN, Level.FATAL, null, message, message != null ? message.getThrowable() : null);","1026","    public void fatal(final Message message, final Throwable throwable) {","1027","        logIfEnabled(FQCN, Level.FATAL, null, message, throwable);","1036","    public void fatal(final CharSequence message, final Throwable throwable) {","1037","        logIfEnabled(FQCN, Level.FATAL, null, message, throwable);","1046","    public void fatal(final Object message, final Throwable throwable) {","1047","        logIfEnabled(FQCN, Level.FATAL, null, message, throwable);","1061","    public void fatal(final String message, final Throwable throwable) {","1062","        logIfEnabled(FQCN, Level.FATAL, null, message, throwable);","1066","    public void fatal(final Supplier<?> messageSupplier) {","1067","        logIfEnabled(FQCN, Level.FATAL, null, messageSupplier, (Throwable) null);","1071","    public void fatal(final Supplier<?> messageSupplier, final Throwable throwable) {","1072","        logIfEnabled(FQCN, Level.FATAL, null, messageSupplier, throwable);","1076","    public void fatal(final Marker marker, final Supplier<?> messageSupplier) {","1077","        logIfEnabled(FQCN, Level.FATAL, marker, messageSupplier, (Throwable) null);","1086","    public void fatal(final Marker marker, final Supplier<?> messageSupplier, final Throwable throwable) {","1087","        logIfEnabled(FQCN, Level.FATAL, marker, messageSupplier, throwable);","1096","    public void fatal(final Marker marker, final MessageSupplier messageSupplier) {","1097","        logIfEnabled(FQCN, Level.FATAL, marker, messageSupplier, (Throwable) null);","1101","    public void fatal(final Marker marker, final MessageSupplier messageSupplier, final Throwable throwable) {","1102","        logIfEnabled(FQCN, Level.FATAL, marker, messageSupplier, throwable);","1106","    public void fatal(final MessageSupplier messageSupplier) {","1107","        logIfEnabled(FQCN, Level.FATAL, null, messageSupplier, (Throwable) null);","1111","    public void fatal(final MessageSupplier messageSupplier, final Throwable throwable) {","1112","        logIfEnabled(FQCN, Level.FATAL, null, messageSupplier, throwable);","1243","    public void info(final Marker marker, final Message message) {","1244","        logIfEnabled(FQCN, Level.INFO, marker, message, message != null ? message.getThrowable() : null);","1248","    public void info(final Marker marker, final Message message, final Throwable throwable) {","1249","        logIfEnabled(FQCN, Level.INFO, marker, message, throwable);","1258","    public void info(final Marker marker, final CharSequence message, final Throwable throwable) {","1259","        logIfEnabled(FQCN, Level.INFO, marker, message, throwable);","1268","    public void info(final Marker marker, final Object message, final Throwable throwable) {","1269","        logIfEnabled(FQCN, Level.INFO, marker, message, throwable);","1283","    public void info(final Marker marker, final String message, final Throwable throwable) {","1284","        logIfEnabled(FQCN, Level.INFO, marker, message, throwable);","1288","    public void info(final Message message) {","1289","        logIfEnabled(FQCN, Level.INFO, null, message, message != null ? message.getThrowable() : null);","1293","    public void info(final Message message, final Throwable throwable) {","1294","        logIfEnabled(FQCN, Level.INFO, null, message, throwable);","1303","    public void info(final CharSequence message, final Throwable throwable) {","1304","        logIfEnabled(FQCN, Level.INFO, null, message, throwable);","1313","    public void info(final Object message, final Throwable throwable) {","1314","        logIfEnabled(FQCN, Level.INFO, null, message, throwable);","1328","    public void info(final String message, final Throwable throwable) {","1329","        logIfEnabled(FQCN, Level.INFO, null, message, throwable);","1333","    public void info(final Supplier<?> messageSupplier) {","1334","        logIfEnabled(FQCN, Level.INFO, null, messageSupplier, (Throwable) null);","1338","    public void info(final Supplier<?> messageSupplier, final Throwable throwable) {","1339","        logIfEnabled(FQCN, Level.INFO, null, messageSupplier, throwable);","1343","    public void info(final Marker marker, final Supplier<?> messageSupplier) {","1344","        logIfEnabled(FQCN, Level.INFO, marker, messageSupplier, (Throwable) null);","1353","    public void info(final Marker marker, final Supplier<?> messageSupplier, final Throwable throwable) {","1354","        logIfEnabled(FQCN, Level.INFO, marker, messageSupplier, throwable);","1363","    public void info(final Marker marker, final MessageSupplier messageSupplier) {","1364","        logIfEnabled(FQCN, Level.INFO, marker, messageSupplier, (Throwable) null);","1368","    public void info(final Marker marker, final MessageSupplier messageSupplier, final Throwable throwable) {","1369","        logIfEnabled(FQCN, Level.INFO, marker, messageSupplier, throwable);","1373","    public void info(final MessageSupplier messageSupplier) {","1374","        logIfEnabled(FQCN, Level.INFO, null, messageSupplier, (Throwable) null);","1378","    public void info(final MessageSupplier messageSupplier, final Throwable throwable) {","1379","        logIfEnabled(FQCN, Level.INFO, null, messageSupplier, throwable);","1571","    public void log(final Level level, final Marker marker, final Message message) {","1572","        logIfEnabled(FQCN, level, marker, message, message != null ? message.getThrowable() : null);","1576","    public void log(final Level level, final Marker marker, final Message message, final Throwable throwable) {","1577","        logIfEnabled(FQCN, level, marker, message, throwable);","1586","    public void log(final Level level, final Marker marker, final CharSequence message, final Throwable throwable) {","1587","        if (isEnabled(level, marker, message, throwable)) {","1588","            logMessage(FQCN, level, marker, message, throwable);","1598","    public void log(final Level level, final Marker marker, final Object message, final Throwable throwable) {","1599","        if (isEnabled(level, marker, message, throwable)) {","1600","            logMessage(FQCN, level, marker, message, throwable);","1615","    public void log(final Level level, final Marker marker, final String message, final Throwable throwable) {","1616","        logIfEnabled(FQCN, level, marker, message, throwable);","1620","    public void log(final Level level, final Message message) {","1621","        logIfEnabled(FQCN, level, null, message, message != null ? message.getThrowable() : null);","1625","    public void log(final Level level, final Message message, final Throwable throwable) {","1626","        logIfEnabled(FQCN, level, null, message, throwable);","1635","    public void log(final Level level, final CharSequence message, final Throwable throwable) {","1636","        logIfEnabled(FQCN, level, null, message, throwable);","1645","    public void log(final Level level, final Object message, final Throwable throwable) {","1646","        logIfEnabled(FQCN, level, null, message, throwable);","1660","    public void log(final Level level, final String message, final Throwable throwable) {","1661","        logIfEnabled(FQCN, level, null, message, throwable);","1665","    public void log(final Level level, final Supplier<?> messageSupplier) {","1666","        logIfEnabled(FQCN, level, null, messageSupplier, (Throwable) null);","1670","    public void log(final Level level, final Supplier<?> messageSupplier, final Throwable throwable) {","1671","        logIfEnabled(FQCN, level, null, messageSupplier, throwable);","1675","    public void log(final Level level, final Marker marker, final Supplier<?> messageSupplier) {","1676","        logIfEnabled(FQCN, level, marker, messageSupplier, (Throwable) null);","1685","    public void log(final Level level, final Marker marker, final Supplier<?> messageSupplier, final Throwable throwable) {","1686","        logIfEnabled(FQCN, level, marker, messageSupplier, throwable);","1695","    public void log(final Level level, final Marker marker, final MessageSupplier messageSupplier) {","1696","        logIfEnabled(FQCN, level, marker, messageSupplier, (Throwable) null);","1700","    public void log(final Level level, final Marker marker, final MessageSupplier messageSupplier, final Throwable throwable) {","1701","        logIfEnabled(FQCN, level, marker, messageSupplier, throwable);","1705","    public void log(final Level level, final MessageSupplier messageSupplier) {","1706","        logIfEnabled(FQCN, level, null, messageSupplier, (Throwable) null);","1710","    public void log(final Level level, final MessageSupplier messageSupplier, final Throwable throwable) {","1711","        logIfEnabled(FQCN, level, null, messageSupplier, throwable);","1832","    public void logIfEnabled(final String fqcn, final Level level, final Marker marker, final Message message,","1833","            final Throwable throwable) {","1834","        if (isEnabled(level, marker, message, throwable)) {","1835","            logMessageSafely(fqcn, level, marker, message, throwable);","1841","            final MessageSupplier messageSupplier, final Throwable throwable) {","1842","        if (isEnabled(level, marker, messageSupplier, throwable)) {","1843","            logMessage(fqcn, level, marker, messageSupplier, throwable);","1849","            final Throwable throwable) {","1850","        if (isEnabled(level, marker, message, throwable)) {","1851","            logMessage(fqcn, level, marker, message, throwable);","1857","            final Throwable throwable) {","1858","        if (isEnabled(level, marker, message, throwable)) {","1859","            logMessage(fqcn, level, marker, message, throwable);","1864","    public void logIfEnabled(final String fqcn, final Level level, final Marker marker, final Supplier<?> messageSupplier,","1865","            final Throwable throwable) {","1866","        if (isEnabled(level, marker, messageSupplier, throwable)) {","1867","            logMessage(fqcn, level, marker, messageSupplier, throwable);","1980","            final Throwable throwable) {","1981","        if (isEnabled(level, marker, message, throwable)) {","1982","            logMessage(fqcn, level, marker, message, throwable);","1987","            final Throwable throwable) {","1988","        logMessageSafely(fqcn, level, marker, messageFactory.newMessage(message), throwable);","1992","            final Throwable throwable) {","1993","        logMessageSafely(fqcn, level, marker, messageFactory.newMessage(message), throwable);","1997","            final MessageSupplier messageSupplier, final Throwable throwable) {","1998","        final Message message = LambdaUtil.get(messageSupplier);","1999","        final Throwable effectiveThrowable = (throwable == null && message != null)","2000","                ? message.getThrowable()","2001","                : throwable;","2002","        logMessageSafely(fqcn, level, marker, message, effectiveThrowable);","2005","    protected void logMessage(final String fqcn, final Level level, final Marker marker, final Supplier<?> messageSupplier,","2006","            final Throwable throwable) {","2007","        final Message message = LambdaUtil.getMessage(messageSupplier, messageFactory);","2008","        final Throwable effectiveThrowable = (throwable == null && message != null)","2009","                ? message.getThrowable()","2010","                : throwable;","2011","        logMessageSafely(fqcn, level, marker, message, effectiveThrowable);","2015","            final Throwable throwable) {","2016","        logMessageSafely(fqcn, level, marker, messageFactory.newMessage(message), throwable);","2122","            final Message message = new StringFormattedMessage(format, params);","2123","            logMessageSafely(FQCN, level, marker, message, message.getThrowable());","2130","            final Message message = new StringFormattedMessage(format, params);","2131","            logMessageSafely(FQCN, level, null, message, message.getThrowable());","2138","    private void logMessageSafely(final String fqcn, final Level level, final Marker marker, final Message message,","2141","            logMessageTrackRecursion(fqcn, level, marker, message, throwable);","2144","            ReusableMessageFactory.release(message);","2154","                                          final Message message,","2158","            tryLogMessage(fqcn, getLocation(fqcn), level, marker, message, throwable);","2201","                               final Message message,","2204","            log(level, marker, fqcn, location, message, throwable);","2207","            handleLogMessageException(e, fqcn, message);","2220","    private void handleLogMessageException(final Exception exception, final String fqcn, final Message message) {","2224","        final String format = message.getFormat();","2231","        sb.append(message.getClass().getSimpleName());","2238","    public <T extends Throwable> T throwing(final T throwable) {","2239","        return throwing(FQCN, Level.ERROR, throwable);","2243","    public <T extends Throwable> T throwing(final Level level, final T throwable) {","2244","        return throwing(FQCN, level, throwable);","2253","     * @param throwable The Throwable.","2256","    protected <T extends Throwable> T throwing(final String fqcn, final Level level, final T throwable) {","2258","            logMessageSafely(fqcn, level, THROWING_MARKER, throwingMsg(throwable), throwable);","2260","        return throwable;","2263","    protected Message throwingMsg(final Throwable throwable) {","2268","    public void trace(final Marker marker, final Message message) {","2269","        logIfEnabled(FQCN, Level.TRACE, marker, message, message != null ? message.getThrowable() : null);","2273","    public void trace(final Marker marker, final Message message, final Throwable throwable) {","2274","        logIfEnabled(FQCN, Level.TRACE, marker, message, throwable);","2283","    public void trace(final Marker marker, final CharSequence message, final Throwable throwable) {","2284","        logIfEnabled(FQCN, Level.TRACE, marker, message, throwable);","2293","    public void trace(final Marker marker, final Object message, final Throwable throwable) {","2294","        logIfEnabled(FQCN, Level.TRACE, marker, message, throwable);","2308","    public void trace(final Marker marker, final String message, final Throwable throwable) {","2309","        logIfEnabled(FQCN, Level.TRACE, marker, message, throwable);","2313","    public void trace(final Message message) {","2314","        logIfEnabled(FQCN, Level.TRACE, null, message, message != null ? message.getThrowable() : null);","2318","    public void trace(final Message message, final Throwable throwable) {","2319","        logIfEnabled(FQCN, Level.TRACE, null, message, throwable);","2328","    public void trace(final CharSequence message, final Throwable throwable) {","2329","        logIfEnabled(FQCN, Level.TRACE, null, message, throwable);","2338","    public void trace(final Object message, final Throwable throwable) {","2339","        logIfEnabled(FQCN, Level.TRACE, null, message, throwable);","2353","    public void trace(final String message, final Throwable throwable) {","2354","        logIfEnabled(FQCN, Level.TRACE, null, message, throwable);","2358","    public void trace(final Supplier<?> messageSupplier) {","2359","        logIfEnabled(FQCN, Level.TRACE, null, messageSupplier, (Throwable) null);","2363","    public void trace(final Supplier<?> messageSupplier, final Throwable throwable) {","2364","        logIfEnabled(FQCN, Level.TRACE, null, messageSupplier, throwable);","2368","    public void trace(final Marker marker, final Supplier<?> messageSupplier) {","2369","        logIfEnabled(FQCN, Level.TRACE, marker, messageSupplier, (Throwable) null);","2378","    public void trace(final Marker marker, final Supplier<?> messageSupplier, final Throwable throwable) {","2379","        logIfEnabled(FQCN, Level.TRACE, marker, messageSupplier, throwable);","2388","    public void trace(final Marker marker, final MessageSupplier messageSupplier) {","2389","        logIfEnabled(FQCN, Level.TRACE, marker, messageSupplier, (Throwable) null);","2393","    public void trace(final Marker marker, final MessageSupplier messageSupplier, final Throwable throwable) {","2394","        logIfEnabled(FQCN, Level.TRACE, marker, messageSupplier, throwable);","2398","    public void trace(final MessageSupplier messageSupplier) {","2399","        logIfEnabled(FQCN, Level.TRACE, null, messageSupplier, (Throwable) null);","2403","    public void trace(final MessageSupplier messageSupplier, final Throwable throwable) {","2404","        logIfEnabled(FQCN, Level.TRACE, null, messageSupplier, throwable);","2589","    public void warn(final Marker marker, final Message message) {","2590","        logIfEnabled(FQCN, Level.WARN, marker, message, message != null ? message.getThrowable() : null);","2594","    public void warn(final Marker marker, final Message message, final Throwable throwable) {","2595","        logIfEnabled(FQCN, Level.WARN, marker, message, throwable);","2604","    public void warn(final Marker marker, final CharSequence message, final Throwable throwable) {","2605","        logIfEnabled(FQCN, Level.WARN, marker, message, throwable);","2614","    public void warn(final Marker marker, final Object message, final Throwable throwable) {","2615","        logIfEnabled(FQCN, Level.WARN, marker, message, throwable);","2629","    public void warn(final Marker marker, final String message, final Throwable throwable) {","2630","        logIfEnabled(FQCN, Level.WARN, marker, message, throwable);","2634","    public void warn(final Message message) {","2635","        logIfEnabled(FQCN, Level.WARN, null, message, message != null ? message.getThrowable() : null);","2639","    public void warn(final Message message, final Throwable throwable) {","2640","        logIfEnabled(FQCN, Level.WARN, null, message, throwable);","2649","    public void warn(final CharSequence message, final Throwable throwable) {","2650","        logIfEnabled(FQCN, Level.WARN, null, message, throwable);","2659","    public void warn(final Object message, final Throwable throwable) {","2660","        logIfEnabled(FQCN, Level.WARN, null, message, throwable);","2674","    public void warn(final String message, final Throwable throwable) {","2675","        logIfEnabled(FQCN, Level.WARN, null, message, throwable);","2679","    public void warn(final Supplier<?> messageSupplier) {","2680","        logIfEnabled(FQCN, Level.WARN, null, messageSupplier, (Throwable) null);","2684","    public void warn(final Supplier<?> messageSupplier, final Throwable throwable) {","2685","        logIfEnabled(FQCN, Level.WARN, null, messageSupplier, throwable);","2689","    public void warn(final Marker marker, final Supplier<?> messageSupplier) {","2690","        logIfEnabled(FQCN, Level.WARN, marker, messageSupplier, (Throwable) null);","2699","    public void warn(final Marker marker, final Supplier<?> messageSupplier, final Throwable throwable) {","2700","        logIfEnabled(FQCN, Level.WARN, marker, messageSupplier, throwable);","2709","    public void warn(final Marker marker, final MessageSupplier messageSupplier) {","2710","        logIfEnabled(FQCN, Level.WARN, marker, messageSupplier, (Throwable) null);","2714","    public void warn(final Marker marker, final MessageSupplier messageSupplier, final Throwable throwable) {","2715","        logIfEnabled(FQCN, Level.WARN, marker, messageSupplier, throwable);","2719","    public void warn(final MessageSupplier messageSupplier) {","2720","        logIfEnabled(FQCN, Level.WARN, null, messageSupplier, (Throwable) null);","2724","    public void warn(final MessageSupplier messageSupplier, final Throwable throwable) {","2725","        logIfEnabled(FQCN, Level.WARN, null, messageSupplier, throwable);"],"delete":["174","    public void catching(final Level level, final Throwable t) {","175","        catching(FQCN, level, t);","183","     * @param t The Throwable.","185","    protected void catching(final String fqcn, final Level level, final Throwable t) {","187","            logMessageSafely(fqcn, level, CATCHING_MARKER, catchingMsg(t), t);","192","    public void catching(final Throwable t) {","194","            logMessageSafely(FQCN, Level.ERROR, CATCHING_MARKER, catchingMsg(t), t);","198","    protected Message catchingMsg(final Throwable t) {","210","        } catch (final Throwable t) {","220","        } catch (final Throwable t) {","255","    public void debug(final Marker marker, final CharSequence message, final Throwable t) {","256","        logIfEnabled(FQCN, Level.DEBUG, marker, message, t);","260","    public void debug(final Marker marker, final Message msg) {","261","        logIfEnabled(FQCN, Level.DEBUG, marker, msg, msg != null ? msg.getThrowable() : null);","265","    public void debug(final Marker marker, final Message msg, final Throwable t) {","266","        logIfEnabled(FQCN, Level.DEBUG, marker, msg, t);","275","    public void debug(final Marker marker, final Object message, final Throwable t) {","276","        logIfEnabled(FQCN, Level.DEBUG, marker, message, t);","290","    public void debug(final Marker marker, final String message, final Throwable t) {","291","        logIfEnabled(FQCN, Level.DEBUG, marker, message, t);","295","    public void debug(final Message msg) {","296","        logIfEnabled(FQCN, Level.DEBUG, null, msg, msg != null ? msg.getThrowable() : null);","300","    public void debug(final Message msg, final Throwable t) {","301","        logIfEnabled(FQCN, Level.DEBUG, null, msg, t);","310","    public void debug(final CharSequence message, final Throwable t) {","311","        logIfEnabled(FQCN, Level.DEBUG, null, message, t);","320","    public void debug(final Object message, final Throwable t) {","321","        logIfEnabled(FQCN, Level.DEBUG, null, message, t);","335","    public void debug(final String message, final Throwable t) {","336","        logIfEnabled(FQCN, Level.DEBUG, null, message, t);","340","    public void debug(final Supplier<?> msgSupplier) {","341","        logIfEnabled(FQCN, Level.DEBUG, null, msgSupplier, (Throwable) null);","345","    public void debug(final Supplier<?> msgSupplier, final Throwable t) {","346","        logIfEnabled(FQCN, Level.DEBUG, null, msgSupplier, t);","350","    public void debug(final Marker marker, final Supplier<?> msgSupplier) {","351","        logIfEnabled(FQCN, Level.DEBUG, marker, msgSupplier, (Throwable) null);","360","    public void debug(final Marker marker, final Supplier<?> msgSupplier, final Throwable t) {","361","        logIfEnabled(FQCN, Level.DEBUG, marker, msgSupplier, t);","370","    public void debug(final Marker marker, final MessageSupplier msgSupplier) {","371","        logIfEnabled(FQCN, Level.DEBUG, marker, msgSupplier, (Throwable) null);","375","    public void debug(final Marker marker, final MessageSupplier msgSupplier, final Throwable t) {","376","        logIfEnabled(FQCN, Level.DEBUG, marker, msgSupplier, t);","380","    public void debug(final MessageSupplier msgSupplier) {","381","        logIfEnabled(FQCN, Level.DEBUG, null, msgSupplier, (Throwable) null);","385","    public void debug(final MessageSupplier msgSupplier, final Throwable t) {","386","        logIfEnabled(FQCN, Level.DEBUG, null, msgSupplier, t);","559","     * @param msgSupplier The Supplier of the Message.","562","    protected EntryMessage enter(final String fqcn, final MessageSupplier msgSupplier) {","566","                    msgSupplier.get()), null);","663","    public void error(final Marker marker, final Message msg) {","664","        logIfEnabled(FQCN, Level.ERROR, marker, msg, msg != null ? msg.getThrowable() : null);","668","    public void error(final Marker marker, final Message msg, final Throwable t) {","669","        logIfEnabled(FQCN, Level.ERROR, marker, msg, t);","678","    public void error(final Marker marker, final CharSequence message, final Throwable t) {","679","        logIfEnabled(FQCN, Level.ERROR, marker, message, t);","688","    public void error(final Marker marker, final Object message, final Throwable t) {","689","        logIfEnabled(FQCN, Level.ERROR, marker, message, t);","703","    public void error(final Marker marker, final String message, final Throwable t) {","704","        logIfEnabled(FQCN, Level.ERROR, marker, message, t);","708","    public void error(final Message msg) {","709","        logIfEnabled(FQCN, Level.ERROR, null, msg, msg != null ? msg.getThrowable() : null);","713","    public void error(final Message msg, final Throwable t) {","714","        logIfEnabled(FQCN, Level.ERROR, null, msg, t);","723","    public void error(final CharSequence message, final Throwable t) {","724","        logIfEnabled(FQCN, Level.ERROR, null, message, t);","733","    public void error(final Object message, final Throwable t) {","734","        logIfEnabled(FQCN, Level.ERROR, null, message, t);","748","    public void error(final String message, final Throwable t) {","749","        logIfEnabled(FQCN, Level.ERROR, null, message, t);","753","    public void error(final Supplier<?> msgSupplier) {","754","        logIfEnabled(FQCN, Level.ERROR, null, msgSupplier, (Throwable) null);","758","    public void error(final Supplier<?> msgSupplier, final Throwable t) {","759","        logIfEnabled(FQCN, Level.ERROR, null, msgSupplier, t);","763","    public void error(final Marker marker, final Supplier<?> msgSupplier) {","764","        logIfEnabled(FQCN, Level.ERROR, marker, msgSupplier, (Throwable) null);","773","    public void error(final Marker marker, final Supplier<?> msgSupplier, final Throwable t) {","774","        logIfEnabled(FQCN, Level.ERROR, marker, msgSupplier, t);","783","    public void error(final Marker marker, final MessageSupplier msgSupplier) {","784","        logIfEnabled(FQCN, Level.ERROR, marker, msgSupplier, (Throwable) null);","788","    public void error(final Marker marker, final MessageSupplier msgSupplier, final Throwable t) {","789","        logIfEnabled(FQCN, Level.ERROR, marker, msgSupplier, t);","793","    public void error(final MessageSupplier msgSupplier) {","794","        logIfEnabled(FQCN, Level.ERROR, null, msgSupplier, (Throwable) null);","798","    public void error(final MessageSupplier msgSupplier, final Throwable t) {","799","        logIfEnabled(FQCN, Level.ERROR, null, msgSupplier, t);","976","    public void fatal(final Marker marker, final Message msg) {","977","        logIfEnabled(FQCN, Level.FATAL, marker, msg, msg != null ? msg.getThrowable() : null);","981","    public void fatal(final Marker marker, final Message msg, final Throwable t) {","982","        logIfEnabled(FQCN, Level.FATAL, marker, msg, t);","991","    public void fatal(final Marker marker, final CharSequence message, final Throwable t) {","992","        logIfEnabled(FQCN, Level.FATAL, marker, message, t);","1001","    public void fatal(final Marker marker, final Object message, final Throwable t) {","1002","        logIfEnabled(FQCN, Level.FATAL, marker, message, t);","1016","    public void fatal(final Marker marker, final String message, final Throwable t) {","1017","        logIfEnabled(FQCN, Level.FATAL, marker, message, t);","1021","    public void fatal(final Message msg) {","1022","        logIfEnabled(FQCN, Level.FATAL, null, msg, msg != null ? msg.getThrowable() : null);","1026","    public void fatal(final Message msg, final Throwable t) {","1027","        logIfEnabled(FQCN, Level.FATAL, null, msg, t);","1036","    public void fatal(final CharSequence message, final Throwable t) {","1037","        logIfEnabled(FQCN, Level.FATAL, null, message, t);","1046","    public void fatal(final Object message, final Throwable t) {","1047","        logIfEnabled(FQCN, Level.FATAL, null, message, t);","1061","    public void fatal(final String message, final Throwable t) {","1062","        logIfEnabled(FQCN, Level.FATAL, null, message, t);","1066","    public void fatal(final Supplier<?> msgSupplier) {","1067","        logIfEnabled(FQCN, Level.FATAL, null, msgSupplier, (Throwable) null);","1071","    public void fatal(final Supplier<?> msgSupplier, final Throwable t) {","1072","        logIfEnabled(FQCN, Level.FATAL, null, msgSupplier, t);","1076","    public void fatal(final Marker marker, final Supplier<?> msgSupplier) {","1077","        logIfEnabled(FQCN, Level.FATAL, marker, msgSupplier, (Throwable) null);","1086","    public void fatal(final Marker marker, final Supplier<?> msgSupplier, final Throwable t) {","1087","        logIfEnabled(FQCN, Level.FATAL, marker, msgSupplier, t);","1096","    public void fatal(final Marker marker, final MessageSupplier msgSupplier) {","1097","        logIfEnabled(FQCN, Level.FATAL, marker, msgSupplier, (Throwable) null);","1101","    public void fatal(final Marker marker, final MessageSupplier msgSupplier, final Throwable t) {","1102","        logIfEnabled(FQCN, Level.FATAL, marker, msgSupplier, t);","1106","    public void fatal(final MessageSupplier msgSupplier) {","1107","        logIfEnabled(FQCN, Level.FATAL, null, msgSupplier, (Throwable) null);","1111","    public void fatal(final MessageSupplier msgSupplier, final Throwable t) {","1112","        logIfEnabled(FQCN, Level.FATAL, null, msgSupplier, t);","1243","    public void info(final Marker marker, final Message msg) {","1244","        logIfEnabled(FQCN, Level.INFO, marker, msg, msg != null ? msg.getThrowable() : null);","1248","    public void info(final Marker marker, final Message msg, final Throwable t) {","1249","        logIfEnabled(FQCN, Level.INFO, marker, msg, t);","1258","    public void info(final Marker marker, final CharSequence message, final Throwable t) {","1259","        logIfEnabled(FQCN, Level.INFO, marker, message, t);","1268","    public void info(final Marker marker, final Object message, final Throwable t) {","1269","        logIfEnabled(FQCN, Level.INFO, marker, message, t);","1283","    public void info(final Marker marker, final String message, final Throwable t) {","1284","        logIfEnabled(FQCN, Level.INFO, marker, message, t);","1288","    public void info(final Message msg) {","1289","        logIfEnabled(FQCN, Level.INFO, null, msg, msg != null ? msg.getThrowable() : null);","1293","    public void info(final Message msg, final Throwable t) {","1294","        logIfEnabled(FQCN, Level.INFO, null, msg, t);","1303","    public void info(final CharSequence message, final Throwable t) {","1304","        logIfEnabled(FQCN, Level.INFO, null, message, t);","1313","    public void info(final Object message, final Throwable t) {","1314","        logIfEnabled(FQCN, Level.INFO, null, message, t);","1328","    public void info(final String message, final Throwable t) {","1329","        logIfEnabled(FQCN, Level.INFO, null, message, t);","1333","    public void info(final Supplier<?> msgSupplier) {","1334","        logIfEnabled(FQCN, Level.INFO, null, msgSupplier, (Throwable) null);","1338","    public void info(final Supplier<?> msgSupplier, final Throwable t) {","1339","        logIfEnabled(FQCN, Level.INFO, null, msgSupplier, t);","1343","    public void info(final Marker marker, final Supplier<?> msgSupplier) {","1344","        logIfEnabled(FQCN, Level.INFO, marker, msgSupplier, (Throwable) null);","1353","    public void info(final Marker marker, final Supplier<?> msgSupplier, final Throwable t) {","1354","        logIfEnabled(FQCN, Level.INFO, marker, msgSupplier, t);","1363","    public void info(final Marker marker, final MessageSupplier msgSupplier) {","1364","        logIfEnabled(FQCN, Level.INFO, marker, msgSupplier, (Throwable) null);","1368","    public void info(final Marker marker, final MessageSupplier msgSupplier, final Throwable t) {","1369","        logIfEnabled(FQCN, Level.INFO, marker, msgSupplier, t);","1373","    public void info(final MessageSupplier msgSupplier) {","1374","        logIfEnabled(FQCN, Level.INFO, null, msgSupplier, (Throwable) null);","1378","    public void info(final MessageSupplier msgSupplier, final Throwable t) {","1379","        logIfEnabled(FQCN, Level.INFO, null, msgSupplier, t);","1571","    public void log(final Level level, final Marker marker, final Message msg) {","1572","        logIfEnabled(FQCN, level, marker, msg, msg != null ? msg.getThrowable() : null);","1576","    public void log(final Level level, final Marker marker, final Message msg, final Throwable t) {","1577","        logIfEnabled(FQCN, level, marker, msg, t);","1586","    public void log(final Level level, final Marker marker, final CharSequence message, final Throwable t) {","1587","        if (isEnabled(level, marker, message, t)) {","1588","            logMessage(FQCN, level, marker, message, t);","1598","    public void log(final Level level, final Marker marker, final Object message, final Throwable t) {","1599","        if (isEnabled(level, marker, message, t)) {","1600","            logMessage(FQCN, level, marker, message, t);","1615","    public void log(final Level level, final Marker marker, final String message, final Throwable t) {","1616","        logIfEnabled(FQCN, level, marker, message, t);","1620","    public void log(final Level level, final Message msg) {","1621","        logIfEnabled(FQCN, level, null, msg, msg != null ? msg.getThrowable() : null);","1625","    public void log(final Level level, final Message msg, final Throwable t) {","1626","        logIfEnabled(FQCN, level, null, msg, t);","1635","    public void log(final Level level, final CharSequence message, final Throwable t) {","1636","        logIfEnabled(FQCN, level, null, message, t);","1645","    public void log(final Level level, final Object message, final Throwable t) {","1646","        logIfEnabled(FQCN, level, null, message, t);","1660","    public void log(final Level level, final String message, final Throwable t) {","1661","        logIfEnabled(FQCN, level, null, message, t);","1665","    public void log(final Level level, final Supplier<?> msgSupplier) {","1666","        logIfEnabled(FQCN, level, null, msgSupplier, (Throwable) null);","1670","    public void log(final Level level, final Supplier<?> msgSupplier, final Throwable t) {","1671","        logIfEnabled(FQCN, level, null, msgSupplier, t);","1675","    public void log(final Level level, final Marker marker, final Supplier<?> msgSupplier) {","1676","        logIfEnabled(FQCN, level, marker, msgSupplier, (Throwable) null);","1685","    public void log(final Level level, final Marker marker, final Supplier<?> msgSupplier, final Throwable t) {","1686","        logIfEnabled(FQCN, level, marker, msgSupplier, t);","1695","    public void log(final Level level, final Marker marker, final MessageSupplier msgSupplier) {","1696","        logIfEnabled(FQCN, level, marker, msgSupplier, (Throwable) null);","1700","    public void log(final Level level, final Marker marker, final MessageSupplier msgSupplier, final Throwable t) {","1701","        logIfEnabled(FQCN, level, marker, msgSupplier, t);","1705","    public void log(final Level level, final MessageSupplier msgSupplier) {","1706","        logIfEnabled(FQCN, level, null, msgSupplier, (Throwable) null);","1710","    public void log(final Level level, final MessageSupplier msgSupplier, final Throwable t) {","1711","        logIfEnabled(FQCN, level, null, msgSupplier, t);","1832","    public void logIfEnabled(final String fqcn, final Level level, final Marker marker, final Message msg,","1833","            final Throwable t) {","1834","        if (isEnabled(level, marker, msg, t)) {","1835","            logMessageSafely(fqcn, level, marker, msg, t);","1841","            final MessageSupplier msgSupplier, final Throwable t) {","1842","        if (isEnabled(level, marker, msgSupplier, t)) {","1843","            logMessage(fqcn, level, marker, msgSupplier, t);","1849","            final Throwable t) {","1850","        if (isEnabled(level, marker, message, t)) {","1851","            logMessage(fqcn, level, marker, message, t);","1857","            final Throwable t) {","1858","        if (isEnabled(level, marker, message, t)) {","1859","            logMessage(fqcn, level, marker, message, t);","1864","    public void logIfEnabled(final String fqcn, final Level level, final Marker marker, final Supplier<?> msgSupplier,","1865","            final Throwable t) {","1866","        if (isEnabled(level, marker, msgSupplier, t)) {","1867","            logMessage(fqcn, level, marker, msgSupplier, t);","1980","            final Throwable t) {","1981","        if (isEnabled(level, marker, message, t)) {","1982","            logMessage(fqcn, level, marker, message, t);","1987","            final Throwable t) {","1988","        logMessageSafely(fqcn, level, marker, messageFactory.newMessage(message), t);","1992","            final Throwable t) {","1993","        logMessageSafely(fqcn, level, marker, messageFactory.newMessage(message), t);","1997","            final MessageSupplier msgSupplier, final Throwable t) {","1998","        final Message message = LambdaUtil.get(msgSupplier);","1999","        logMessageSafely(fqcn, level, marker, message, (t == null && message != null) ? message.getThrowable() : t);","2002","    protected void logMessage(final String fqcn, final Level level, final Marker marker, final Supplier<?> msgSupplier,","2003","            final Throwable t) {","2004","        final Message message = LambdaUtil.getMessage(msgSupplier, messageFactory);","2005","        logMessageSafely(fqcn, level, marker, message, (t == null && message != null) ? message.getThrowable() : t);","2009","            final Throwable t) {","2010","        logMessageSafely(fqcn, level, marker, messageFactory.newMessage(message), t);","2116","            final Message msg = new StringFormattedMessage(format, params);","2117","            logMessageSafely(FQCN, level, marker, msg, msg.getThrowable());","2124","            final Message msg = new StringFormattedMessage(format, params);","2125","            logMessageSafely(FQCN, level, null, msg, msg.getThrowable());","2132","    private void logMessageSafely(final String fqcn, final Level level, final Marker marker, final Message msg,","2135","            logMessageTrackRecursion(fqcn, level, marker, msg, throwable);","2138","            ReusableMessageFactory.release(msg);","2148","                                          final Message msg,","2152","            tryLogMessage(fqcn, getLocation(fqcn), level, marker, msg, throwable);","2195","                               final Message msg,","2198","            log(level, marker, fqcn, location, msg, throwable);","2201","            handleLogMessageException(e, fqcn, msg);","2214","    private void handleLogMessageException(final Exception exception, final String fqcn, final Message msg) {","2218","        final String format = msg.getFormat();","2225","        sb.append(msg.getClass().getSimpleName());","2232","    public <T extends Throwable> T throwing(final T t) {","2233","        return throwing(FQCN, Level.ERROR, t);","2237","    public <T extends Throwable> T throwing(final Level level, final T t) {","2238","        return throwing(FQCN, level, t);","2247","     * @param t The Throwable.","2250","    protected <T extends Throwable> T throwing(final String fqcn, final Level level, final T t) {","2252","            logMessageSafely(fqcn, level, THROWING_MARKER, throwingMsg(t), t);","2254","        return t;","2257","    protected Message throwingMsg(final Throwable t) {","2262","    public void trace(final Marker marker, final Message msg) {","2263","        logIfEnabled(FQCN, Level.TRACE, marker, msg, msg != null ? msg.getThrowable() : null);","2267","    public void trace(final Marker marker, final Message msg, final Throwable t) {","2268","        logIfEnabled(FQCN, Level.TRACE, marker, msg, t);","2277","    public void trace(final Marker marker, final CharSequence message, final Throwable t) {","2278","        logIfEnabled(FQCN, Level.TRACE, marker, message, t);","2287","    public void trace(final Marker marker, final Object message, final Throwable t) {","2288","        logIfEnabled(FQCN, Level.TRACE, marker, message, t);","2302","    public void trace(final Marker marker, final String message, final Throwable t) {","2303","        logIfEnabled(FQCN, Level.TRACE, marker, message, t);","2307","    public void trace(final Message msg) {","2308","        logIfEnabled(FQCN, Level.TRACE, null, msg, msg != null ? msg.getThrowable() : null);","2312","    public void trace(final Message msg, final Throwable t) {","2313","        logIfEnabled(FQCN, Level.TRACE, null, msg, t);","2322","    public void trace(final CharSequence message, final Throwable t) {","2323","        logIfEnabled(FQCN, Level.TRACE, null, message, t);","2332","    public void trace(final Object message, final Throwable t) {","2333","        logIfEnabled(FQCN, Level.TRACE, null, message, t);","2347","    public void trace(final String message, final Throwable t) {","2348","        logIfEnabled(FQCN, Level.TRACE, null, message, t);","2352","    public void trace(final Supplier<?> msgSupplier) {","2353","        logIfEnabled(FQCN, Level.TRACE, null, msgSupplier, (Throwable) null);","2357","    public void trace(final Supplier<?> msgSupplier, final Throwable t) {","2358","        logIfEnabled(FQCN, Level.TRACE, null, msgSupplier, t);","2362","    public void trace(final Marker marker, final Supplier<?> msgSupplier) {","2363","        logIfEnabled(FQCN, Level.TRACE, marker, msgSupplier, (Throwable) null);","2372","    public void trace(final Marker marker, final Supplier<?> msgSupplier, final Throwable t) {","2373","        logIfEnabled(FQCN, Level.TRACE, marker, msgSupplier, t);","2382","    public void trace(final Marker marker, final MessageSupplier msgSupplier) {","2383","        logIfEnabled(FQCN, Level.TRACE, marker, msgSupplier, (Throwable) null);","2387","    public void trace(final Marker marker, final MessageSupplier msgSupplier, final Throwable t) {","2388","        logIfEnabled(FQCN, Level.TRACE, marker, msgSupplier, t);","2392","    public void trace(final MessageSupplier msgSupplier) {","2393","        logIfEnabled(FQCN, Level.TRACE, null, msgSupplier, (Throwable) null);","2397","    public void trace(final MessageSupplier msgSupplier, final Throwable t) {","2398","        logIfEnabled(FQCN, Level.TRACE, null, msgSupplier, t);","2583","    public void warn(final Marker marker, final Message msg) {","2584","        logIfEnabled(FQCN, Level.WARN, marker, msg, msg != null ? msg.getThrowable() : null);","2588","    public void warn(final Marker marker, final Message msg, final Throwable t) {","2589","        logIfEnabled(FQCN, Level.WARN, marker, msg, t);","2598","    public void warn(final Marker marker, final CharSequence message, final Throwable t) {","2599","        logIfEnabled(FQCN, Level.WARN, marker, message, t);","2608","    public void warn(final Marker marker, final Object message, final Throwable t) {","2609","        logIfEnabled(FQCN, Level.WARN, marker, message, t);","2623","    public void warn(final Marker marker, final String message, final Throwable t) {","2624","        logIfEnabled(FQCN, Level.WARN, marker, message, t);","2628","    public void warn(final Message msg) {","2629","        logIfEnabled(FQCN, Level.WARN, null, msg, msg != null ? msg.getThrowable() : null);","2633","    public void warn(final Message msg, final Throwable t) {","2634","        logIfEnabled(FQCN, Level.WARN, null, msg, t);","2643","    public void warn(final CharSequence message, final Throwable t) {","2644","        logIfEnabled(FQCN, Level.WARN, null, message, t);","2653","    public void warn(final Object message, final Throwable t) {","2654","        logIfEnabled(FQCN, Level.WARN, null, message, t);","2668","    public void warn(final String message, final Throwable t) {","2669","        logIfEnabled(FQCN, Level.WARN, null, message, t);","2673","    public void warn(final Supplier<?> msgSupplier) {","2674","        logIfEnabled(FQCN, Level.WARN, null, msgSupplier, (Throwable) null);","2678","    public void warn(final Supplier<?> msgSupplier, final Throwable t) {","2679","        logIfEnabled(FQCN, Level.WARN, null, msgSupplier, t);","2683","    public void warn(final Marker marker, final Supplier<?> msgSupplier) {","2684","        logIfEnabled(FQCN, Level.WARN, marker, msgSupplier, (Throwable) null);","2693","    public void warn(final Marker marker, final Supplier<?> msgSupplier, final Throwable t) {","2694","        logIfEnabled(FQCN, Level.WARN, marker, msgSupplier, t);","2703","    public void warn(final Marker marker, final MessageSupplier msgSupplier) {","2704","        logIfEnabled(FQCN, Level.WARN, marker, msgSupplier, (Throwable) null);","2708","    public void warn(final Marker marker, final MessageSupplier msgSupplier, final Throwable t) {","2709","        logIfEnabled(FQCN, Level.WARN, marker, msgSupplier, t);","2713","    public void warn(final MessageSupplier msgSupplier) {","2714","        logIfEnabled(FQCN, Level.WARN, null, msgSupplier, (Throwable) null);","2718","    public void warn(final MessageSupplier msgSupplier, final Throwable t) {","2719","        logIfEnabled(FQCN, Level.WARN, null, msgSupplier, t);"]}],"log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/Logger.java":[{"add":["35"," * <pre>","40"," * <\/pre>","54"," * <pre>","60"," * <\/pre>","79","     * Logs a {@link Throwable} that has been caught to a specific logging level.","82","     * @param throwable the Throwable.","84","    void catching(Level level, Throwable throwable);","87","     * Logs a {@link Throwable} that has been caught at the {@link Level#ERROR ERROR} level.","88","     * Normally, one may wish to provide additional information with an exception while logging it;","89","     * in these cases, one would not use this method.","90","     * In other cases where simply logging the fact that an exception was swallowed somewhere","91","     * (e.g., at the top of the stack trace in a {@code main()} method),","92","     * this method is ideal for it.","94","     * @param throwable the Throwable.","96","    void catching(Throwable throwable);","102","     * @param message the message string to be logged","104","    void debug(Marker marker, Message message);","110","     * @param message the message string to be logged","111","     * @param throwable A Throwable or null.","113","    void debug(Marker marker, Message message, Throwable throwable);","121","     * @param messageSupplier A function, which when called, produces the desired log message.","124","    void debug(Marker marker, MessageSupplier messageSupplier);","128","     * specified Marker and including the stack trace of the {@link Throwable} <code>throwable<\/code> passed as parameter. The","132","     * @param messageSupplier A function, which when called, produces the desired log message.","133","     * @param throwable A Throwable or null.","136","    void debug(Marker marker, MessageSupplier messageSupplier, Throwable throwable);","148","     * {@link Throwable} <code>throwable<\/code> passed as parameter.","152","     * @param throwable the {@code Throwable} to log, including its stack trace.","154","    void debug(Marker marker, CharSequence message, Throwable throwable);","166","     * <code>throwable<\/code> passed as parameter.","170","     * @param throwable the {@code Throwable} to log, including its stack trace.","172","    void debug(Marker marker, Object message, Throwable throwable);","205","     * <code>throwable<\/code> passed as parameter.","209","     * @param throwable the {@code Throwable} to log, including its stack trace.","211","    void debug(Marker marker, String message, Throwable throwable);","218","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","222","    void debug(Marker marker, Supplier<?> messageSupplier);","226","     * specified Marker and including the stack trace of the {@link Throwable} <code>throwable<\/code> passed as parameter.","229","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","231","     * @param throwable A Throwable or null.","234","    void debug(Marker marker, Supplier<?> messageSupplier, Throwable throwable);","239","     * @param message the message string to be logged","241","    void debug(Message message);","246","     * @param message the message string to be logged","247","     * @param throwable A Throwable or null.","249","    void debug(Message message, Throwable throwable);","255","     * @param messageSupplier A function, which when called, produces the desired log message.","258","    void debug(MessageSupplier messageSupplier);","262","     * stack trace of the {@link Throwable} <code>throwable<\/code> passed as parameter. The {@code MessageSupplier} may or may","265","     * @param messageSupplier A function, which when called, produces the desired log message.","266","     * @param throwable the {@code Throwable} to log, including its stack trace.","269","    void debug(MessageSupplier messageSupplier, Throwable throwable);","280","     * <code>throwable<\/code> passed as parameter.","283","     * @param throwable the {@code Throwable} to log, including its stack trace.","285","    void debug(CharSequence message, Throwable throwable);","296","     * <code>throwable<\/code> passed as parameter.","299","     * @param throwable the {@code Throwable} to log, including its stack trace.","301","    void debug(Object message, Throwable throwable);","331","     * <code>throwable<\/code> passed as parameter.","334","     * @param throwable the {@code Throwable} to log, including its stack trace.","336","    void debug(String message, Throwable throwable);","341","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","345","    void debug(Supplier<?> messageSupplier);","349","     * stack trace of the {@link Throwable} <code>throwable<\/code> passed as parameter.","351","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","353","     * @param throwable the {@code Throwable} to log, including its stack trace.","356","    void debug(Supplier<?> messageSupplier, Throwable throwable);","658","     * @param message the message string to be logged","660","    void error(Marker marker, Message message);","666","     * @param message the message string to be logged","667","     * @param throwable A Throwable or null.","669","    void error(Marker marker, Message message, Throwable throwable);","677","     * @param messageSupplier A function, which when called, produces the desired log message.","680","    void error(Marker marker, MessageSupplier messageSupplier);","684","     * specified Marker and including the stack trace of the {@link Throwable} <code>throwable<\/code> passed as parameter. The","688","     * @param messageSupplier A function, which when called, produces the desired log message.","689","     * @param throwable A Throwable or null.","692","    void error(Marker marker, MessageSupplier messageSupplier, Throwable throwable);","704","     * <code>throwable<\/code> passed as parameter.","708","     * @param throwable the {@code Throwable} to log, including its stack trace.","710","    void error(Marker marker, CharSequence message, Throwable throwable);","722","     * <code>throwable<\/code> passed as parameter.","726","     * @param throwable the {@code Throwable} to log, including its stack trace.","728","    void error(Marker marker, Object message, Throwable throwable);","761","     * <code>throwable<\/code> passed as parameter.","765","     * @param throwable the {@code Throwable} to log, including its stack trace.","767","    void error(Marker marker, String message, Throwable throwable);","774","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","778","    void error(Marker marker, Supplier<?> messageSupplier);","782","     * specified Marker and including the stack trace of the {@link Throwable} <code>throwable<\/code> passed as parameter.","785","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","787","     * @param throwable A Throwable or null.","790","    void error(Marker marker, Supplier<?> messageSupplier, Throwable throwable);","795","     * @param message the message string to be logged","797","    void error(Message message);","802","     * @param message the message string to be logged","803","     * @param throwable A Throwable or null.","805","    void error(Message message, Throwable throwable);","811","     * @param messageSupplier A function, which when called, produces the desired log message.","814","    void error(MessageSupplier messageSupplier);","818","     * stack trace of the {@link Throwable} <code>throwable<\/code> passed as parameter. The {@code MessageSupplier} may or may","821","     * @param messageSupplier A function, which when called, produces the desired log message.","822","     * @param throwable the {@code Throwable} to log, including its stack trace.","825","    void error(MessageSupplier messageSupplier, Throwable throwable);","836","     * <code>throwable<\/code> passed as parameter.","839","     * @param throwable the {@code Throwable} to log, including its stack trace.","841","    void error(CharSequence message, Throwable throwable);","852","     * <code>throwable<\/code> passed as parameter.","855","     * @param throwable the {@code Throwable} to log, including its stack trace.","857","    void error(Object message, Throwable throwable);","887","     * <code>throwable<\/code> passed as parameter.","890","     * @param throwable the {@code Throwable} to log, including its stack trace.","892","    void error(String message, Throwable throwable);","897","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","901","    void error(Supplier<?> messageSupplier);","905","     * stack trace of the {@link Throwable} <code>throwable<\/code> passed as parameter.","907","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","909","     * @param throwable the {@code Throwable} to log, including its stack trace.","912","    void error(Supplier<?> messageSupplier, Throwable throwable);","1206","     * @param message the message string to be logged","1208","    void fatal(Marker marker, Message message);","1214","     * @param message the message string to be logged","1215","     * @param throwable A Throwable or null.","1217","    void fatal(Marker marker, Message message, Throwable throwable);","1225","     * @param messageSupplier A function, which when called, produces the desired log message.","1228","    void fatal(Marker marker, MessageSupplier messageSupplier);","1232","     * specified Marker and including the stack trace of the {@link Throwable} <code>throwable<\/code> passed as parameter. The","1236","     * @param messageSupplier A function, which when called, produces the desired log message.","1237","     * @param throwable A Throwable or null.","1240","    void fatal(Marker marker, MessageSupplier messageSupplier, Throwable throwable);","1252","     * <code>throwable<\/code> passed as parameter.","1256","     * @param throwable the {@code Throwable} to log, including its stack trace.","1258","    void fatal(Marker marker, CharSequence message, Throwable throwable);","1270","     * <code>throwable<\/code> passed as parameter.","1274","     * @param throwable the {@code Throwable} to log, including its stack trace.","1276","    void fatal(Marker marker, Object message, Throwable throwable);","1309","     * <code>throwable<\/code> passed as parameter.","1313","     * @param throwable the {@code Throwable} to log, including its stack trace.","1315","    void fatal(Marker marker, String message, Throwable throwable);","1322","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","1326","    void fatal(Marker marker, Supplier<?> messageSupplier);","1330","     * specified Marker and including the stack trace of the {@link Throwable} <code>throwable<\/code> passed as parameter.","1333","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","1335","     * @param throwable A Throwable or null.","1338","    void fatal(Marker marker, Supplier<?> messageSupplier, Throwable throwable);","1343","     * @param message the message string to be logged","1345","    void fatal(Message message);","1350","     * @param message the message string to be logged","1351","     * @param throwable A Throwable or null.","1353","    void fatal(Message message, Throwable throwable);","1359","     * @param messageSupplier A function, which when called, produces the desired log message.","1362","    void fatal(MessageSupplier messageSupplier);","1366","     * stack trace of the {@link Throwable} <code>throwable<\/code> passed as parameter. The {@code MessageSupplier} may or may","1369","     * @param messageSupplier A function, which when called, produces the desired log message.","1370","     * @param throwable the {@code Throwable} to log, including its stack trace.","1373","    void fatal(MessageSupplier messageSupplier, Throwable throwable);","1384","     * <code>throwable<\/code> passed as parameter.","1387","     * @param throwable the {@code Throwable} to log, including its stack trace.","1389","    void fatal(CharSequence message, Throwable throwable);","1400","     * <code>throwable<\/code> passed as parameter.","1403","     * @param throwable the {@code Throwable} to log, including its stack trace.","1405","    void fatal(Object message, Throwable throwable);","1435","     * <code>throwable<\/code> passed as parameter.","1438","     * @param throwable the {@code Throwable} to log, including its stack trace.","1440","    void fatal(String message, Throwable throwable);","1445","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","1449","    void fatal(Supplier<?> messageSupplier);","1453","     * stack trace of the {@link Throwable} <code>throwable<\/code> passed as parameter.","1455","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","1457","     * @param throwable the {@code Throwable} to log, including its stack trace.","1460","    void fatal(Supplier<?> messageSupplier, Throwable throwable);","1759","     * @param message the message string to be logged","1761","    void info(Marker marker, Message message);","1767","     * @param message the message string to be logged","1768","     * @param throwable A Throwable or null.","1770","    void info(Marker marker, Message message, Throwable throwable);","1778","     * @param messageSupplier A function, which when called, produces the desired log message.","1781","    void info(Marker marker, MessageSupplier messageSupplier);","1785","     * specified Marker and including the stack trace of the {@link Throwable} <code>throwable<\/code> passed as parameter. The","1789","     * @param messageSupplier A function, which when called, produces the desired log message.","1790","     * @param throwable A Throwable or null.","1793","    void info(Marker marker, MessageSupplier messageSupplier, Throwable throwable);","1805","     * <code>throwable<\/code> passed as parameter.","1809","     * @param throwable the {@code Throwable} to log, including its stack trace.","1811","    void info(Marker marker, CharSequence message, Throwable throwable);","1823","     * <code>throwable<\/code> passed as parameter.","1827","     * @param throwable the {@code Throwable} to log, including its stack trace.","1829","    void info(Marker marker, Object message, Throwable throwable);","1862","     * <code>throwable<\/code> passed as parameter.","1866","     * @param throwable the {@code Throwable} to log, including its stack trace.","1868","    void info(Marker marker, String message, Throwable throwable);","1875","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","1879","    void info(Marker marker, Supplier<?> messageSupplier);","1883","     * specified Marker and including the stack trace of the {@link Throwable} <code>throwable<\/code> passed as parameter.","1886","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","1888","     * @param throwable A Throwable or null.","1891","    void info(Marker marker, Supplier<?> messageSupplier, Throwable throwable);","1896","     * @param message the message string to be logged","1898","    void info(Message message);","1903","     * @param message the message string to be logged","1904","     * @param throwable A Throwable or null.","1906","    void info(Message message, Throwable throwable);","1912","     * @param messageSupplier A function, which when called, produces the desired log message.","1915","    void info(MessageSupplier messageSupplier);","1919","     * stack trace of the {@link Throwable} <code>throwable<\/code> passed as parameter. The {@code MessageSupplier} may or may","1922","     * @param messageSupplier A function, which when called, produces the desired log message.","1923","     * @param throwable the {@code Throwable} to log, including its stack trace.","1926","    void info(MessageSupplier messageSupplier, Throwable throwable);","1937","     * <code>throwable<\/code> passed as parameter.","1940","     * @param throwable the {@code Throwable} to log, including its stack trace.","1942","    void info(CharSequence message, Throwable throwable);","1953","     * <code>throwable<\/code> passed as parameter.","1956","     * @param throwable the {@code Throwable} to log, including its stack trace.","1958","    void info(Object message, Throwable throwable);","1988","     * <code>throwable<\/code> passed as parameter.","1991","     * @param throwable the {@code Throwable} to log, including its stack trace.","1993","    void info(String message, Throwable throwable);","1998","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","2002","    void info(Supplier<?> messageSupplier);","2006","     * stack trace of the {@link Throwable} <code>throwable<\/code> passed as parameter.","2008","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","2010","     * @param throwable the {@code Throwable} to log, including its stack trace.","2013","    void info(Supplier<?> messageSupplier, Throwable throwable);","2402","     * @param message the message string to be logged","2404","    void log(Level level, Marker marker, Message message);","2411","     * @param message the message string to be logged","2412","     * @param throwable A Throwable or null.","2414","    void log(Level level, Marker marker, Message message, Throwable throwable);","2423","     * @param messageSupplier A function, which when called, produces the desired log message.","2426","    void log(Level level, Marker marker, MessageSupplier messageSupplier);","2430","     * including the stack log of the {@link Throwable} <code>throwable<\/code> passed as parameter. The {@code MessageSupplier}","2435","     * @param messageSupplier A function, which when called, produces the desired log message.","2436","     * @param throwable A Throwable or null.","2439","    void log(Level level, Marker marker, MessageSupplier messageSupplier, Throwable throwable);","2451","     * Logs a CharSequence at the given level including the stack trace of the {@link Throwable} <code>throwable<\/code> passed as","2457","     * @param throwable the {@code Throwable} to log, including its stack trace.","2459","    void log(Level level, Marker marker, CharSequence message, Throwable throwable);","2471","     * Logs a message at the given level including the stack trace of the {@link Throwable} <code>throwable<\/code> passed as","2477","     * @param throwable the {@code Throwable} to log, including its stack trace.","2479","    void log(Level level, Marker marker, Object message, Throwable throwable);","2513","     * Logs a message at the given level including the stack trace of the {@link Throwable} <code>throwable<\/code> passed as","2519","     * @param throwable the {@code Throwable} to log, including its stack trace.","2521","    void log(Level level, Marker marker, String message, Throwable throwable);","2528","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","2532","    void log(Level level, Marker marker, Supplier<?> messageSupplier);","2536","     * including the stack log of the {@link Throwable} <code>throwable<\/code> passed as parameter.","2540","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","2542","     * @param throwable A Throwable or null.","2545","    void log(Level level, Marker marker, Supplier<?> messageSupplier, Throwable throwable);","2551","     * @param message the message string to be logged","2553","    void log(Level level, Message message);","2559","     * @param message the message string to be logged","2560","     * @param throwable A Throwable or null.","2562","    void log(Level level, Message message, Throwable throwable);","2569","     * @param messageSupplier A function, which when called, produces the desired log message.","2572","    void log(Level level, MessageSupplier messageSupplier);","2576","     * the {@link Throwable} <code>throwable<\/code> passed as parameter. The {@code MessageSupplier} may or may not use the","2580","     * @param messageSupplier A function, which when called, produces the desired log message.","2581","     * @param throwable the {@code Throwable} to log, including its stack log.","2584","    void log(Level level, MessageSupplier messageSupplier, Throwable throwable);","2595","     * Logs a CharSequence at the given level including the stack trace of the {@link Throwable} <code>throwable<\/code> passed as","2600","     * @param throwable the {@code Throwable} to log, including its stack trace.","2602","    void log(Level level, CharSequence message, Throwable throwable);","2613","     * Logs a message at the given level including the stack trace of the {@link Throwable} <code>throwable<\/code> passed as","2618","     * @param throwable the {@code Throwable} to log, including its stack trace.","2620","    void log(Level level, Object message, Throwable throwable);","2651","     * Logs a message at the given level including the stack trace of the {@link Throwable} <code>throwable<\/code> passed as","2656","     * @param throwable the {@code Throwable} to log, including its stack trace.","2658","    void log(Level level, String message, Throwable throwable);","2664","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","2668","    void log(Level level, Supplier<?> messageSupplier);","2672","     * the {@link Throwable} <code>throwable<\/code> passed as parameter.","2675","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","2677","     * @param throwable the {@code Throwable} to log, including its stack log.","2680","    void log(Level level, Supplier<?> messageSupplier, Throwable throwable);","2988","     * Logs a {@link Throwable} to be thrown. This may be coded as:","2996","     * @param throwable The Throwable.","2999","    <T extends Throwable> T throwing(Level level, T throwable);","3002","     * Logs a {@link Throwable} to be thrown at the {@link Level#ERROR ERROR} level.","3003","     * This may be coded as:","3010","     * @param throwable The Throwable.","3013","    <T extends Throwable> T throwing(T throwable);","3019","     * @param message the message string to be logged","3021","    void trace(Marker marker, Message message);","3027","     * @param message the message string to be logged","3028","     * @param throwable A Throwable or null.","3030","    void trace(Marker marker, Message message, Throwable throwable);","3038","     * @param messageSupplier A function, which when called, produces the desired log message.","3041","    void trace(Marker marker, MessageSupplier messageSupplier);","3045","     * specified Marker and including the stack trace of the {@link Throwable} <code>throwable<\/code> passed as parameter. The","3049","     * @param messageSupplier A function, which when called, produces the desired log message.","3050","     * @param throwable A Throwable or null.","3053","    void trace(Marker marker, MessageSupplier messageSupplier, Throwable throwable);","3065","     * <code>throwable<\/code> passed as parameter.","3069","     * @param throwable the {@code Throwable} to log, including its stack trace.","3072","    void trace(Marker marker, CharSequence message, Throwable throwable);","3084","     * <code>throwable<\/code> passed as parameter.","3088","     * @param throwable the {@code Throwable} to log, including its stack trace.","3091","    void trace(Marker marker, Object message, Throwable throwable);","3124","     * <code>throwable<\/code> passed as parameter.","3128","     * @param throwable the {@code Throwable} to log, including its stack trace.","3131","    void trace(Marker marker, String message, Throwable throwable);","3138","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","3142","    void trace(Marker marker, Supplier<?> messageSupplier);","3146","     * specified Marker and including the stack trace of the {@link Throwable} <code>throwable<\/code> passed as parameter.","3149","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","3151","     * @param throwable A Throwable or null.","3154","    void trace(Marker marker, Supplier<?> messageSupplier, Throwable throwable);","3159","     * @param message the message string to be logged","3161","    void trace(Message message);","3166","     * @param message the message string to be logged","3167","     * @param throwable A Throwable or null.","3169","    void trace(Message message, Throwable throwable);","3175","     * @param messageSupplier A function, which when called, produces the desired log message.","3178","    void trace(MessageSupplier messageSupplier);","3182","     * stack trace of the {@link Throwable} <code>throwable<\/code> passed as parameter. The {@code MessageSupplier} may or may","3185","     * @param messageSupplier A function, which when called, produces the desired log message.","3186","     * @param throwable the {@code Throwable} to log, including its stack trace.","3189","    void trace(MessageSupplier messageSupplier, Throwable throwable);","3200","     * <code>throwable<\/code> passed as parameter.","3203","     * @param throwable the {@code Throwable} to log, including its stack trace.","3206","    void trace(CharSequence message, Throwable throwable);","3217","     * <code>throwable<\/code> passed as parameter.","3220","     * @param throwable the {@code Throwable} to log, including its stack trace.","3223","    void trace(Object message, Throwable throwable);","3253","     * <code>throwable<\/code> passed as parameter.","3256","     * @param throwable the {@code Throwable} to log, including its stack trace.","3259","    void trace(String message, Throwable throwable);","3264","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","3268","    void trace(Supplier<?> messageSupplier);","3272","     * stack trace of the {@link Throwable} <code>throwable<\/code> passed as parameter.","3274","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","3276","     * @param throwable the {@code Throwable} to log, including its stack trace.","3279","    void trace(Supplier<?> messageSupplier, Throwable throwable);","3559","     * <pre>","3564","     * <\/pre>","3566","     * <pre>","3572","     * <\/pre>","3619","     * <pre>","3624","     * <\/pre>","3650","     * <pre>","3652","     * <\/pre>","3665","     * <pre>","3667","     * <\/pre>","3681","     * <pre>","3687","     * <\/pre>","3697","     * <pre>","3703","     * <\/pre>","3717","     * <pre>","3719","     * <\/pre>","3734","     * @param message the message string to be logged","3736","    void warn(Marker marker, Message message);","3742","     * @param message the message string to be logged","3743","     * @param throwable A Throwable or null.","3745","    void warn(Marker marker, Message message, Throwable throwable);","3753","     * @param messageSupplier A function, which when called, produces the desired log message.","3756","    void warn(Marker marker, MessageSupplier messageSupplier);","3760","     * specified Marker and including the stack warn of the {@link Throwable} <code>throwable<\/code> passed as parameter. The","3764","     * @param messageSupplier A function, which when called, produces the desired log message.","3765","     * @param throwable A Throwable or null.","3768","    void warn(Marker marker, MessageSupplier messageSupplier, Throwable throwable);","3780","     * <code>throwable<\/code> passed as parameter.","3784","     * @param throwable the {@code Throwable} to log, including its stack trace.","3786","    void warn(Marker marker, CharSequence message, Throwable throwable);","3798","     * <code>throwable<\/code> passed as parameter.","3802","     * @param throwable the {@code Throwable} to log, including its stack trace.","3804","    void warn(Marker marker, Object message, Throwable throwable);","3837","     * <code>throwable<\/code> passed as parameter.","3841","     * @param throwable the {@code Throwable} to log, including its stack trace.","3843","    void warn(Marker marker, String message, Throwable throwable);","3850","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","3854","    void warn(Marker marker, Supplier<?> messageSupplier);","3858","     * specified Marker and including the stack warn of the {@link Throwable} <code>throwable<\/code> passed as parameter.","3861","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","3863","     * @param throwable A Throwable or null.","3866","    void warn(Marker marker, Supplier<?> messageSupplier, Throwable throwable);","3871","     * @param message the message string to be logged","3873","    void warn(Message message);","3878","     * @param message the message string to be logged","3879","     * @param throwable A Throwable or null.","3881","    void warn(Message message, Throwable throwable);","3887","     * @param messageSupplier A function, which when called, produces the desired log message.","3890","    void warn(MessageSupplier messageSupplier);","3894","     * stack warn of the {@link Throwable} <code>throwable<\/code> passed as parameter. The {@code MessageSupplier} may or may","3897","     * @param messageSupplier A function, which when called, produces the desired log message.","3898","     * @param throwable the {@code Throwable} to log, including its stack warn.","3901","    void warn(MessageSupplier messageSupplier, Throwable throwable);","3912","     * <code>throwable<\/code> passed as parameter.","3915","     * @param throwable the {@code Throwable} to log, including its stack trace.","3917","    void warn(CharSequence message, Throwable throwable);","3928","     * <code>throwable<\/code> passed as parameter.","3931","     * @param throwable the {@code Throwable} to log, including its stack trace.","3933","    void warn(Object message, Throwable throwable);","3963","     * <code>throwable<\/code> passed as parameter.","3966","     * @param throwable the {@code Throwable} to log, including its stack trace.","3968","    void warn(String message, Throwable throwable);","3973","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","3977","    void warn(Supplier<?> messageSupplier);","3981","     * stack warn of the {@link Throwable} <code>throwable<\/code> passed as parameter.","3983","     * @param messageSupplier A function, which when called, produces the desired log message; the format depends on the","3985","     * @param throwable the {@code Throwable} to log, including its stack warn.","3988","    void warn(Supplier<?> messageSupplier, Throwable throwable);","4264","     * @param throwable the {@code Throwable} to log, including its stack trace.","4280","","4289","","4298","","4307","","4316","","4325","","4334","","4343",""],"delete":["35"," * <pre><code>","40"," * <\/code><\/pre>","54"," * <pre><code>","60"," * <\/code><\/pre>","79","     * Logs an exception or error that has been caught to a specific logging level.","82","     * @param t The Throwable.","84","    void catching(Level level, Throwable t);","87","     * Logs an exception or error that has been caught. Normally, one may wish to provide additional information with an","88","     * exception while logging it; in these cases, one would not use this method. In other cases where simply logging","89","     * the fact that an exception was swallowed somewhere (e.g., at the top of the stack trace in a {@code main()}","90","     * method), this method is ideal for it.","92","     * @param t The Throwable.","94","    void catching(Throwable t);","100","     * @param msg the message string to be logged","102","    void debug(Marker marker, Message msg);","108","     * @param msg the message string to be logged","109","     * @param t A Throwable or null.","111","    void debug(Marker marker, Message msg, Throwable t);","119","     * @param msgSupplier A function, which when called, produces the desired log message.","122","    void debug(Marker marker, MessageSupplier msgSupplier);","126","     * specified Marker and including the stack trace of the {@link Throwable} <code>t<\/code> passed as parameter. The","130","     * @param msgSupplier A function, which when called, produces the desired log message.","131","     * @param t A Throwable or null.","134","    void debug(Marker marker, MessageSupplier msgSupplier, Throwable t);","146","     * {@link Throwable} <code>t<\/code> passed as parameter.","150","     * @param t the exception to log, including its stack trace.","152","    void debug(Marker marker, CharSequence message, Throwable t);","164","     * <code>t<\/code> passed as parameter.","168","     * @param t the exception to log, including its stack trace.","170","    void debug(Marker marker, Object message, Throwable t);","203","     * <code>t<\/code> passed as parameter.","207","     * @param t the exception to log, including its stack trace.","209","    void debug(Marker marker, String message, Throwable t);","216","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","220","    void debug(Marker marker, Supplier<?> msgSupplier);","224","     * specified Marker and including the stack trace of the {@link Throwable} <code>t<\/code> passed as parameter.","227","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","229","     * @param t A Throwable or null.","232","    void debug(Marker marker, Supplier<?> msgSupplier, Throwable t);","237","     * @param msg the message string to be logged","239","    void debug(Message msg);","244","     * @param msg the message string to be logged","245","     * @param t A Throwable or null.","247","    void debug(Message msg, Throwable t);","253","     * @param msgSupplier A function, which when called, produces the desired log message.","256","    void debug(MessageSupplier msgSupplier);","260","     * stack trace of the {@link Throwable} <code>t<\/code> passed as parameter. The {@code MessageSupplier} may or may","263","     * @param msgSupplier A function, which when called, produces the desired log message.","264","     * @param t the exception to log, including its stack trace.","267","    void debug(MessageSupplier msgSupplier, Throwable t);","278","     * <code>t<\/code> passed as parameter.","281","     * @param t the exception to log, including its stack trace.","283","    void debug(CharSequence message, Throwable t);","294","     * <code>t<\/code> passed as parameter.","297","     * @param t the exception to log, including its stack trace.","299","    void debug(Object message, Throwable t);","329","     * <code>t<\/code> passed as parameter.","332","     * @param t the exception to log, including its stack trace.","334","    void debug(String message, Throwable t);","339","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","343","    void debug(Supplier<?> msgSupplier);","347","     * stack trace of the {@link Throwable} <code>t<\/code> passed as parameter.","349","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","351","     * @param t the exception to log, including its stack trace.","354","    void debug(Supplier<?> msgSupplier, Throwable t);","656","     * @param msg the message string to be logged","658","    void error(Marker marker, Message msg);","664","     * @param msg the message string to be logged","665","     * @param t A Throwable or null.","667","    void error(Marker marker, Message msg, Throwable t);","675","     * @param msgSupplier A function, which when called, produces the desired log message.","678","    void error(Marker marker, MessageSupplier msgSupplier);","682","     * specified Marker and including the stack trace of the {@link Throwable} <code>t<\/code> passed as parameter. The","686","     * @param msgSupplier A function, which when called, produces the desired log message.","687","     * @param t A Throwable or null.","690","    void error(Marker marker, MessageSupplier msgSupplier, Throwable t);","702","     * <code>t<\/code> passed as parameter.","706","     * @param t the exception to log, including its stack trace.","708","    void error(Marker marker, CharSequence message, Throwable t);","720","     * <code>t<\/code> passed as parameter.","724","     * @param t the exception to log, including its stack trace.","726","    void error(Marker marker, Object message, Throwable t);","759","     * <code>t<\/code> passed as parameter.","763","     * @param t the exception to log, including its stack trace.","765","    void error(Marker marker, String message, Throwable t);","772","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","776","    void error(Marker marker, Supplier<?> msgSupplier);","780","     * specified Marker and including the stack trace of the {@link Throwable} <code>t<\/code> passed as parameter.","783","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","785","     * @param t A Throwable or null.","788","    void error(Marker marker, Supplier<?> msgSupplier, Throwable t);","793","     * @param msg the message string to be logged","795","    void error(Message msg);","800","     * @param msg the message string to be logged","801","     * @param t A Throwable or null.","803","    void error(Message msg, Throwable t);","809","     * @param msgSupplier A function, which when called, produces the desired log message.","812","    void error(MessageSupplier msgSupplier);","816","     * stack trace of the {@link Throwable} <code>t<\/code> passed as parameter. The {@code MessageSupplier} may or may","819","     * @param msgSupplier A function, which when called, produces the desired log message.","820","     * @param t the exception to log, including its stack trace.","823","    void error(MessageSupplier msgSupplier, Throwable t);","834","     * <code>t<\/code> passed as parameter.","837","     * @param t the exception to log, including its stack trace.","839","    void error(CharSequence message, Throwable t);","850","     * <code>t<\/code> passed as parameter.","853","     * @param t the exception to log, including its stack trace.","855","    void error(Object message, Throwable t);","885","     * <code>t<\/code> passed as parameter.","888","     * @param t the exception to log, including its stack trace.","890","    void error(String message, Throwable t);","895","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","899","    void error(Supplier<?> msgSupplier);","903","     * stack trace of the {@link Throwable} <code>t<\/code> passed as parameter.","905","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","907","     * @param t the exception to log, including its stack trace.","910","    void error(Supplier<?> msgSupplier, Throwable t);","1204","     * @param msg the message string to be logged","1206","    void fatal(Marker marker, Message msg);","1212","     * @param msg the message string to be logged","1213","     * @param t A Throwable or null.","1215","    void fatal(Marker marker, Message msg, Throwable t);","1223","     * @param msgSupplier A function, which when called, produces the desired log message.","1226","    void fatal(Marker marker, MessageSupplier msgSupplier);","1230","     * specified Marker and including the stack trace of the {@link Throwable} <code>t<\/code> passed as parameter. The","1234","     * @param msgSupplier A function, which when called, produces the desired log message.","1235","     * @param t A Throwable or null.","1238","    void fatal(Marker marker, MessageSupplier msgSupplier, Throwable t);","1250","     * <code>t<\/code> passed as parameter.","1254","     * @param t the exception to log, including its stack trace.","1256","    void fatal(Marker marker, CharSequence message, Throwable t);","1268","     * <code>t<\/code> passed as parameter.","1272","     * @param t the exception to log, including its stack trace.","1274","    void fatal(Marker marker, Object message, Throwable t);","1307","     * <code>t<\/code> passed as parameter.","1311","     * @param t the exception to log, including its stack trace.","1313","    void fatal(Marker marker, String message, Throwable t);","1320","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","1324","    void fatal(Marker marker, Supplier<?> msgSupplier);","1328","     * specified Marker and including the stack trace of the {@link Throwable} <code>t<\/code> passed as parameter.","1331","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","1333","     * @param t A Throwable or null.","1336","    void fatal(Marker marker, Supplier<?> msgSupplier, Throwable t);","1341","     * @param msg the message string to be logged","1343","    void fatal(Message msg);","1348","     * @param msg the message string to be logged","1349","     * @param t A Throwable or null.","1351","    void fatal(Message msg, Throwable t);","1357","     * @param msgSupplier A function, which when called, produces the desired log message.","1360","    void fatal(MessageSupplier msgSupplier);","1364","     * stack trace of the {@link Throwable} <code>t<\/code> passed as parameter. The {@code MessageSupplier} may or may","1367","     * @param msgSupplier A function, which when called, produces the desired log message.","1368","     * @param t the exception to log, including its stack trace.","1371","    void fatal(MessageSupplier msgSupplier, Throwable t);","1382","     * <code>t<\/code> passed as parameter.","1385","     * @param t the exception to log, including its stack trace.","1387","    void fatal(CharSequence message, Throwable t);","1398","     * <code>t<\/code> passed as parameter.","1401","     * @param t the exception to log, including its stack trace.","1403","    void fatal(Object message, Throwable t);","1433","     * <code>t<\/code> passed as parameter.","1436","     * @param t the exception to log, including its stack trace.","1438","    void fatal(String message, Throwable t);","1443","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","1447","    void fatal(Supplier<?> msgSupplier);","1451","     * stack trace of the {@link Throwable} <code>t<\/code> passed as parameter.","1453","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","1455","     * @param t the exception to log, including its stack trace.","1458","    void fatal(Supplier<?> msgSupplier, Throwable t);","1757","     * @param msg the message string to be logged","1759","    void info(Marker marker, Message msg);","1765","     * @param msg the message string to be logged","1766","     * @param t A Throwable or null.","1768","    void info(Marker marker, Message msg, Throwable t);","1776","     * @param msgSupplier A function, which when called, produces the desired log message.","1779","    void info(Marker marker, MessageSupplier msgSupplier);","1783","     * specified Marker and including the stack trace of the {@link Throwable} <code>t<\/code> passed as parameter. The","1787","     * @param msgSupplier A function, which when called, produces the desired log message.","1788","     * @param t A Throwable or null.","1791","    void info(Marker marker, MessageSupplier msgSupplier, Throwable t);","1803","     * <code>t<\/code> passed as parameter.","1807","     * @param t the exception to log, including its stack trace.","1809","    void info(Marker marker, CharSequence message, Throwable t);","1821","     * <code>t<\/code> passed as parameter.","1825","     * @param t the exception to log, including its stack trace.","1827","    void info(Marker marker, Object message, Throwable t);","1860","     * <code>t<\/code> passed as parameter.","1864","     * @param t the exception to log, including its stack trace.","1866","    void info(Marker marker, String message, Throwable t);","1873","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","1877","    void info(Marker marker, Supplier<?> msgSupplier);","1881","     * specified Marker and including the stack trace of the {@link Throwable} <code>t<\/code> passed as parameter.","1884","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","1886","     * @param t A Throwable or null.","1889","    void info(Marker marker, Supplier<?> msgSupplier, Throwable t);","1894","     * @param msg the message string to be logged","1896","    void info(Message msg);","1901","     * @param msg the message string to be logged","1902","     * @param t A Throwable or null.","1904","    void info(Message msg, Throwable t);","1910","     * @param msgSupplier A function, which when called, produces the desired log message.","1913","    void info(MessageSupplier msgSupplier);","1917","     * stack trace of the {@link Throwable} <code>t<\/code> passed as parameter. The {@code MessageSupplier} may or may","1920","     * @param msgSupplier A function, which when called, produces the desired log message.","1921","     * @param t the exception to log, including its stack trace.","1924","    void info(MessageSupplier msgSupplier, Throwable t);","1935","     * <code>t<\/code> passed as parameter.","1938","     * @param t the exception to log, including its stack trace.","1940","    void info(CharSequence message, Throwable t);","1951","     * <code>t<\/code> passed as parameter.","1954","     * @param t the exception to log, including its stack trace.","1956","    void info(Object message, Throwable t);","1986","     * <code>t<\/code> passed as parameter.","1989","     * @param t the exception to log, including its stack trace.","1991","    void info(String message, Throwable t);","1996","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","2000","    void info(Supplier<?> msgSupplier);","2004","     * stack trace of the {@link Throwable} <code>t<\/code> passed as parameter.","2006","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","2008","     * @param t the exception to log, including its stack trace.","2011","    void info(Supplier<?> msgSupplier, Throwable t);","2400","     * @param msg the message string to be logged","2402","    void log(Level level, Marker marker, Message msg);","2409","     * @param msg the message string to be logged","2410","     * @param t A Throwable or null.","2412","    void log(Level level, Marker marker, Message msg, Throwable t);","2421","     * @param msgSupplier A function, which when called, produces the desired log message.","2424","    void log(Level level, Marker marker, MessageSupplier msgSupplier);","2428","     * including the stack log of the {@link Throwable} <code>t<\/code> passed as parameter. The {@code MessageSupplier}","2433","     * @param msgSupplier A function, which when called, produces the desired log message.","2434","     * @param t A Throwable or null.","2437","    void log(Level level, Marker marker, MessageSupplier msgSupplier, Throwable t);","2449","     * Logs a CharSequence at the given level including the stack trace of the {@link Throwable} <code>t<\/code> passed as","2455","     * @param t the exception to log, including its stack trace.","2457","    void log(Level level, Marker marker, CharSequence message, Throwable t);","2469","     * Logs a message at the given level including the stack trace of the {@link Throwable} <code>t<\/code> passed as","2475","     * @param t the exception to log, including its stack trace.","2477","    void log(Level level, Marker marker, Object message, Throwable t);","2511","     * Logs a message at the given level including the stack trace of the {@link Throwable} <code>t<\/code> passed as","2517","     * @param t the exception to log, including its stack trace.","2519","    void log(Level level, Marker marker, String message, Throwable t);","2526","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","2530","    void log(Level level, Marker marker, Supplier<?> msgSupplier);","2534","     * including the stack log of the {@link Throwable} <code>t<\/code> passed as parameter.","2538","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","2540","     * @param t A Throwable or null.","2543","    void log(Level level, Marker marker, Supplier<?> msgSupplier, Throwable t);","2549","     * @param msg the message string to be logged","2551","    void log(Level level, Message msg);","2557","     * @param msg the message string to be logged","2558","     * @param t A Throwable or null.","2560","    void log(Level level, Message msg, Throwable t);","2567","     * @param msgSupplier A function, which when called, produces the desired log message.","2570","    void log(Level level, MessageSupplier msgSupplier);","2574","     * the {@link Throwable} <code>t<\/code> passed as parameter. The {@code MessageSupplier} may or may not use the","2578","     * @param msgSupplier A function, which when called, produces the desired log message.","2579","     * @param t the exception to log, including its stack log.","2582","    void log(Level level, MessageSupplier msgSupplier, Throwable t);","2593","     * Logs a CharSequence at the given level including the stack trace of the {@link Throwable} <code>t<\/code> passed as","2598","     * @param t the exception to log, including its stack trace.","2600","    void log(Level level, CharSequence message, Throwable t);","2611","     * Logs a message at the given level including the stack trace of the {@link Throwable} <code>t<\/code> passed as","2616","     * @param t the exception to log, including its stack trace.","2618","    void log(Level level, Object message, Throwable t);","2649","     * Logs a message at the given level including the stack trace of the {@link Throwable} <code>t<\/code> passed as","2654","     * @param t the exception to log, including its stack trace.","2656","    void log(Level level, String message, Throwable t);","2662","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","2666","    void log(Level level, Supplier<?> msgSupplier);","2670","     * the {@link Throwable} <code>t<\/code> passed as parameter.","2673","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","2675","     * @param t the exception to log, including its stack log.","2678","    void log(Level level, Supplier<?> msgSupplier, Throwable t);","2986","     * Logs an exception or error to be thrown. This may be coded as:","2994","     * @param t The Throwable.","2997","    <T extends Throwable> T throwing(Level level, T t);","3000","     * Logs an exception or error to be thrown. This may be coded as:","3007","     * @param t The Throwable.","3010","    <T extends Throwable> T throwing(T t);","3016","     * @param msg the message string to be logged","3018","    void trace(Marker marker, Message msg);","3024","     * @param msg the message string to be logged","3025","     * @param t A Throwable or null.","3027","    void trace(Marker marker, Message msg, Throwable t);","3035","     * @param msgSupplier A function, which when called, produces the desired log message.","3038","    void trace(Marker marker, MessageSupplier msgSupplier);","3042","     * specified Marker and including the stack trace of the {@link Throwable} <code>t<\/code> passed as parameter. The","3046","     * @param msgSupplier A function, which when called, produces the desired log message.","3047","     * @param t A Throwable or null.","3050","    void trace(Marker marker, MessageSupplier msgSupplier, Throwable t);","3062","     * <code>t<\/code> passed as parameter.","3066","     * @param t the exception to log, including its stack trace.","3069","    void trace(Marker marker, CharSequence message, Throwable t);","3081","     * <code>t<\/code> passed as parameter.","3085","     * @param t the exception to log, including its stack trace.","3088","    void trace(Marker marker, Object message, Throwable t);","3121","     * <code>t<\/code> passed as parameter.","3125","     * @param t the exception to log, including its stack trace.","3128","    void trace(Marker marker, String message, Throwable t);","3135","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","3139","    void trace(Marker marker, Supplier<?> msgSupplier);","3143","     * specified Marker and including the stack trace of the {@link Throwable} <code>t<\/code> passed as parameter.","3146","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","3148","     * @param t A Throwable or null.","3151","    void trace(Marker marker, Supplier<?> msgSupplier, Throwable t);","3156","     * @param msg the message string to be logged","3158","    void trace(Message msg);","3163","     * @param msg the message string to be logged","3164","     * @param t A Throwable or null.","3166","    void trace(Message msg, Throwable t);","3172","     * @param msgSupplier A function, which when called, produces the desired log message.","3175","    void trace(MessageSupplier msgSupplier);","3179","     * stack trace of the {@link Throwable} <code>t<\/code> passed as parameter. The {@code MessageSupplier} may or may","3182","     * @param msgSupplier A function, which when called, produces the desired log message.","3183","     * @param t the exception to log, including its stack trace.","3186","    void trace(MessageSupplier msgSupplier, Throwable t);","3197","     * <code>t<\/code> passed as parameter.","3200","     * @param t the exception to log, including its stack trace.","3203","    void trace(CharSequence message, Throwable t);","3214","     * <code>t<\/code> passed as parameter.","3217","     * @param t the exception to log, including its stack trace.","3220","    void trace(Object message, Throwable t);","3250","     * <code>t<\/code> passed as parameter.","3253","     * @param t the exception to log, including its stack trace.","3256","    void trace(String message, Throwable t);","3261","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","3265","    void trace(Supplier<?> msgSupplier);","3269","     * stack trace of the {@link Throwable} <code>t<\/code> passed as parameter.","3271","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","3273","     * @param t the exception to log, including its stack trace.","3276","    void trace(Supplier<?> msgSupplier, Throwable t);","3556","     * <pre><code>","3561","     * <\/code><\/pre>","3563","     * <pre><code>","3569","     * <\/code><\/pre>","3583","     * <code>","3588","     * <\/code>","3602","     * <code>","3607","     * <\/code>","3620","     * <pre><code>","3625","     * <\/code><\/pre>","3651","     * <pre><code>","3653","     * <\/code><\/pre>","3666","     * <pre><code>","3668","     * <\/code><\/pre>","3682","     * <pre><code>","3688","     * <\/code><\/pre>","3698","     * <pre><code>","3704","     * <\/code><\/pre>","3718","     * <pre><code>","3720","     * <\/code><\/pre>","3735","     * @param msg the message string to be logged","3737","    void warn(Marker marker, Message msg);","3743","     * @param msg the message string to be logged","3744","     * @param t A Throwable or null.","3746","    void warn(Marker marker, Message msg, Throwable t);","3754","     * @param msgSupplier A function, which when called, produces the desired log message.","3757","    void warn(Marker marker, MessageSupplier msgSupplier);","3761","     * specified Marker and including the stack warn of the {@link Throwable} <code>t<\/code> passed as parameter. The","3765","     * @param msgSupplier A function, which when called, produces the desired log message.","3766","     * @param t A Throwable or null.","3769","    void warn(Marker marker, MessageSupplier msgSupplier, Throwable t);","3781","     * <code>t<\/code> passed as parameter.","3785","     * @param t the exception to log, including its stack trace.","3787","    void warn(Marker marker, CharSequence message, Throwable t);","3799","     * <code>t<\/code> passed as parameter.","3803","     * @param t the exception to log, including its stack trace.","3805","    void warn(Marker marker, Object message, Throwable t);","3838","     * <code>t<\/code> passed as parameter.","3842","     * @param t the exception to log, including its stack trace.","3844","    void warn(Marker marker, String message, Throwable t);","3851","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","3855","    void warn(Marker marker, Supplier<?> msgSupplier);","3859","     * specified Marker and including the stack warn of the {@link Throwable} <code>t<\/code> passed as parameter.","3862","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","3864","     * @param t A Throwable or null.","3867","    void warn(Marker marker, Supplier<?> msgSupplier, Throwable t);","3872","     * @param msg the message string to be logged","3874","    void warn(Message msg);","3879","     * @param msg the message string to be logged","3880","     * @param t A Throwable or null.","3882","    void warn(Message msg, Throwable t);","3888","     * @param msgSupplier A function, which when called, produces the desired log message.","3891","    void warn(MessageSupplier msgSupplier);","3895","     * stack warn of the {@link Throwable} <code>t<\/code> passed as parameter. The {@code MessageSupplier} may or may","3898","     * @param msgSupplier A function, which when called, produces the desired log message.","3899","     * @param t the exception to log, including its stack warn.","3902","    void warn(MessageSupplier msgSupplier, Throwable t);","3913","     * <code>t<\/code> passed as parameter.","3916","     * @param t the exception to log, including its stack trace.","3918","    void warn(CharSequence message, Throwable t);","3929","     * <code>t<\/code> passed as parameter.","3932","     * @param t the exception to log, including its stack trace.","3934","    void warn(Object message, Throwable t);","3964","     * <code>t<\/code> passed as parameter.","3967","     * @param t the exception to log, including its stack trace.","3969","    void warn(String message, Throwable t);","3974","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","3978","    void warn(Supplier<?> msgSupplier);","3982","     * stack warn of the {@link Throwable} <code>t<\/code> passed as parameter.","3984","     * @param msgSupplier A function, which when called, produces the desired log message; the format depends on the","3986","     * @param t the exception to log, including its stack warn.","3989","    void warn(Supplier<?> msgSupplier, Throwable t);","4257","","4266","     * @param throwable the exception to log, including its stack trace."]}]}},"86d8944fa239255195bf0caed7af65b3c7e4cfaf":{"changes":{"log4j-slf4j-impl\/src\/main\/java\/org\/apache\/logging\/slf4j\/Log4jMarker.java":"MODIFY","log4j-slf4j-impl\/src\/test\/java\/org\/apache\/logging\/slf4j\/MarkerTest.java":"MODIFY","src\/changes\/changes.xml":"MODIFY"},"diff":{"log4j-slf4j-impl\/src\/main\/java\/org\/apache\/logging\/slf4j\/Log4jMarker.java":[{"add":["57","\tpublic boolean remove(final Marker marker) {\r","58","\t\treturn marker != null ? this.marker.remove(MarkerManager.getMarker(marker.getName())) : false;\r","59","\t}\r"],"delete":["57","    public boolean remove(final Marker marker) {\r","58","        return this.marker.remove(MarkerManager.getMarker(marker.getName()));\r","59","    }\r"]}],"log4j-slf4j-impl\/src\/test\/java\/org\/apache\/logging\/slf4j\/MarkerTest.java":[{"add":["94","    @Test","95","\tpublic void testRemoveNullMarker() {","96","\t\tfinal org.slf4j.Marker slf4jMarker = org.slf4j.MarkerFactory.getMarker(CHILD_MAKER_NAME + \"-CM\");","97","\t\tfinal org.slf4j.Marker slf4jParent = org.slf4j.MarkerFactory.getMarker(PARENT_MARKER_NAME + \"-CM\");","98","\t\tslf4jMarker.add(slf4jParent);","99","\t\tfinal Marker log4jParent = MarkerManager.getMarker(PARENT_MARKER_NAME + \"-CM\");","100","\t\tfinal Marker log4jMarker = MarkerManager.getMarker(CHILD_MAKER_NAME + \"-CM\");","101","\t\tLog4jMarker log4jSlf4jParent = new Log4jMarker(log4jParent);","102","\t\tLog4jMarker log4jSlf4jMarker = new Log4jMarker(log4jMarker);","103","\t\tfinal org.slf4j.Marker nullMarker = null;","104","\t\tAssert.assertFalse(log4jSlf4jParent.remove(nullMarker));","105","\t\tAssert.assertFalse(log4jSlf4jMarker.remove(nullMarker));","106","\t}","107","","108",""],"delete":[]}],"src\/changes\/changes.xml":[{"add":["95","      <action issue=\"LOG4J2-1061\" dev=\"ggregory\" type=\"fix\">\r","96","        Log4jMarker#remove(Marker) does not respect org.slf4j.Marker contract.\r","97","      <\/action>            \r"],"delete":[]}]}},"0c553cfe0b2e58d1e6e895683bde534ed21fd182":{"changes":{"src\/changes\/changes.xml":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["24","      <action issue=\"LOG4J2-683\" dev=\"mattsicker\" type=\"fix\" due-to=\"Jurriaan Mous\">","25","        Fix annotation processor warnings on JDK 1.7+.","26","      <\/action>"],"delete":[]}]}},"089b1de75baa05351e867a2f4cd0a38ff3e31ae9":{"changes":{"log4j-api\/src\/test\/java\/org\/apache\/logging\/log4j\/ThreadContextInheritanceTest.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/layout\/SyslogLayoutTest.java":"MODIFY","log4j-to-slf4j\/src\/test\/java\/org\/apache\/logging\/slf4j\/LoggerTest.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/layout\/PatternLayoutTest.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/StrictXMLConfigTest.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/layout\/XMLConstants.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jackson\/Log4jStackTraceElementDeserializer.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/layout\/RFC5424Layout.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jackson\/Log4jXmlModule.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/layout\/SyslogLayout.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/filter\/ThreadContextMapFilterTest.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/layout\/JSONLayout.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/filter\/DynamicThresholdFilterTest.java":"MODIFY","log4j-slf4j-impl\/src\/main\/java\/org\/apache\/logging\/slf4j\/Log4jMDCAdapter.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jackson\/MapEntry.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jackson\/MutableThreadContextStackDeserializer.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/config\/plugins\/osgi\/Activator.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/XMLEvents.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/net\/jms\/JMSTopicFailoverTest.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/pattern\/RegexReplacementTest.java":"MODIFY","log4j-api\/src\/test\/java\/org\/apache\/logging\/log4j\/ThreadContextTest.java":"MODIFY","log4j-samples\/flume-common\/src\/main\/java\/org\/apache\/logging\/log4j\/samples\/dto\/RequestContext.java":"MODIFY","log4j-api\/src\/test\/java\/org\/apache\/logging\/log4j\/LoggerTest.java":"MODIFY","log4j-samples\/flume-common\/src\/main\/java\/org\/apache\/logging\/log4j\/samples\/app\/LoggingController.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/net\/jms\/JMSQueueFailoverTest.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jackson\/MessageSerializer.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/layout\/JSONConstants.java":"MODIFY","log4j-api\/src\/test\/java\/org\/apache\/logging\/log4j\/EventLoggerTest.java":"MODIFY","log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/ThreadContext.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/layout\/XMLLayout.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/LoggerTest.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/layout\/RFC5424LayoutTest.java":"MODIFY","log4j-1.2-api\/src\/main\/java\/org\/apache\/log4j\/MDC.java":"MODIFY","log4j-samples\/flume-common\/src\/main\/java\/org\/apache\/logging\/log4j\/samples\/app\/LoggingApp.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/lookup\/InterpolatorTest.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jackson\/SimpleMessageDeserializer.java":"MODIFY"},"diff":{"log4j-api\/src\/test\/java\/org\/apache\/logging\/log4j\/ThreadContextInheritanceTest.java":[{"add":["59","            ThreadContext.clearMap();","82","        ThreadContext.clearMap();","110","        ThreadContext.clearMap();","116","        ThreadContext.clearMap();","139","        ThreadContext.clearMap();","145","        ThreadContext.clearMap();","153","        ThreadContext.clearMap();","166","        ThreadContext.clearMap();","174","        ThreadContext.clearMap();","186","        ThreadContext.clearMap();","211","            ThreadContext.clearMap();"],"delete":["59","            ThreadContext.clear();","82","        ThreadContext.clear();","110","        ThreadContext.clear();","116","        ThreadContext.clear();","139","        ThreadContext.clear();","145","        ThreadContext.clear();","153","        ThreadContext.clear();","166","        ThreadContext.clear();","174","        ThreadContext.clear();","186","        ThreadContext.clear();","211","            ThreadContext.clear();"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/layout\/SyslogLayoutTest.java":[{"add":["108","        ThreadContext.clearMap();"],"delete":["108","        ThreadContext.clear();"]}],"log4j-to-slf4j\/src\/test\/java\/org\/apache\/logging\/slf4j\/LoggerTest.java":[{"add":["169","        ThreadContext.clearMap();"],"delete":["169","        ThreadContext.clear();"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/layout\/PatternLayoutTest.java":[{"add":["64","        ThreadContext.clearMap();"],"delete":["64","        ThreadContext.clear();"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/StrictXMLConfigTest.java":[{"add":["138","        ThreadContext.clearMap();","155","        ThreadContext.clearMap();"],"delete":["138","        ThreadContext.clear();","155","        ThreadContext.clear();"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/layout\/XMLConstants.java":[{"add":["21","public final class XMLConstants {"],"delete":["21","public class XMLConstants {"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jackson\/Log4jStackTraceElementDeserializer.java":[{"add":["33","public final class Log4jStackTraceElementDeserializer extends StdScalarDeserializer<StackTraceElement> {"],"delete":["33","public class Log4jStackTraceElementDeserializer extends StdScalarDeserializer<StackTraceElement> {"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/layout\/RFC5424Layout.java":[{"add":["64","public final class RFC5424Layout extends AbstractStringLayout {"],"delete":["64","public class RFC5424Layout extends AbstractStringLayout {"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jackson\/Log4jXmlModule.java":[{"add":["28","final class Log4jXmlModule extends JacksonXmlModule {"],"delete":["28","class Log4jXmlModule extends JacksonXmlModule {"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/layout\/SyslogLayout.java":[{"add":["42","public final class SyslogLayout extends AbstractStringLayout {"],"delete":["42","public class SyslogLayout extends AbstractStringLayout {"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/filter\/ThreadContextMapFilterTest.java":[{"add":["48","        ThreadContext.clearMap();","64","        ThreadContext.clearMap();"],"delete":["48","        ThreadContext.clear();","64","        ThreadContext.clear();"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/layout\/JSONLayout.java":[{"add":["792","public final class JSONLayout extends AbstractJacksonLayout {"],"delete":["792","public class JSONLayout extends AbstractJacksonLayout {"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/filter\/DynamicThresholdFilterTest.java":[{"add":["62","        ThreadContext.clearMap();","69","        ThreadContext.clearMap();"],"delete":["62","        ThreadContext.clear();","69","        ThreadContext.clear();"]}],"log4j-slf4j-impl\/src\/main\/java\/org\/apache\/logging\/slf4j\/Log4jMDCAdapter.java":[{"add":["45","        ThreadContext.clearMap();","56","        ThreadContext.clearMap();"],"delete":["45","        ThreadContext.clear();","56","        ThreadContext.clear();"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jackson\/MapEntry.java":[{"add":["35","final class MapEntry {"],"delete":["35","class MapEntry {"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jackson\/MutableThreadContextStackDeserializer.java":[{"add":["34","final class MutableThreadContextStackDeserializer extends StdDeserializer<MutableThreadContextStack> {"],"delete":["34","class MutableThreadContextStackDeserializer extends StdDeserializer<MutableThreadContextStack> {"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/config\/plugins\/osgi\/Activator.java":[{"add":["35","public final class Activator implements org.osgi.framework.BundleActivator {"],"delete":["35","public class Activator implements org.osgi.framework.BundleActivator {"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/XMLEvents.java":[{"add":["51","        ThreadContext.clearMap();"],"delete":["51","        ThreadContext.clear();"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/net\/jms\/JMSTopicFailoverTest.java":[{"add":["88","        ThreadContext.clearMap();"],"delete":["88","        ThreadContext.clear();"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/pattern\/RegexReplacementTest.java":[{"add":["70","        ThreadContext.clearMap();"],"delete":["70","        ThreadContext.clear();"]}],"log4j-api\/src\/test\/java\/org\/apache\/logging\/log4j\/ThreadContextTest.java":[{"add":["42","        ThreadContext.clearMap();","62","        ThreadContext.clearMap();","90","        ThreadContext.clearMap();","96","        ThreadContext.clearMap();","119","        ThreadContext.clearMap();","125","        ThreadContext.clearMap();","133","        ThreadContext.clearMap();","146","        ThreadContext.clearMap();","154","        ThreadContext.clearMap();","166","        ThreadContext.clearMap();","191","            ThreadContext.clearMap();"],"delete":["42","        ThreadContext.clear();","62","        ThreadContext.clear();","90","        ThreadContext.clear();","96","        ThreadContext.clear();","119","        ThreadContext.clear();","125","        ThreadContext.clear();","133","        ThreadContext.clear();","146","        ThreadContext.clear();","154","        ThreadContext.clear();","166","        ThreadContext.clear();","191","            ThreadContext.clear();"]}],"log4j-samples\/flume-common\/src\/main\/java\/org\/apache\/logging\/log4j\/samples\/dto\/RequestContext.java":[{"add":["58","        ThreadContext.clearMap();"],"delete":["58","        ThreadContext.clear();"]}],"log4j-api\/src\/test\/java\/org\/apache\/logging\/log4j\/LoggerTest.java":[{"add":["324","        ThreadContext.clearMap();","357","        ThreadContext.clearMap();"],"delete":["324","        ThreadContext.clear();","357","        ThreadContext.clear();"]}],"log4j-samples\/flume-common\/src\/main\/java\/org\/apache\/logging\/log4j\/samples\/app\/LoggingController.java":[{"add":["87","                    ThreadContext.clearMap();"],"delete":["87","                    ThreadContext.clear();"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/net\/jms\/JMSQueueFailoverTest.java":[{"add":["89","        ThreadContext.clearMap();"],"delete":["89","        ThreadContext.clear();"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jackson\/MessageSerializer.java":[{"add":["32","final class MessageSerializer extends StdScalarSerializer<Message> {"],"delete":["32","class MessageSerializer extends StdScalarSerializer<Message> {"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/layout\/JSONConstants.java":[{"add":["21","public final class JSONConstants {"],"delete":["21","public class JSONConstants {"]}],"log4j-api\/src\/test\/java\/org\/apache\/logging\/log4j\/EventLoggerTest.java":[{"add":["51","        ThreadContext.clearMap();"],"delete":["51","        ThreadContext.clear();"]}],"log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/ThreadContext.java":[{"add":[],"delete":["163","     * Clears the context.","164","     * @deprecated Use {@link #clearMap()}","165","     *\/","166","    public static void clear() {","167","        contextMap.clear();","168","    }","169","","170","    \/**"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/layout\/XMLLayout.java":[{"add":["186","public final class XMLLayout extends AbstractJacksonLayout {"],"delete":["186","public class XMLLayout extends AbstractJacksonLayout {"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/LoggerTest.java":[{"add":["206","        ThreadContext.clearMap();","223","        ThreadContext.clearMap();"],"delete":["206","        ThreadContext.clear();","223","        ThreadContext.clear();"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/layout\/RFC5424LayoutTest.java":[{"add":["149","            ThreadContext.clearMap();","211","            ThreadContext.clearMap();","251","            ThreadContext.clearMap();","293","            ThreadContext.clearMap();","342","            ThreadContext.clearMap();","390","            ThreadContext.clearMap();","424","            ThreadContext.clearMap();"],"delete":["149","            ThreadContext.clear();","211","            ThreadContext.clear();","251","            ThreadContext.clear();","293","            ThreadContext.clear();","342","            ThreadContext.clear();","390","            ThreadContext.clear();","424","            ThreadContext.clear();"]}],"log4j-1.2-api\/src\/main\/java\/org\/apache\/log4j\/MDC.java":[{"add":["70","        ThreadContext.clearMap();"],"delete":["70","        ThreadContext.clear();"]}],"log4j-samples\/flume-common\/src\/main\/java\/org\/apache\/logging\/log4j\/samples\/app\/LoggingApp.java":[{"add":["54","        ThreadContext.clearMap();"],"delete":["54","        ThreadContext.clear();"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/lookup\/InterpolatorTest.java":[{"add":["78","        ThreadContext.clearMap();"],"delete":["78","        ThreadContext.clear();"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jackson\/SimpleMessageDeserializer.java":[{"add":["32","public final class SimpleMessageDeserializer extends StdScalarDeserializer<SimpleMessage> {"],"delete":["32","public class SimpleMessageDeserializer extends StdScalarDeserializer<SimpleMessage> {"]}]}},"aa73eb528e35217ce29d520449666e3d655323b6":{"changes":{"log4j-slf4j-impl\/src\/test\/java\/org\/apache\/logging\/slf4j\/OverflowTest.java":"ADD","log4j-slf4j18-impl\/pom.xml":"MODIFY","log4j-slf4j18-impl\/src\/main\/java\/org\/apache\/logging\/slf4j\/Log4jLoggerFactory.java":"MODIFY","log4j-slf4j-impl\/src\/main\/java\/org\/apache\/logging\/slf4j\/Log4jLoggerFactory.java":"MODIFY","src\/changes\/changes.xml":"MODIFY","log4j-slf4j-impl\/pom.xml":"MODIFY","log4j-slf4j18-impl\/src\/test\/java\/org\/apache\/logging\/slf4j\/OverflowTest.java":"ADD"},"diff":{"log4j-slf4j-impl\/src\/test\/java\/org\/apache\/logging\/slf4j\/OverflowTest.java":[{"add":[],"delete":[]}],"log4j-slf4j18-impl\/pom.xml":[{"add":["80","      <groupId>org.apache.logging.log4j<\/groupId>","81","      <artifactId>log4j-to-slf4j<\/artifactId>","82","      <scope>test<\/scope>","83","      <version>${project.version}<\/version>","84","    <\/dependency>","85","    <dependency>","109","        <groupId>org.apache.maven.plugins<\/groupId>","110","        <artifactId>maven-surefire-plugin<\/artifactId>","111","        <executions>","112","          <execution>","113","            <id>loop-test<\/id>","114","            <phase>test<\/phase>","115","            <goals>","116","              <goal>test<\/goal>","117","            <\/goals>","118","            <configuration>","119","              <includes>","120","                <include>**\/OverflowTest.java<\/include>","121","              <\/includes>","122","            <\/configuration>","123","          <\/execution>","124","          <execution>","125","            <id>default-test<\/id>","126","            <phase>test<\/phase>","127","            <goals>","128","              <goal>test<\/goal>","129","            <\/goals>","130","            <configuration>","131","              <includes>","132","                <include>**\/*Test.java<\/include>","133","              <\/includes>","134","              <excludes>","135","                <exclude>**\/OverflowTest.java<\/exclude>","136","              <\/excludes>","137","              <classpathDependencyExcludes>","138","                <classpathDependencyExcludes>org.apache.logging.log4j:log4j-to-slf4j<\/classpathDependencyExcludes>","139","              <\/classpathDependencyExcludes>","140","            <\/configuration>","141","          <\/execution>","142","        <\/executions>","143","      <\/plugin>","144","      <plugin>"],"delete":[]}],"log4j-slf4j18-impl\/src\/main\/java\/org\/apache\/logging\/slf4j\/Log4jLoggerFactory.java":[{"add":["19","import org.apache.logging.log4j.LoggingException;","34","    private static final String TO_SLF4J_CONTEXT = \"org.apache.logging.slf4j.SLF4JLoggerContext\";","44","        return new Log4jLogger(markerFactory, validateContext(context).getLogger(key), name);","57","    private LoggerContext validateContext(final LoggerContext context) {","58","        if (TO_SLF4J_CONTEXT.equals(context.getClass().getName())) {","59","            throw new LoggingException(\"log4j-slf4j-impl cannot be present with log4j-to-slf4j\");","60","        }","61","        return context;","62","    }"],"delete":["42","        return new Log4jLogger(markerFactory, context.getLogger(key), name);","51","","56",""]}],"log4j-slf4j-impl\/src\/main\/java\/org\/apache\/logging\/slf4j\/Log4jLoggerFactory.java":[{"add":["19","import org.apache.logging.log4j.LoggingException;","33","    private static final String TO_SLF4J_CONTEXT = \"org.apache.logging.slf4j.SLF4JLoggerContext\";","38","        return new Log4jLogger(validateContext(context).getLogger(key), name);","46","    private LoggerContext validateContext(final LoggerContext context) {","47","        if (TO_SLF4J_CONTEXT.equals(context.getClass().getName())) {","48","            throw new LoggingException(\"log4j-slf4j-impl cannot be present with log4j-to-slf4j\");","49","        }","50","        return context;","51","    }"],"delete":["36","        return new Log4jLogger(context.getLogger(key), name);","44",""]}],"src\/changes\/changes.xml":[{"add":["32","      <action issue=\"LOG4J2-2597\" dev=\"rgoers\" type=\"fix\">\r","33","        Throw better exception message when both log4j-slf4j-impl and log4j-to-slf4j are present.\r","34","      <\/action>\r"],"delete":[]}],"log4j-slf4j-impl\/pom.xml":[{"add":["79","      <groupId>org.apache.logging.log4j<\/groupId>","80","      <artifactId>log4j-to-slf4j<\/artifactId>","81","      <scope>test<\/scope>","82","      <version>${project.version}<\/version>","83","    <\/dependency>","84","    <dependency>","158","        <groupId>org.apache.maven.plugins<\/groupId>","159","        <artifactId>maven-surefire-plugin<\/artifactId>","160","        <executions>","161","          <execution>","162","            <id>loop-test<\/id>","163","            <phase>test<\/phase>","164","            <goals>","165","              <goal>test<\/goal>","166","            <\/goals>","167","            <configuration>","168","              <includes>","169","                <include>**\/OverflowTest.java<\/include>","170","              <\/includes>","171","            <\/configuration>","172","          <\/execution>","173","          <execution>","174","            <id>default-test<\/id>","175","            <phase>test<\/phase>","176","            <goals>","177","              <goal>test<\/goal>","178","            <\/goals>","179","            <configuration>","180","              <includes>","181","                <include>**\/*Test.java<\/include>","182","              <\/includes>","183","              <excludes>","184","                <exclude>**\/OverflowTest.java<\/exclude>","185","              <\/excludes>","186","              <classpathDependencyExcludes>","187","                <classpathDependencyExcludes>org.apache.logging.log4j:log4j-to-slf4j<\/classpathDependencyExcludes>","188","              <\/classpathDependencyExcludes>","189","            <\/configuration>","190","          <\/execution>","191","        <\/executions>","192","      <\/plugin>","193","      <plugin>"],"delete":[]}],"log4j-slf4j18-impl\/src\/test\/java\/org\/apache\/logging\/slf4j\/OverflowTest.java":[{"add":[],"delete":[]}]}},"3d3f3047967672a24f4692013d81a0ef97d171a2":{"changes":{"CONTRIBUTING.md":"MODIFY"},"diff":{"CONTRIBUTING.md":[{"add":["29","+ Make sure you have a [GitHub account](https:\/\/github.com\/join).","64","+ [Apache Log4j 2 JIRA project page](https:\/\/issues.apache.org\/jira\/projects\/LOG4J2\/issues)","66","+ [General GitHub documentation](https:\/\/docs.github.com\/)","67","+ [GitHub pull request documentation](https:\/\/docs.github.com\/en\/pull-requests)"],"delete":["29","+ Make sure you have a [GitHub account](https:\/\/github.com\/signup\/free).","64","+ [Apache Log4j 2 JIRA project page](https:\/\/issues.apache.org\/jira\/browse\/LOG4J2)","66","+ [General GitHub documentation](https:\/\/help.github.com\/)","67","+ [GitHub pull request documentation](https:\/\/help.github.com\/send-pull-requests\/)"]}]}},"61732f34b9925f4d9f950d4429d3ef28e65bc4f2":{"changes":{"src\/changes\/changes.xml":"MODIFY","src\/site\/xdoc\/manual\/webapp.xml":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["33","      <action issue=\"LOG4J2-2390\" dev=\"rgoers\" type=\"fix\" due-to=\"anton-balaniuc\">","34","        Fix broken links in log4j web documentation.","35","      <\/action>"],"delete":[]}],"src\/site\/xdoc\/manual\/webapp.xml":[{"add":["98","          (<a class=\"javadoc\" href=\"..\/log4j-web\/apidocs\/org\/apache\/logging\/log4j\/web\/Log4jServletContainerInitializer.html\"","102","          <a class=\"javadoc\" href=\"..\/log4j-web\/apidocs\/org\/apache\/logging\/log4j\/web\/Log4jServletFilter.html\"","145","          <a class=\"javadoc\" href=\"..\/log4j-web\/apidocs\/org\/apache\/logging\/log4j\/web\/Log4jServletContextListener.html\"","147","          <a class=\"javadoc\" href=\"..\/log4j-web\/apidocs\/org\/apache\/logging\/log4j\/web\/Log4jServletFilter.html\"","373","          <a class=\"javadoc\" href=\"..\/log4j-web\/apidocs\/org\/apache\/logging\/log4j\/web\/Log4jWebLifeCycle.html\">Log4jWebLifeCycle<\/a>"],"delete":["98","          (<a class=\"javadoc\" href=\"..\/log4j-core\/apidocs\/org\/apache\/logging\/log4j\/web\/Log4jServletContainerInitializer.html\"","102","          <a class=\"javadoc\" href=\"..\/log4j-core\/apidocs\/org\/apache\/logging\/log4j\/web\/Log4jServletFilter.html\"","145","          <a class=\"javadoc\" href=\"..\/log4j-core\/apidocs\/org\/apache\/logging\/log4j\/web\/Log4jServletContextListener.html\"","147","          <a class=\"javadoc\" href=\"..\/log4j-core\/apidocs\/org\/apache\/logging\/log4j\/web\/Log4jServletFilter.html\"","373","          <a class=\"javadoc\" href=\"..\/log4j-core\/apidocs\/org\/apache\/logging\/log4j\/web\/Log4jWebLifeCycle.html\">Log4jWebLifeCycle<\/a>"]}]}},"d865e43df0bc9558f01b494b970a82fb60178a95":{"changes":{"log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/NDCTest.java":"ADD","src\/changes\/changes.xml":"MODIFY","log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/spi\/DefaultThreadContextStack.java":"MODIFY"},"diff":{"log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/NDCTest.java":[{"add":[],"delete":[]}],"src\/changes\/changes.xml":[{"add":["32","      <action issue=\"LOG4J2-1037\" dev=\"ggregory\" type=\"fix\" due-to=\"Marc Dergacz\">","33","        Backward compatibility issue in log4j-1.2-api NDC pop() and peek().","34","      <\/action>"],"delete":[]}],"log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/spi\/DefaultThreadContextStack.java":[{"add":["171","            return Strings.EMPTY;","183","            \/\/ Like version 1.2","184","            return Strings.EMPTY;"],"delete":["22","import java.util.NoSuchElementException;","172","            return null;","184","            throw new NoSuchElementException(\"The ThreadContext stack is empty\");"]}]}},"55a10692bd02cf51f0d172892bb61f2820925bdd":{"changes":{"src\/changes\/changes.xml":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["32","      <!-- FIXES -->","33","      <action issue=\"LOG4J2-3204\" dev=\"vy\" type=\"fix\" due-to=\"Francis-FY\">","34","        Correct SpringLookup package name in Interpolator.","35","      <\/action>","75","      <!-- FIXES -->"],"delete":[]}]}},"c5a761eefd5b8da6e978328ff726019907d4b7ed":{"changes":{"src\/changes\/changes.xml":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["46","      <action issue=\"LOG4J2-464\" dev=\"rgoers\" type=\"fix\">","47","          Support arrays as sub-elements of a JSON configuration.","48","      <\/action>"],"delete":[]}]}},"31b390e39eeb0ab653491e29c6b9106304f350f6":{"changes":{"log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/util\/Activator.java":"MODIFY","src\/changes\/changes.xml":"MODIFY"},"diff":{"log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/util\/Activator.java":[{"add":["69","            final BundleContext bundleContext = bundle.getBundleContext();","70","            if (bundleContext == null) {","71","                LOGGER.debug(\"Bundle {} has no context (state={}), skipping loading provider\", bundle.getSymbolicName(), toStateString(bundle.getState()));","72","            } else {","73","                loadProvider(bundleContext, bundle.adapt(BundleWiring.class));","74","            }","82","    private String toStateString(final int state) {","83","        switch (state) {","84","        case Bundle.UNINSTALLED:","85","            return \"UNINSTALLED\";","86","        case Bundle.INSTALLED:","87","            return \"INSTALLED\";","88","        case Bundle.RESOLVED:","89","            return \"RESOLVED\";","90","        case Bundle.STARTING:","91","            return \"STARTING\";","92","        case Bundle.STOPPING:","93","            return \"STOPPING\";","94","        case Bundle.ACTIVE:","95","            return \"ACTIVE\";","96","        default:","97","            return Integer.toString(state);","98","        }","99","    }","100","","101","    private void loadProvider(final BundleContext bundleContext, final BundleWiring bundleWiring) {","104","            final Collection<ServiceReference<Provider>> serviceReferences = bundleContext.getServiceReferences(Provider.class, filter);","107","                final Provider provider = bundleContext.getService(serviceReference);","125","    public void start(final BundleContext bundleContext) throws Exception {","128","        final BundleWiring self = bundleContext.getBundle().adapt(BundleWiring.class);","131","            loadProvider(bundleContext, wire.getProviderWiring());","133","        bundleContext.addBundleListener(this);","134","        final Bundle[] bundles = bundleContext.getBundles();","149","    public void stop(final BundleContext bundleContext) throws Exception {","150","        bundleContext.removeBundleListener(this);"],"delete":["69","            loadProvider(bundle.getBundleContext(), bundle.adapt(BundleWiring.class));","77","    private void loadProvider(final BundleContext context, final BundleWiring bundleWiring) {","80","            final Collection<ServiceReference<Provider>> serviceReferences = context.getServiceReferences(Provider.class, filter);","83","                final Provider provider = context.getService(serviceReference);","101","    public void start(final BundleContext context) throws Exception {","104","        final BundleWiring self = context.getBundle().adapt(BundleWiring.class);","107","            loadProvider(context, wire.getProviderWiring());","109","        context.addBundleListener(this);","110","        final Bundle[] bundles = context.getBundles();","125","    public void stop(final BundleContext context) throws Exception {","126","        context.removeBundleListener(this);"]}],"src\/changes\/changes.xml":[{"add":["142","      <action issue=\"LOG4J2-2182\" dev=\"ggregory\" type=\"update\" due-to=\"liwenxian2017, Gary Gregory\">","143","        NullPointerException at org.apache.logging.log4j.util.Activator.loadProvider(Activator.java:81) in log4j 2.10.0.","144","      <\/action>"],"delete":[]}]}},"e0cda1fbdd0f5d455ff636354ceebe0df5537bfc":{"changes":{"src\/changes\/changes.xml":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["50","      <action issue=\"LOG4J2-1038\" dev=\"ggregory\" type=\"fix\" due-to=\"Gili\">","51","        Incorrect documentation for layout default charset.","52","      <\/action>"],"delete":[]}]}},"fa83ca58377886cd3c9bed87df9c42c9fccb0fc3":{"changes":{"src\/changes\/changes.xml":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/db\/nosql\/mongo\/MongoDBConnection.java":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["23","      <action issue=\"LOG4J2-475\" dev=\"nickwilliams\" type=\"fix\" due-to=\"Matt Sicker\">","24","        Changed the MongoDBConnection to add a MongoDB encoding hook instead of a decoding hook.","25","      <\/action>"],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/db\/nosql\/mongo\/MongoDBConnection.java":[{"add":["23","import org.apache.logging.log4j.core.helpers.Strings;","44","        BSON.addEncodingHook(Level.class, new Transformer() {","79","            if (Strings.isNotEmpty(result.getError())) {"],"delete":["43","        BSON.addDecodingHook(Level.class, new Transformer() {","78","            if (result.getError() != null && result.getError().length() > 0) {"]}]}},"73dc8b2a3e679b10935e3939c583e305dee0b43b":{"changes":{"src\/changes\/changes.xml":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/action\/FileRenameAction.java":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["24","      <action issue=\"LOG4J2-679\" dev=\"rpopma\" type=\"fix\">","25","        Resolved race condition that caused log file rotation to fail with error: \"Unable to create directory ...\"","26","      <\/action>"],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/action\/FileRenameAction.java":[{"add":["79","                \/\/ LOG4J2-679: ignore mkdirs() result: in multithreaded scenarios,","80","                \/\/ if one thread succeeds the other thread returns false","81","                \/\/ even though directories have been created. Check if dir exists instead.","82","                parent.mkdirs();","83","                if (!parent.exists()) {"],"delete":["79","                if (!parent.mkdirs()) {"]}]}},"b86ff20253405e66e38aa5772cb138e0d95939d7":{"changes":{"src\/site\/xdoc\/manual\/async.xml":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggerThreadNameStrategyTest.java":"ADD","src\/changes\/changes.xml":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLogger.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggerTestCachedThreadName.java":"ADD","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggerTestUncachedThreadName.java":"ADD"},"diff":{"src\/site\/xdoc\/manual\/async.xml":[{"add":["276","\t\t\t\t\t\t<td>AsyncLogger.ThreadNameStrategy<\/td>","277","\t\t\t\t\t\t<td>","278","\t\t\t\t\t\t\t<tt>CACHED<\/tt>","279","\t\t\t\t\t\t<\/td>","280","\t\t\t\t\t\t<td>","281","\t\t\t\t\t\t\tValid values: CACHED, UNCACHED.","282","\t\t\t\t\t\t\t<br \/>","283","\t\t\t\t\t\t\tBy default, AsyncLogger caches the thread name","284","\t\t\t\t\t\t\tin a threadlocal variable to improve performance.","285","\t\t\t\t\t\t\tSpecify the <tt>UNCACHED<\/tt> option if your application","286","\t\t\t\t\t\t\tmodifies the thread name at runtime (with <tt>Thread.currentThread().setName()<\/tt>)","287","\t\t\t\t\t\t\tand you want to see the new thread name reflected in the log.","288","\t\t\t\t\t\t<\/td>","289","\t\t\t\t\t<\/tr>","290","\t\t\t\t\t<tr>"],"delete":[]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggerThreadNameStrategyTest.java":[{"add":[],"delete":[]}],"src\/changes\/changes.xml":[{"add":["23","      <action issue=\"LOG4J2-467\" dev=\"rpopma\" type=\"fix\" due-to=\"Anthony Baldocchi\">","24","        Added option to toggle Thread name caching in AsyncLogger.","25","      <\/action>"],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLogger.java":[{"add":["82","    private static final ThreadNameStrategy THREAD_NAME_STRATEGY = ThreadNameStrategy.create();","84","    static enum ThreadNameStrategy { \/\/ LOG4J2-467","85","        CACHED {","86","            public String getThreadName(Info info) {","87","                return info.cachedThreadName;","88","            }","89","        },","90","        UNCACHED {","91","            public String getThreadName(Info info) {","92","                return Thread.currentThread().getName();","93","            }","94","        };","95","        abstract String getThreadName(Info info);","96","","97","        static ThreadNameStrategy create() {","98","            String name = System.getProperty(\"AsyncLogger.ThreadNameStrategy\", CACHED.name());","99","            try {","100","                return ThreadNameStrategy.valueOf(name);","101","            } catch (Exception ex) {","102","                return CACHED;","103","            }","104","        }","105","    }","114","        LOGGER.debug(\"AsyncLogger.ThreadNameStrategy={}\", THREAD_NAME_STRATEGY);","198","    static class Info {","199","        private final RingBufferLogEventTranslator translator;","200","        private final String cachedThreadName;","201","        public Info(RingBufferLogEventTranslator translator, String threadName) {","202","            this.translator = translator;","203","            this.cachedThreadName = threadName;","204","        }","211","            info = new Info(new RingBufferLogEventTranslator(), Thread.currentThread().getName());","228","                \/\/ info.cachedThreadName, \/\/","229","                THREAD_NAME_STRATEGY.getThreadName(info), \/\/ LOG4J2-467"],"delete":["174","    private static class Info {","175","        private RingBufferLogEventTranslator translator;","176","        private String cachedThreadName;","183","            info = new Info();","184","            info.translator = new RingBufferLogEventTranslator();","185","            info.cachedThreadName = Thread.currentThread().getName();","202","                info.cachedThreadName, \/\/"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggerTestCachedThreadName.java":[{"add":[],"delete":[]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggerTestUncachedThreadName.java":[{"add":[],"delete":[]}]}},"04d725071c8b70c9f95b9e996c4266cc66f40dc8":{"changes":{"src\/changes\/changes.xml":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":[],"delete":["26","      <action issue=\"LOG4J2-1099\" dev=\"mattsicker\" type=\"fix\">","27","        Fix serialization problem with all AbstractStringLayout-derived Layout plugins.","28","      <\/action>"]}]}},"c1a68362fd7c94b1f8bf248759e9279a2fc5775d":{"changes":{"api\/src\/test\/java\/org\/apache\/logging\/log4j\/LoggerTest.java":"MODIFY","api\/src\/main\/java\/org\/apache\/logging\/log4j\/spi\/AbstractLogger.java":"MODIFY","src\/changes\/changes.xml":"MODIFY"},"diff":{"api\/src\/test\/java\/org\/apache\/logging\/log4j\/LoggerTest.java":[{"add":["41","","45","","54","        assertTrue(\"Incorrect Entry\", results.get(0).startsWith(\" TRACE entry\"));","55","        assertTrue(\"incorrect Exit\", results.get(1).startsWith(\" TRACE exit\"));","234","        \/\/assertEquals(messageFactory, testLogger2.getMessageFactory());"],"delete":["41","    ","45","    ","54","        assertTrue(\"Incorrect Entry\", results.get(0).startsWith(\" TRACE  entry\"));","55","        assertTrue(\"incorrect Exit\", results.get(1).startsWith(\" TRACE  exit\"));","234","        \/\/assertEquals(messageFactory, testLogger2.getMessageFactory());        "]}],"api\/src\/main\/java\/org\/apache\/logging\/log4j\/spi\/AbstractLogger.java":[{"add":["385","            return messageFactory.newMessage(\"entry\");","387","        final StringBuilder sb = new StringBuilder(\"entry params(\");","1406","            return messageFactory.newMessage(\"exit\");","1408","        return messageFactory.newMessage(\"exit with(\" + result + \")\");"],"delete":["385","            return messageFactory.newMessage(\" entry\");","387","        final StringBuilder sb = new StringBuilder(\" entry parms(\");","1406","            return messageFactory.newMessage(\" exit\");","1408","        return messageFactory.newMessage(\" exit with (\" + result + \")\");"]}],"src\/changes\/changes.xml":[{"add":["25","      <action issue=\"LOG4J2-211\" dev=\"rgoers\" type=\"fix\" due-to=\"Nick Williams\">","26","        Removing extra spaces in entry and exit method output.","27","      <\/action>"],"delete":[]}]}},"88cda248197c54e6ccb7edf5a23cfe676fdf96c9":{"changes":{"api\/src\/main\/java\/org\/apache\/logging\/log4j\/simple\/SimpleLoggerContextFactory.java":"MODIFY","api\/src\/main\/java\/org\/apache\/logging\/log4j\/spi\/LoggerContextFactory.java":"MODIFY","core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/impl\/Log4jContextFactory.java":"MODIFY","core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/selector\/BasicContextSelector.java":"MODIFY","core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/selector\/JNDIContextSelector.java":"MODIFY","src\/changes\/changes.xml":"MODIFY","log4j-to-slf4j\/src\/main\/java\/org\/apache\/logging\/slf4j\/SLF4JLoggerContextFactory.java":"MODIFY","core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/LoggerContext.java":"MODIFY","core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggerContextSelector.java":"MODIFY","core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/selector\/ClassLoaderContextSelector.java":"MODIFY","api\/src\/test\/java\/org\/apache\/logging\/log4j\/TestLoggerContextFactory.java":"MODIFY","core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/selector\/ContextSelector.java":"MODIFY"},"diff":{"api\/src\/main\/java\/org\/apache\/logging\/log4j\/simple\/SimpleLoggerContextFactory.java":[{"add":["40","","41","    @Override","42","    public void removeContext(LoggerContext context) {","43","    }"],"delete":[]}],"api\/src\/main\/java\/org\/apache\/logging\/log4j\/spi\/LoggerContextFactory.java":[{"add":["47","","48","    \/**","49","     * Removes knowledge of a LoggerContext.","50","     * @param The context to remove.","51","     *\/","52","    void removeContext(LoggerContext context);"],"delete":[]}],"core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/impl\/Log4jContextFactory.java":[{"add":["107","","108","","109","    \/**","110","     * Removes knowledge of a LoggerContext.","111","     * @param The context to remove.","112","     *\/","113","    @Override","114","    public void removeContext(org.apache.logging.log4j.spi.LoggerContext context) {","115","        if (context instanceof LoggerContext) {","116","            selector.removeContext((LoggerContext) context);","117","        }","118","    }"],"delete":[]}],"core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/selector\/BasicContextSelector.java":[{"add":["53","    @Override"],"delete":["54",""]}],"core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/selector\/JNDIContextSelector.java":[{"add":["135","    @Override"],"delete":[]}],"src\/changes\/changes.xml":[{"add":["24","      <action issue=\"LOG4J2-223\" dev=\"rgoers\" type=\"fix\">","25","        Remove LoggerContext when LoggerContext is stopped.","26","      <\/action>"],"delete":[]}],"log4j-to-slf4j\/src\/main\/java\/org\/apache\/logging\/slf4j\/SLF4JLoggerContextFactory.java":[{"add":["54","","55","    @Override","56","    public void removeContext(LoggerContext context) {","57","    }"],"delete":[]}],"core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/LoggerContext.java":[{"add":["30","import org.apache.logging.log4j.LogManager;","205","            LogManager.getFactory().removeContext(this);"],"delete":[]}],"core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggerContextSelector.java":[{"add":["31","    private static final AsyncLoggerContext CONTEXT = new AsyncLoggerContext(\"AsyncLoggerContext\");","34","    public LoggerContext getContext(String fqcn, ClassLoader loader, boolean currentContext) {","46","    public LoggerContext getContext(String fqcn, ClassLoader loader, boolean currentContext, URI configLocation) {","50","    @Override","51","    public void removeContext(LoggerContext context) {","52","    }","53",""],"delete":["31","    private static final AsyncLoggerContext CONTEXT = new AsyncLoggerContext(","32","            \"AsyncLoggerContext\");","35","    public LoggerContext getContext(String fqcn, ClassLoader loader,","36","            boolean currentContext) {","48","    public LoggerContext getContext(String fqcn, ClassLoader loader,","49","            boolean currentContext, URI configLocation) {"]}],"core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/selector\/ClassLoaderContextSelector.java":[{"add":["144","    @Override"],"delete":[]}],"api\/src\/test\/java\/org\/apache\/logging\/log4j\/TestLoggerContextFactory.java":[{"add":["40","","41","    @Override","42","    public void removeContext(LoggerContext context) {","43","    }"],"delete":[]}],"core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/selector\/ContextSelector.java":[{"add":["54","","55","    \/**","56","     * Remove any references to the LoggerContext.","57","     * @param context The context to remove.","58","     *\/","59","    void removeContext(LoggerContext context);"],"delete":[]}]}},"5410ff51ba9556e7e8d200f255be0ff2d44a6fba":{"changes":{"log4j-layout-template-json\/src\/test\/java\/org\/apache\/logging\/log4j\/layout\/template\/json\/ThreadLocalRecyclerNestedLoggingTest.java":"ADD","log4j-layout-template-json\/src\/test\/resources\/threadLocalRecyclerNestedLogging.xml":"ADD"},"diff":{"log4j-layout-template-json\/src\/test\/java\/org\/apache\/logging\/log4j\/layout\/template\/json\/ThreadLocalRecyclerNestedLoggingTest.java":[{"add":[],"delete":[]}],"log4j-layout-template-json\/src\/test\/resources\/threadLocalRecyclerNestedLogging.xml":[{"add":[],"delete":[]}]}},"67c4eaaa09c3b69c44fccd31fbd1c9c956069a3b":{"changes":{"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/util\/WatchManagerTest.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/util\/WatchHttpTest.java":"MODIFY","src\/changes\/changes.xml":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/util\/WatchManager.java":"MODIFY"},"diff":{"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/util\/WatchManagerTest.java":[{"add":["74","            scheduler.stop();","107","            scheduler.stop();","140","            scheduler.stop();"],"delete":["35","import static org.junit.Assert.assertTrue;","75","            assertTrue(watchManager.getScheduler().isStopped());","108","            assertTrue(watchManager.getScheduler().isStopped());","141","            assertTrue(watchManager.getScheduler().isStopped());"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/util\/WatchHttpTest.java":[{"add":["115","            scheduler.stop();","151","            scheduler.stop();"],"delete":["53","import static org.junit.Assert.assertTrue;","116","            assertTrue(watchManager.getScheduler().isStopped());","152","            assertTrue(watchManager.getScheduler().isStopped());"]}],"src\/changes\/changes.xml":[{"add":["40","        Allow auto-shutdown of log4j in log4j-web to be turned off and provide a ","45","        Allow auto-shutdown of log4j in log4j-web to be turned off and provide a ","46","        ServletContextListener \"Log4jShutdownOnContextDestroyedListener\" to stop log4j. ","191","      <\/action>  "],"delete":["40","        Allow auto-shutdown of log4j in log4j-web to be turned off and provide a","45","        Allow auto-shutdown of log4j in log4j-web to be turned off and provide a","46","        ServletContextListener \"Log4jShutdownOnContextDestroyedListener\" to stop log4j.","85","      <action issue=\"LOG4J2-3026\" dev=\"ggregory\" type=\"fix\" due-to=\"Gary Gregory\">","86","        WatchManager does not stop its ConfigurationScheduler thereby leaking a thread.","87","      <\/action>","194","      <\/action>"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/util\/WatchManager.java":[{"add":["134","        this.scheduler = scheduler;"],"delete":["24","import java.util.Objects;","135","        this.scheduler = Objects.requireNonNull(scheduler, \"scheduler\");","309","        if (scheduler.isStarted()) {","310","            scheduler.stop(timeout, timeUnit);","311","        }","378","","379","    ConfigurationScheduler getScheduler() {","380","        return scheduler;","381","    }"]}]}},"aaf734c722fd30ce43d6d6844631ab4887c41f17":{"changes":{"log4j-web\/src\/test\/java\/org\/apache\/logging\/log4j\/web\/Log4jServletContextListenerTest.java":"MODIFY"},"diff":{"log4j-web\/src\/test\/java\/org\/apache\/logging\/log4j\/web\/Log4jServletContextListenerTest.java":[{"add":[],"delete":["98","    @Test","99","    public void testDestroy() {","100","        replay(this.event, this.servletContext, this.initializer);","101","","102","        try {","103","            this.listener.contextDestroyed(this.event);","104","            fail(\"Expected an IllegalStateException.\");","105","        } catch (final IllegalStateException ignore) {","106","","107","        }","108","    }"]}]}},"a60368c015b343b37c3537cb67d594b547a61cd5":{"changes":{"src\/changes\/changes.xml":"MODIFY","log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/LogManager.java":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["52","      <\/action>          ","53","      <action issue=\"LOG4J2-1084\" dev=\"ggregory\" type=\"fix\" due-to=\"Philipp Schneider\">","54","        Misleading StatusLogger WARN event in LogManager with java.util.Map.","55","      <\/action>"],"delete":["52","      <\/action>     "]}],"log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/LogManager.java":[{"add":["0","\/*","1"," * Licensed to the Apache Software Foundation (ASF) under one or more","2"," * contributor license agreements. See the NOTICE file distributed with","3"," * this work for additional information regarding copyright ownership.","4"," * The ASF licenses this file to You under the Apache license, Version 2.0","5"," * (the \"License\"); you may not use this file except in compliance with","6"," * the License. You may obtain a copy of the License at","7"," *","8"," *      http:\/\/www.apache.org\/licenses\/LICENSE-2.0","9"," *","10"," * Unless required by applicable law or agreed to in writing, software","11"," * distributed under the License is distributed on an \"AS IS\" BASIS,","12"," * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.","13"," * See the license for the specific language governing permissions and","14"," * limitations under the license.","15"," *\/","16","package org.apache.logging.log4j;","17","","18","import java.net.URI;","19","import java.util.Map;","20","import java.util.SortedMap;","21","import java.util.TreeMap;","22","","23","import org.apache.logging.log4j.message.MessageFactory;","24","import org.apache.logging.log4j.message.StringFormatterMessageFactory;","25","import org.apache.logging.log4j.simple.SimpleLoggerContextFactory;","26","import org.apache.logging.log4j.spi.LoggerContext;","27","import org.apache.logging.log4j.spi.LoggerContextFactory;","28","import org.apache.logging.log4j.spi.Provider;","29","import org.apache.logging.log4j.status.StatusLogger;","30","import org.apache.logging.log4j.util.LoaderUtil;","31","import org.apache.logging.log4j.util.PropertiesUtil;","32","import org.apache.logging.log4j.util.ProviderUtil;","33","import org.apache.logging.log4j.util.ReflectionUtil;","34","import org.apache.logging.log4j.util.Strings;","35","","36","\/**","37"," * The anchor point for the logging system. The most common usage of this class is to obtain a named","38"," * {@link Logger}. The method {@link #getLogger()} is provided as the most convenient way to obtain a named Logger","39"," * based on the calling class name. This class also provides method for obtaining named Loggers that use","40"," * {@link String#format(String, Object...)} style messages instead of the default type of parameterized messages.","41"," * These are obtained through the {@link #getFormatterLogger(Class)} family of methods. Other service provider methods","42"," * are given through the {@link #getContext()} and {@link #getFactory()} family of methods; these methods are not","43"," * normally useful for typical usage of Log4j.","44"," *\/","45","public class LogManager {","46","","47","    private static volatile LoggerContextFactory factory;","48","","49","    \/**","50","     * Log4j property to set to the fully qualified class name of a custom implementation of","51","     * {@link org.apache.logging.log4j.spi.LoggerContextFactory}.","52","     *\/","53","    public static final String FACTORY_PROPERTY_NAME = \"log4j2.loggerContextFactory\";","54","","55","    private static final Logger LOGGER = StatusLogger.getLogger();","56","","57","    \/**","58","     * The name of the root Logger.","59","     *\/","60","    public static final String ROOT_LOGGER_NAME = Strings.EMPTY;","61","","62","    \/\/ for convenience","63","    private static final String FQCN = LogManager.class.getName();","64","","65","    \/**","66","     * Scans the classpath to find all logging implementation. Currently, only one will","67","     * be used but this could be extended to allow multiple implementations to be used.","68","     *\/","69","    static {","70","        \/\/ Shortcut binding to force a specific logging implementation.","71","        final PropertiesUtil managerProps = PropertiesUtil.getProperties();","72","        final String factoryClassName = managerProps.getStringProperty(FACTORY_PROPERTY_NAME);","73","        if (factoryClassName != null) {","74","            try {","75","                final Class<?> clazz = LoaderUtil.loadClass(factoryClassName);","76","                if (LoggerContextFactory.class.isAssignableFrom(clazz)) {","77","                    factory = clazz.asSubclass(LoggerContextFactory.class).newInstance();","78","                }","79","            } catch (final ClassNotFoundException cnfe) {","80","                LOGGER.error(\"Unable to locate configured LoggerContextFactory {}\", factoryClassName);","81","            } catch (final Exception ex) {","82","                LOGGER.error(\"Unable to create configured LoggerContextFactory {}\", factoryClassName, ex);","83","            }","84","        }","85","","86","        if (factory == null) {","87","            final SortedMap<Integer, LoggerContextFactory> factories = new TreeMap<>();","88","            \/\/ note that the following initial call to ProviderUtil may block until a Provider has been installed when","89","            \/\/ running in an OSGi environment","90","            if (ProviderUtil.hasProviders()) {","91","                for (final Provider provider : ProviderUtil.getProviders()) {","92","                    final Class<? extends LoggerContextFactory> factoryClass = provider.loadLoggerContextFactory();","93","                    if (factoryClass != null) {","94","                        try {","95","                            factories.put(provider.getPriority(), factoryClass.newInstance());","96","                        } catch (final Exception e) {","97","                            LOGGER.error(\"Unable to create class {} specified in {}\", factoryClass.getName(),","98","                                provider.getUrl().toString(), e);","99","                        }","100","                    }","101","                }","102","","103","                if (factories.isEmpty()) {","104","                    LOGGER.error(\"Log4j2 could not find a logging implementation. Please add log4j-core to the classpath. Using SimpleLogger to log to the console...\");","105","                    factory = new SimpleLoggerContextFactory();","106","                } else if (factories.size() == 1) {","107","\t\t\t\t\tfactory = factories.get(factories.lastKey());","108","                } else {","109","                    final StringBuilder sb = new StringBuilder(\"Multiple logging implementations found: \\n\");","110","                    for (final Map.Entry<Integer, LoggerContextFactory> entry : factories.entrySet()) {","111","                        sb.append(\"Factory: \").append(entry.getValue().getClass().getName());","112","                        sb.append(\", Weighting: \").append(entry.getKey()).append('\\n');","113","                    }","114","                    factory = factories.get(factories.lastKey());","115","                    sb.append(\"Using factory: \").append(factory.getClass().getName());","116","                    LOGGER.warn(sb.toString());","117","","118","                }","119","            } else {","120","                LOGGER.error(\"Log4j2 could not find a logging implementation. Please add log4j-core to the classpath. Using SimpleLogger to log to the console...\");","121","                factory = new SimpleLoggerContextFactory();","122","            }","123","        }","124","    }","125","","126","    \/**","127","     * Detects if a Logger with the specified name exists. This is a convenience method for porting from version 1.","128","     *","129","     * @param name","130","     *            The Logger name to search for.","131","     * @return true if the Logger exists, false otherwise.","132","     * @see LoggerContext#hasLogger(String)","133","     *\/","134","    public static boolean exists(final String name) {","135","        return getContext().hasLogger(name);","136","    }","137","","138","    \/**","139","     * Returns the current LoggerContext.","140","     * <p>","141","     * WARNING - The LoggerContext returned by this method may not be the LoggerContext used to create a Logger","142","     * for the calling class.","143","     * <\/p>","144","     * @return  The current LoggerContext.","145","     *\/","146","    public static LoggerContext getContext() {","147","        return factory.getContext(FQCN, null, null, true);","148","    }","149","","150","    \/**","151","     * Returns a LoggerContext.","152","     *","153","     * @param currentContext if false the LoggerContext appropriate for the caller of this method is returned. For","154","     * example, in a web application if the caller is a class in WEB-INF\/lib then one LoggerContext may be","155","     * returned and if the caller is a class in the container's classpath then a different LoggerContext may be","156","     * returned. If true then only a single LoggerContext will be returned.","157","     * @return a LoggerContext.","158","     *\/","159","    public static LoggerContext getContext(final boolean currentContext) {","160","        \/\/ TODO: would it be a terrible idea to try and find the caller ClassLoader here?","161","        return factory.getContext(FQCN, null, null, currentContext, null, null);","162","    }","163","","164","    \/**","165","     * Returns a LoggerContext.","166","     *","167","     * @param loader The ClassLoader for the context. If null the context will attempt to determine the appropriate","168","     * ClassLoader.","169","     * @param currentContext if false the LoggerContext appropriate for the caller of this method is returned. For","170","     * example, in a web application if the caller is a class in WEB-INF\/lib then one LoggerContext may be","171","     * returned and if the caller is a class in the container's classpath then a different LoggerContext may be","172","     * returned. If true then only a single LoggerContext will be returned.","173","     * @return a LoggerContext.","174","     *\/","175","    public static LoggerContext getContext(final ClassLoader loader, final boolean currentContext) {","176","        return factory.getContext(FQCN, loader, null, currentContext);","177","    }","178","","179","    \/**","180","     * Returns a LoggerContext.","181","     *","182","     * @param loader The ClassLoader for the context. If null the context will attempt to determine the appropriate","183","     * ClassLoader.","184","     * @param currentContext if false the LoggerContext appropriate for the caller of this method is returned. For","185","     * example, in a web application if the caller is a class in WEB-INF\/lib then one LoggerContext may be","186","     * returned and if the caller is a class in the container's classpath then a different LoggerContext may be","187","     * returned. If true then only a single LoggerContext will be returned.","188","     * @param externalContext An external context (such as a ServletContext) to be associated with the LoggerContext.","189","     * @return a LoggerContext.","190","     *\/","191","    public static LoggerContext getContext(final ClassLoader loader, final boolean currentContext,","192","                                           final Object externalContext) {","193","        return factory.getContext(FQCN, loader, externalContext, currentContext);","194","    }","195","","196","    \/**","197","     * Returns a LoggerContext.","198","     *","199","     * @param loader The ClassLoader for the context. If null the context will attempt to determine the appropriate","200","     * ClassLoader.","201","     * @param currentContext if false the LoggerContext appropriate for the caller of this method is returned. For","202","     * example, in a web application if the caller is a class in WEB-INF\/lib then one LoggerContext may be","203","     * returned and if the caller is a class in the container's classpath then a different LoggerContext may be","204","     * returned. If true then only a single LoggerContext will be returned.","205","     * @param configLocation The URI for the configuration to use.","206","     * @return a LoggerContext.","207","     *\/","208","    public static LoggerContext getContext(final ClassLoader loader, final boolean currentContext,","209","                                           final URI configLocation) {","210","        return factory.getContext(FQCN, loader, null, currentContext, configLocation, null);","211","    }","212","","213","","214","    \/**","215","     * Returns a LoggerContext.","216","     *","217","     * @param loader The ClassLoader for the context. If null the context will attempt to determine the appropriate","218","     * ClassLoader.","219","     * @param currentContext if false the LoggerContext appropriate for the caller of this method is returned. For","220","     * example, in a web application if the caller is a class in WEB-INF\/lib then one LoggerContext may be","221","     * returned and if the caller is a class in the container's classpath then a different LoggerContext may be","222","     * returned. If true then only a single LoggerContext will be returned.","223","     * @param externalContext An external context (such as a ServletContext) to be associated with the LoggerContext.","224","     * @param configLocation The URI for the configuration to use.","225","     * @return a LoggerContext.","226","     *\/","227","    public static LoggerContext getContext(final ClassLoader loader, final boolean currentContext,","228","                                           final Object externalContext, final URI configLocation) {","229","        return factory.getContext(FQCN, loader, externalContext, currentContext, configLocation, null);","230","    }","231","","232","","233","    \/**","234","     * Returns a LoggerContext.","235","     *","236","     * @param loader The ClassLoader for the context. If null the context will attempt to determine the appropriate","237","     * ClassLoader.","238","     * @param currentContext if false the LoggerContext appropriate for the caller of this method is returned. For","239","     * example, in a web application if the caller is a class in WEB-INF\/lib then one LoggerContext may be","240","     * returned and if the caller is a class in the container's classpath then a different LoggerContext may be","241","     * returned. If true then only a single LoggerContext will be returned.","242","     * @param externalContext An external context (such as a ServletContext) to be associated with the LoggerContext.","243","     * @param configLocation The URI for the configuration to use.","244","     * @param name The LoggerContext name.","245","     * @return a LoggerContext.","246","     *\/","247","    public static LoggerContext getContext(final ClassLoader loader, final boolean currentContext,","248","                                           final Object externalContext, final URI configLocation,","249","                                           final String name) {","250","        return factory.getContext(FQCN, loader, externalContext, currentContext, configLocation, name);","251","    }","252","","253","    \/**","254","     * Returns a LoggerContext","255","     * @param fqcn The fully qualified class name of the Class that this method is a member of.","256","     * @param currentContext if false the LoggerContext appropriate for the caller of this method is returned. For","257","     * example, in a web application if the caller is a class in WEB-INF\/lib then one LoggerContext may be","258","     * returned and if the caller is a class in the container's classpath then a different LoggerContext may be","259","     * returned. If true then only a single LoggerContext will be returned.","260","     * @return a LoggerContext.","261","     *\/","262","    protected static LoggerContext getContext(final String fqcn, final boolean currentContext) {","263","        return factory.getContext(fqcn, null, null, currentContext);","264","    }","265","","266","    \/**","267","     * Returns a LoggerContext","268","     * @param fqcn The fully qualified class name of the Class that this method is a member of.","269","     * @param loader The ClassLoader for the context. If null the context will attempt to determine the appropriate","270","     * ClassLoader.","271","     * @param currentContext if false the LoggerContext appropriate for the caller of this method is returned. For","272","     * example, in a web application if the caller is a class in WEB-INF\/lib then one LoggerContext may be","273","     * returned and if the caller is a class in the container's classpath then a different LoggerContext may be","274","     * returned. If true then only a single LoggerContext will be returned.","275","     * @return a LoggerContext.","276","     *\/","277","    protected static LoggerContext getContext(final String fqcn, final ClassLoader loader,","278","                                              final boolean currentContext) {","279","        return factory.getContext(fqcn, loader, null, currentContext);","280","    }","281","","282","    \/**","283","     * Returns the current LoggerContextFactory.","284","     * @return The LoggerContextFactory.","285","     *\/","286","    public static LoggerContextFactory getFactory() {","287","        return factory;","288","    }","289","","290","    \/**","291","     * Sets the current LoggerContextFactory to use. Normally, the appropriate LoggerContextFactory is created at","292","     * startup, but in certain environments, a LoggerContextFactory implementation may not be available at this point.","293","     * Thus, an alternative LoggerContextFactory can be set at runtime.","294","     *","295","     * <p>","296","     * Note that any Logger or LoggerContext objects already created will still be valid, but they will no longer be","297","     * accessible through LogManager. Thus, <strong>it is a bad idea to use this method without a good reason<\/strong>!","298","     * Generally, this method should be used only during startup before any code starts caching Logger objects.","299","     * <\/p>","300","     *","301","     * @param factory the LoggerContextFactory to use.","302","     *\/","303","    \/\/ FIXME: should we allow only one update of the factory?","304","    public static void setFactory(final LoggerContextFactory factory) {","305","        LogManager.factory = factory;","306","    }","307","","308","    \/**","309","     * Returns a formatter Logger using the fully qualified name of the calling Class as the Logger name.","310","     * <p>","311","     * This logger lets you use a {@link java.util.Formatter} string in the message to format parameters.","312","     * <\/p>","313","     * @return The Logger for the calling class.","314","     * @throws UnsupportedOperationException if the calling class cannot be determined.","315","     * @since 2.4","316","     *\/","317","    public static Logger getFormatterLogger() {","318","        return getFormatterLogger(ReflectionUtil.getCallerClass(2));","319","    }","320","","321","","322","    \/**","323","     * Returns a formatter Logger using the fully qualified name of the Class as the Logger name.","324","     * <p>","325","     * This logger let you use a {@link java.util.Formatter} string in the message to format parameters.","326","     * <\/p>","327","     * <p>","328","     * Short-hand for {@code getLogger(clazz, StringFormatterMessageFactory.INSTANCE)}","329","     * <\/p>","330","     *","331","     * @param clazz","332","     *            The Class whose name should be used as the Logger name.","333","     * @return The Logger, created with a {@link StringFormatterMessageFactory}","334","     * @throws UnsupportedOperationException if {@code clazz} is {@code null} and the calling class cannot be determined.","335","     * @see Logger#fatal(Marker, String, Object...)","336","     * @see Logger#fatal(String, Object...)","337","     * @see Logger#error(Marker, String, Object...)","338","     * @see Logger#error(String, Object...)","339","     * @see Logger#warn(Marker, String, Object...)","340","     * @see Logger#warn(String, Object...)","341","     * @see Logger#info(Marker, String, Object...)","342","     * @see Logger#info(String, Object...)","343","     * @see Logger#debug(Marker, String, Object...)","344","     * @see Logger#debug(String, Object...)","345","     * @see Logger#trace(Marker, String, Object...)","346","     * @see Logger#trace(String, Object...)","347","     * @see StringFormatterMessageFactory","348","     *\/","349","    public static Logger getFormatterLogger(final Class<?> clazz) {","350","        return getLogger(clazz != null ? clazz : ReflectionUtil.getCallerClass(2),","351","            StringFormatterMessageFactory.INSTANCE);","352","    }","353","","354","    \/**","355","     * Returns a formatter Logger using the fully qualified name of the value's Class as the Logger name.","356","     * <p>","357","     * This logger let you use a {@link java.util.Formatter} string in the message to format parameters.","358","     * <\/p>","359","     * <p>","360","     * Short-hand for {@code getLogger(value, StringFormatterMessageFactory.INSTANCE)}","361","     * <\/p>","362","     *","363","     * @param value","364","     *            The value's whose class name should be used as the Logger name.","365","     * @return The Logger, created with a {@link StringFormatterMessageFactory}","366","     * @throws UnsupportedOperationException if {@code value} is {@code null} and the calling class cannot be determined.","367","     * @see Logger#fatal(Marker, String, Object...)","368","     * @see Logger#fatal(String, Object...)","369","     * @see Logger#error(Marker, String, Object...)","370","     * @see Logger#error(String, Object...)","371","     * @see Logger#warn(Marker, String, Object...)","372","     * @see Logger#warn(String, Object...)","373","     * @see Logger#info(Marker, String, Object...)","374","     * @see Logger#info(String, Object...)","375","     * @see Logger#debug(Marker, String, Object...)","376","     * @see Logger#debug(String, Object...)","377","     * @see Logger#trace(Marker, String, Object...)","378","     * @see Logger#trace(String, Object...)","379","     * @see StringFormatterMessageFactory","380","     *\/","381","    public static Logger getFormatterLogger(final Object value) {","382","        return getLogger(value != null ? value.getClass() : ReflectionUtil.getCallerClass(2),","383","            StringFormatterMessageFactory.INSTANCE);","384","    }","385","","386","    \/**","387","     * Returns a formatter Logger with the specified name.","388","     * <p>","389","     * This logger let you use a {@link java.util.Formatter} string in the message to format parameters.","390","     * <\/p>","391","     * <p>","392","     * Short-hand for {@code getLogger(name, StringFormatterMessageFactory.INSTANCE)}","393","     * <\/p>","394","     *","395","     * @param name The logger name. If null it will default to the name of the calling class.","396","     * @return The Logger, created with a {@link StringFormatterMessageFactory}","397","     * @throws UnsupportedOperationException if {@code name} is {@code null} and the calling class cannot be determined.","398","     * @see Logger#fatal(Marker, String, Object...)","399","     * @see Logger#fatal(String, Object...)","400","     * @see Logger#error(Marker, String, Object...)","401","     * @see Logger#error(String, Object...)","402","     * @see Logger#warn(Marker, String, Object...)","403","     * @see Logger#warn(String, Object...)","404","     * @see Logger#info(Marker, String, Object...)","405","     * @see Logger#info(String, Object...)","406","     * @see Logger#debug(Marker, String, Object...)","407","     * @see Logger#debug(String, Object...)","408","     * @see Logger#trace(Marker, String, Object...)","409","     * @see Logger#trace(String, Object...)","410","     * @see StringFormatterMessageFactory","411","     *\/","412","    public static Logger getFormatterLogger(final String name) {","413","        return name == null ? getFormatterLogger(ReflectionUtil.getCallerClass(2)) : getLogger(name,","414","            StringFormatterMessageFactory.INSTANCE);","415","    }","416","","417","    \/**","418","     * Returns a Logger with the name of the calling class.","419","     * @return The Logger for the calling class.","420","     * @throws UnsupportedOperationException if the calling class cannot be determined.","421","     *\/","422","    public static Logger getLogger() {","423","        return getLogger(ReflectionUtil.getCallerClass(2));","424","    }","425","","426","    \/**","427","     * Returns a Logger using the fully qualified name of the Class as the Logger name.","428","     * @param clazz The Class whose name should be used as the Logger name. If null it will default to the calling","429","     *              class.","430","     * @return The Logger.","431","     * @throws UnsupportedOperationException if {@code clazz} is {@code null} and the calling class cannot be determined.","432","     *\/","433","    public static Logger getLogger(final Class<?> clazz) {","434","        if (clazz == null) {","435","            final Class<?> candidate = ReflectionUtil.getCallerClass(2);","436","            if (candidate == null) {","437","                throw new UnsupportedOperationException(\"No class provided, and an appropriate one cannot be found.\");","438","            }","439","            return getLogger(candidate);","440","        }","441","        return getContext(clazz.getClassLoader(), false).getLogger(clazz.getName());","442","    }","443","","444","    \/**","445","     * Returns a Logger using the fully qualified name of the Class as the Logger name.","446","     * @param clazz The Class whose name should be used as the Logger name. If null it will default to the calling","447","     *              class.","448","     * @param messageFactory The message factory is used only when creating a logger, subsequent use does not change","449","     *                       the logger but will log a warning if mismatched.","450","     * @return The Logger.","451","     * @throws UnsupportedOperationException if {@code clazz} is {@code null} and the calling class cannot be determined.","452","     *\/","453","    public static Logger getLogger(final Class<?> clazz, final MessageFactory messageFactory) {","454","        if (clazz == null) {","455","            final Class<?> candidate = ReflectionUtil.getCallerClass(2);","456","            if (candidate == null) {","457","                throw new UnsupportedOperationException(\"No class provided, and an appropriate one cannot be found.\");","458","            }","459","            return getLogger(candidate, messageFactory);","460","        }","461","        return getContext(clazz.getClassLoader(), false).getLogger(clazz.getName(), messageFactory);","462","    }","463","","464","    \/**","465","     * Returns a Logger with the name of the calling class.","466","     * @param messageFactory The message factory is used only when creating a logger, subsequent use does not change","467","     *                       the logger but will log a warning if mismatched.","468","     * @return The Logger for the calling class.","469","     * @throws UnsupportedOperationException if the calling class cannot be determined.","470","     *\/","471","    public static Logger getLogger(final MessageFactory messageFactory) {","472","        return getLogger(ReflectionUtil.getCallerClass(2), messageFactory);","473","    }","474","","475","    \/**","476","     * Returns a Logger using the fully qualified class name of the value as the Logger name.","477","     * @param value The value whose class name should be used as the Logger name. If null the name of the calling","478","     *              class will be used as the logger name.","479","     * @return The Logger.","480","     * @throws UnsupportedOperationException if {@code value} is {@code null} and the calling class cannot be determined.","481","     *\/","482","    public static Logger getLogger(final Object value) {","483","        return getLogger(value != null ? value.getClass() : ReflectionUtil.getCallerClass(2));","484","    }","485","","486","    \/**","487","     * Returns a Logger using the fully qualified class name of the value as the Logger name.","488","     * @param value The value whose class name should be used as the Logger name. If null the name of the calling","489","     *              class will be used as the logger name.","490","     * @param messageFactory The message factory is used only when creating a logger, subsequent use does not change","491","     *                       the logger but will log a warning if mismatched.","492","     * @return The Logger.","493","     * @throws UnsupportedOperationException if {@code value} is {@code null} and the calling class cannot be determined.","494","     *\/","495","    public static Logger getLogger(final Object value, final MessageFactory messageFactory) {","496","        return getLogger(value != null ? value.getClass() : ReflectionUtil.getCallerClass(2), messageFactory);","497","    }","498","","499","    \/**","500","     * Returns a Logger with the specified name.","501","     *","502","     * @param name The logger name. If null the name of the calling class will be used.","503","     * @return The Logger.","504","     * @throws UnsupportedOperationException if {@code name} is {@code null} and the calling class cannot be determined.","505","     *\/","506","    public static Logger getLogger(final String name) {","507","        return name != null ? getContext(false).getLogger(name) : getLogger(ReflectionUtil.getCallerClass(2));","508","    }","509","","510","    \/**","511","     * Returns a Logger with the specified name.","512","     *","513","     * @param name The logger name. If null the name of the calling class will be used.","514","     * @param messageFactory The message factory is used only when creating a logger, subsequent use does not change","515","     *                       the logger but will log a warning if mismatched.","516","     * @return The Logger.","517","     * @throws UnsupportedOperationException if {@code name} is {@code null} and the calling class cannot be determined.","518","     *\/","519","    public static Logger getLogger(final String name, final MessageFactory messageFactory) {","520","        return name != null ? getContext(false).getLogger(name, messageFactory) : getLogger(","521","            ReflectionUtil.getCallerClass(2), messageFactory);","522","    }","523","","524","    \/**","525","     * Returns a Logger with the specified name.","526","     *","527","     * @param fqcn The fully qualified class name of the class that this method is a member of.","528","     * @param name The logger name.","529","     * @return The Logger.","530","     *\/","531","    protected static Logger getLogger(final String fqcn, final String name) {","532","        return factory.getContext(fqcn, null, null, false).getLogger(name);","533","    }","534","","535","    \/**","536","     * Returns the root logger.","537","     *","538","     * @return the root logger, named {@link #ROOT_LOGGER_NAME}.","539","     *\/","540","    public static Logger getRootLogger() {","541","        return getLogger(ROOT_LOGGER_NAME);","542","    }","543","","544","    \/**","545","     * Prevents instantiation","546","     *\/","547","    protected LogManager() {","548","    }","549","","550","}"],"delete":["0","\/*\r","1"," * Licensed to the Apache Software Foundation (ASF) under one or more\r","2"," * contributor license agreements. See the NOTICE file distributed with\r","3"," * this work for additional information regarding copyright ownership.\r","4"," * The ASF licenses this file to You under the Apache license, Version 2.0\r","5"," * (the \"License\"); you may not use this file except in compliance with\r","6"," * the License. You may obtain a copy of the License at\r","7"," *\r","8"," *      http:\/\/www.apache.org\/licenses\/LICENSE-2.0\r","9"," *\r","10"," * Unless required by applicable law or agreed to in writing, software\r","11"," * distributed under the License is distributed on an \"AS IS\" BASIS,\r","12"," * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r","13"," * See the license for the specific language governing permissions and\r","14"," * limitations under the license.\r","15"," *\/\r","16","package org.apache.logging.log4j;\r","17","\r","18","import java.net.URI;\r","19","import java.util.Map;\r","20","import java.util.SortedMap;\r","21","import java.util.TreeMap;\r","22","\r","23","import org.apache.logging.log4j.message.MessageFactory;\r","24","import org.apache.logging.log4j.message.StringFormatterMessageFactory;\r","25","import org.apache.logging.log4j.simple.SimpleLoggerContextFactory;\r","26","import org.apache.logging.log4j.spi.LoggerContext;\r","27","import org.apache.logging.log4j.spi.LoggerContextFactory;\r","28","import org.apache.logging.log4j.spi.Provider;\r","29","import org.apache.logging.log4j.status.StatusLogger;\r","30","import org.apache.logging.log4j.util.LoaderUtil;\r","31","import org.apache.logging.log4j.util.PropertiesUtil;\r","32","import org.apache.logging.log4j.util.ProviderUtil;\r","33","import org.apache.logging.log4j.util.ReflectionUtil;\r","34","import org.apache.logging.log4j.util.Strings;\r","35","\r","36","\/**\r","37"," * The anchor point for the logging system. The most common usage of this class is to obtain a named\r","38"," * {@link Logger}. The method {@link #getLogger()} is provided as the most convenient way to obtain a named Logger\r","39"," * based on the calling class name. This class also provides method for obtaining named Loggers that use\r","40"," * {@link String#format(String, Object...)} style messages instead of the default type of parameterized messages.\r","41"," * These are obtained through the {@link #getFormatterLogger(Class)} family of methods. Other service provider methods\r","42"," * are given through the {@link #getContext()} and {@link #getFactory()} family of methods; these methods are not\r","43"," * normally useful for typical usage of Log4j.\r","44"," *\/\r","45","public class LogManager {\r","46","\r","47","    private static volatile LoggerContextFactory factory;\r","48","\r","49","    \/**\r","50","     * Log4j property to set to the fully qualified class name of a custom implementation of\r","51","     * {@link org.apache.logging.log4j.spi.LoggerContextFactory}.\r","52","     *\/\r","53","    public static final String FACTORY_PROPERTY_NAME = \"log4j2.loggerContextFactory\";\r","54","\r","55","    private static final Logger LOGGER = StatusLogger.getLogger();\r","56","\r","57","    \/**\r","58","     * The name of the root Logger.\r","59","     *\/\r","60","    public static final String ROOT_LOGGER_NAME = Strings.EMPTY;\r","61","\r","62","    \/\/ for convenience\r","63","    private static final String FQCN = LogManager.class.getName();\r","64","\r","65","    \/**\r","66","     * Scans the classpath to find all logging implementation. Currently, only one will\r","67","     * be used but this could be extended to allow multiple implementations to be used.\r","68","     *\/\r","69","    static {\r","70","        \/\/ Shortcut binding to force a specific logging implementation.\r","71","        final PropertiesUtil managerProps = PropertiesUtil.getProperties();\r","72","        final String factoryClassName = managerProps.getStringProperty(FACTORY_PROPERTY_NAME);\r","73","        if (factoryClassName != null) {\r","74","            try {\r","75","                final Class<?> clazz = LoaderUtil.loadClass(factoryClassName);\r","76","                if (LoggerContextFactory.class.isAssignableFrom(clazz)) {\r","77","                    factory = clazz.asSubclass(LoggerContextFactory.class).newInstance();\r","78","                }\r","79","            } catch (final ClassNotFoundException cnfe) {\r","80","                LOGGER.error(\"Unable to locate configured LoggerContextFactory {}\", factoryClassName);\r","81","            } catch (final Exception ex) {\r","82","                LOGGER.error(\"Unable to create configured LoggerContextFactory {}\", factoryClassName, ex);\r","83","            }\r","84","        }\r","85","\r","86","        if (factory == null) {\r","87","            final SortedMap<Integer, LoggerContextFactory> factories = new TreeMap<>();\r","88","            \/\/ note that the following initial call to ProviderUtil may block until a Provider has been installed when\r","89","            \/\/ running in an OSGi environment\r","90","            if (ProviderUtil.hasProviders()) {\r","91","                for (final Provider provider : ProviderUtil.getProviders()) {\r","92","                    final Class<? extends LoggerContextFactory> factoryClass = provider.loadLoggerContextFactory();\r","93","                    if (factoryClass != null) {\r","94","                        try {\r","95","                            factories.put(provider.getPriority(), factoryClass.newInstance());\r","96","                        } catch (final Exception e) {\r","97","                            LOGGER.error(\"Unable to create class {} specified in {}\", factoryClass.getName(),\r","98","                                provider.getUrl().toString(), e);\r","99","                        }\r","100","                    }\r","101","                }\r","102","\r","103","                if (factories.isEmpty()) {\r","104","                    LOGGER.error(\"Log4j2 could not find a logging implementation. Please add log4j-core to the classpath. Using SimpleLogger to log to the console...\");\r","105","                    factory = new SimpleLoggerContextFactory();\r","106","                } else {\r","107","                    final StringBuilder sb = new StringBuilder(\"Multiple logging implementations found: \\n\");\r","108","                    for (final Map.Entry<Integer, LoggerContextFactory> entry : factories.entrySet()) {\r","109","                        sb.append(\"Factory: \").append(entry.getValue().getClass().getName());\r","110","                        sb.append(\", Weighting: \").append(entry.getKey()).append('\\n');\r","111","                    }\r","112","                    factory = factories.get(factories.lastKey());\r","113","                    sb.append(\"Using factory: \").append(factory.getClass().getName());\r","114","                    LOGGER.warn(sb.toString());\r","115","\r","116","                }\r","117","            } else {\r","118","                LOGGER.error(\"Log4j2 could not find a logging implementation. Please add log4j-core to the classpath. Using SimpleLogger to log to the console...\");\r","119","                factory = new SimpleLoggerContextFactory();\r","120","            }\r","121","        }\r","122","    }\r","123","\r","124","    \/**\r","125","     * Detects if a Logger with the specified name exists. This is a convenience method for porting from version 1.\r","126","     *\r","127","     * @param name\r","128","     *            The Logger name to search for.\r","129","     * @return true if the Logger exists, false otherwise.\r","130","     * @see LoggerContext#hasLogger(String)\r","131","     *\/\r","132","    public static boolean exists(final String name) {\r","133","        return getContext().hasLogger(name);\r","134","    }\r","135","\r","136","    \/**\r","137","     * Returns the current LoggerContext.\r","138","     * <p>\r","139","     * WARNING - The LoggerContext returned by this method may not be the LoggerContext used to create a Logger\r","140","     * for the calling class.\r","141","     * <\/p>\r","142","     * @return  The current LoggerContext.\r","143","     *\/\r","144","    public static LoggerContext getContext() {\r","145","        return factory.getContext(FQCN, null, null, true);\r","146","    }\r","147","\r","148","    \/**\r","149","     * Returns a LoggerContext.\r","150","     *\r","151","     * @param currentContext if false the LoggerContext appropriate for the caller of this method is returned. For\r","152","     * example, in a web application if the caller is a class in WEB-INF\/lib then one LoggerContext may be\r","153","     * returned and if the caller is a class in the container's classpath then a different LoggerContext may be\r","154","     * returned. If true then only a single LoggerContext will be returned.\r","155","     * @return a LoggerContext.\r","156","     *\/\r","157","    public static LoggerContext getContext(final boolean currentContext) {\r","158","        \/\/ TODO: would it be a terrible idea to try and find the caller ClassLoader here?\r","159","        return factory.getContext(FQCN, null, null, currentContext, null, null);\r","160","    }\r","161","\r","162","    \/**\r","163","     * Returns a LoggerContext.\r","164","     *\r","165","     * @param loader The ClassLoader for the context. If null the context will attempt to determine the appropriate\r","166","     * ClassLoader.\r","167","     * @param currentContext if false the LoggerContext appropriate for the caller of this method is returned. For\r","168","     * example, in a web application if the caller is a class in WEB-INF\/lib then one LoggerContext may be\r","169","     * returned and if the caller is a class in the container's classpath then a different LoggerContext may be\r","170","     * returned. If true then only a single LoggerContext will be returned.\r","171","     * @return a LoggerContext.\r","172","     *\/\r","173","    public static LoggerContext getContext(final ClassLoader loader, final boolean currentContext) {\r","174","        return factory.getContext(FQCN, loader, null, currentContext);\r","175","    }\r","176","\r","177","    \/**\r","178","     * Returns a LoggerContext.\r","179","     *\r","180","     * @param loader The ClassLoader for the context. If null the context will attempt to determine the appropriate\r","181","     * ClassLoader.\r","182","     * @param currentContext if false the LoggerContext appropriate for the caller of this method is returned. For\r","183","     * example, in a web application if the caller is a class in WEB-INF\/lib then one LoggerContext may be\r","184","     * returned and if the caller is a class in the container's classpath then a different LoggerContext may be\r","185","     * returned. If true then only a single LoggerContext will be returned.\r","186","     * @param externalContext An external context (such as a ServletContext) to be associated with the LoggerContext.\r","187","     * @return a LoggerContext.\r","188","     *\/\r","189","    public static LoggerContext getContext(final ClassLoader loader, final boolean currentContext,\r","190","                                           final Object externalContext) {\r","191","        return factory.getContext(FQCN, loader, externalContext, currentContext);\r","192","    }\r","193","\r","194","    \/**\r","195","     * Returns a LoggerContext.\r","196","     *\r","197","     * @param loader The ClassLoader for the context. If null the context will attempt to determine the appropriate\r","198","     * ClassLoader.\r","199","     * @param currentContext if false the LoggerContext appropriate for the caller of this method is returned. For\r","200","     * example, in a web application if the caller is a class in WEB-INF\/lib then one LoggerContext may be\r","201","     * returned and if the caller is a class in the container's classpath then a different LoggerContext may be\r","202","     * returned. If true then only a single LoggerContext will be returned.\r","203","     * @param configLocation The URI for the configuration to use.\r","204","     * @return a LoggerContext.\r","205","     *\/\r","206","    public static LoggerContext getContext(final ClassLoader loader, final boolean currentContext,\r","207","                                           final URI configLocation) {\r","208","        return factory.getContext(FQCN, loader, null, currentContext, configLocation, null);\r","209","    }\r","210","\r","211","\r","212","    \/**\r","213","     * Returns a LoggerContext.\r","214","     *\r","215","     * @param loader The ClassLoader for the context. If null the context will attempt to determine the appropriate\r","216","     * ClassLoader.\r","217","     * @param currentContext if false the LoggerContext appropriate for the caller of this method is returned. For\r","218","     * example, in a web application if the caller is a class in WEB-INF\/lib then one LoggerContext may be\r","219","     * returned and if the caller is a class in the container's classpath then a different LoggerContext may be\r","220","     * returned. If true then only a single LoggerContext will be returned.\r","221","     * @param externalContext An external context (such as a ServletContext) to be associated with the LoggerContext.\r","222","     * @param configLocation The URI for the configuration to use.\r","223","     * @return a LoggerContext.\r","224","     *\/\r","225","    public static LoggerContext getContext(final ClassLoader loader, final boolean currentContext,\r","226","                                           final Object externalContext, final URI configLocation) {\r","227","        return factory.getContext(FQCN, loader, externalContext, currentContext, configLocation, null);\r","228","    }\r","229","\r","230","\r","231","    \/**\r","232","     * Returns a LoggerContext.\r","233","     *\r","234","     * @param loader The ClassLoader for the context. If null the context will attempt to determine the appropriate\r","235","     * ClassLoader.\r","236","     * @param currentContext if false the LoggerContext appropriate for the caller of this method is returned. For\r","237","     * example, in a web application if the caller is a class in WEB-INF\/lib then one LoggerContext may be\r","238","     * returned and if the caller is a class in the container's classpath then a different LoggerContext may be\r","239","     * returned. If true then only a single LoggerContext will be returned.\r","240","     * @param externalContext An external context (such as a ServletContext) to be associated with the LoggerContext.\r","241","     * @param configLocation The URI for the configuration to use.\r","242","     * @param name The LoggerContext name.\r","243","     * @return a LoggerContext.\r","244","     *\/\r","245","    public static LoggerContext getContext(final ClassLoader loader, final boolean currentContext,\r","246","                                           final Object externalContext, final URI configLocation,\r","247","                                           final String name) {\r","248","        return factory.getContext(FQCN, loader, externalContext, currentContext, configLocation, name);\r","249","    }\r","250","\r","251","    \/**\r","252","     * Returns a LoggerContext\r","253","     * @param fqcn The fully qualified class name of the Class that this method is a member of.\r","254","     * @param currentContext if false the LoggerContext appropriate for the caller of this method is returned. For\r","255","     * example, in a web application if the caller is a class in WEB-INF\/lib then one LoggerContext may be\r","256","     * returned and if the caller is a class in the container's classpath then a different LoggerContext may be\r","257","     * returned. If true then only a single LoggerContext will be returned.\r","258","     * @return a LoggerContext.\r","259","     *\/\r","260","    protected static LoggerContext getContext(final String fqcn, final boolean currentContext) {\r","261","        return factory.getContext(fqcn, null, null, currentContext);\r","262","    }\r","263","\r","264","    \/**\r","265","     * Returns a LoggerContext\r","266","     * @param fqcn The fully qualified class name of the Class that this method is a member of.\r","267","     * @param loader The ClassLoader for the context. If null the context will attempt to determine the appropriate\r","268","     * ClassLoader.\r","269","     * @param currentContext if false the LoggerContext appropriate for the caller of this method is returned. For\r","270","     * example, in a web application if the caller is a class in WEB-INF\/lib then one LoggerContext may be\r","271","     * returned and if the caller is a class in the container's classpath then a different LoggerContext may be\r","272","     * returned. If true then only a single LoggerContext will be returned.\r","273","     * @return a LoggerContext.\r","274","     *\/\r","275","    protected static LoggerContext getContext(final String fqcn, final ClassLoader loader,\r","276","                                              final boolean currentContext) {\r","277","        return factory.getContext(fqcn, loader, null, currentContext);\r","278","    }\r","279","\r","280","    \/**\r","281","     * Returns the current LoggerContextFactory.\r","282","     * @return The LoggerContextFactory.\r","283","     *\/\r","284","    public static LoggerContextFactory getFactory() {\r","285","        return factory;\r","286","    }\r","287","\r","288","    \/**\r","289","     * Sets the current LoggerContextFactory to use. Normally, the appropriate LoggerContextFactory is created at\r","290","     * startup, but in certain environments, a LoggerContextFactory implementation may not be available at this point.\r","291","     * Thus, an alternative LoggerContextFactory can be set at runtime.\r","292","     *\r","293","     * <p>\r","294","     * Note that any Logger or LoggerContext objects already created will still be valid, but they will no longer be\r","295","     * accessible through LogManager. Thus, <strong>it is a bad idea to use this method without a good reason<\/strong>!\r","296","     * Generally, this method should be used only during startup before any code starts caching Logger objects.\r","297","     * <\/p>\r","298","     *\r","299","     * @param factory the LoggerContextFactory to use.\r","300","     *\/\r","301","    \/\/ FIXME: should we allow only one update of the factory?\r","302","    public static void setFactory(final LoggerContextFactory factory) {\r","303","        LogManager.factory = factory;\r","304","    }\r","305","\r","306","    \/**\r","307","     * Returns a formatter Logger using the fully qualified name of the calling Class as the Logger name.\r","308","     * <p>\r","309","     * This logger lets you use a {@link java.util.Formatter} string in the message to format parameters.\r","310","     * <\/p>\r","311","     * @return The Logger for the calling class.\r","312","     * @throws UnsupportedOperationException if the calling class cannot be determined.\r","313","     * @since 2.4\r","314","     *\/\r","315","    public static Logger getFormatterLogger() {\r","316","        return getFormatterLogger(ReflectionUtil.getCallerClass(2));\r","317","    }\r","318","\r","319","\r","320","    \/**\r","321","     * Returns a formatter Logger using the fully qualified name of the Class as the Logger name.\r","322","     * <p>\r","323","     * This logger let you use a {@link java.util.Formatter} string in the message to format parameters.\r","324","     * <\/p>\r","325","     * <p>\r","326","     * Short-hand for {@code getLogger(clazz, StringFormatterMessageFactory.INSTANCE)}\r","327","     * <\/p>\r","328","     *\r","329","     * @param clazz\r","330","     *            The Class whose name should be used as the Logger name.\r","331","     * @return The Logger, created with a {@link StringFormatterMessageFactory}\r","332","     * @throws UnsupportedOperationException if {@code clazz} is {@code null} and the calling class cannot be determined.\r","333","     * @see Logger#fatal(Marker, String, Object...)\r","334","     * @see Logger#fatal(String, Object...)\r","335","     * @see Logger#error(Marker, String, Object...)\r","336","     * @see Logger#error(String, Object...)\r","337","     * @see Logger#warn(Marker, String, Object...)\r","338","     * @see Logger#warn(String, Object...)\r","339","     * @see Logger#info(Marker, String, Object...)\r","340","     * @see Logger#info(String, Object...)\r","341","     * @see Logger#debug(Marker, String, Object...)\r","342","     * @see Logger#debug(String, Object...)\r","343","     * @see Logger#trace(Marker, String, Object...)\r","344","     * @see Logger#trace(String, Object...)\r","345","     * @see StringFormatterMessageFactory\r","346","     *\/\r","347","    public static Logger getFormatterLogger(final Class<?> clazz) {\r","348","        return getLogger(clazz != null ? clazz : ReflectionUtil.getCallerClass(2),\r","349","            StringFormatterMessageFactory.INSTANCE);\r","350","    }\r","351","\r","352","    \/**\r","353","     * Returns a formatter Logger using the fully qualified name of the value's Class as the Logger name.\r","354","     * <p>\r","355","     * This logger let you use a {@link java.util.Formatter} string in the message to format parameters.\r","356","     * <\/p>\r","357","     * <p>\r","358","     * Short-hand for {@code getLogger(value, StringFormatterMessageFactory.INSTANCE)}\r","359","     * <\/p>\r","360","     *\r","361","     * @param value\r","362","     *            The value's whose class name should be used as the Logger name.\r","363","     * @return The Logger, created with a {@link StringFormatterMessageFactory}\r","364","     * @throws UnsupportedOperationException if {@code value} is {@code null} and the calling class cannot be determined.\r","365","     * @see Logger#fatal(Marker, String, Object...)\r","366","     * @see Logger#fatal(String, Object...)\r","367","     * @see Logger#error(Marker, String, Object...)\r","368","     * @see Logger#error(String, Object...)\r","369","     * @see Logger#warn(Marker, String, Object...)\r","370","     * @see Logger#warn(String, Object...)\r","371","     * @see Logger#info(Marker, String, Object...)\r","372","     * @see Logger#info(String, Object...)\r","373","     * @see Logger#debug(Marker, String, Object...)\r","374","     * @see Logger#debug(String, Object...)\r","375","     * @see Logger#trace(Marker, String, Object...)\r","376","     * @see Logger#trace(String, Object...)\r","377","     * @see StringFormatterMessageFactory\r","378","     *\/\r","379","    public static Logger getFormatterLogger(final Object value) {\r","380","        return getLogger(value != null ? value.getClass() : ReflectionUtil.getCallerClass(2),\r","381","            StringFormatterMessageFactory.INSTANCE);\r","382","    }\r","383","\r","384","    \/**\r","385","     * Returns a formatter Logger with the specified name.\r","386","     * <p>\r","387","     * This logger let you use a {@link java.util.Formatter} string in the message to format parameters.\r","388","     * <\/p>\r","389","     * <p>\r","390","     * Short-hand for {@code getLogger(name, StringFormatterMessageFactory.INSTANCE)}\r","391","     * <\/p>\r","392","     *\r","393","     * @param name The logger name. If null it will default to the name of the calling class.\r","394","     * @return The Logger, created with a {@link StringFormatterMessageFactory}\r","395","     * @throws UnsupportedOperationException if {@code name} is {@code null} and the calling class cannot be determined.\r","396","     * @see Logger#fatal(Marker, String, Object...)\r","397","     * @see Logger#fatal(String, Object...)\r","398","     * @see Logger#error(Marker, String, Object...)\r","399","     * @see Logger#error(String, Object...)\r","400","     * @see Logger#warn(Marker, String, Object...)\r","401","     * @see Logger#warn(String, Object...)\r","402","     * @see Logger#info(Marker, String, Object...)\r","403","     * @see Logger#info(String, Object...)\r","404","     * @see Logger#debug(Marker, String, Object...)\r","405","     * @see Logger#debug(String, Object...)\r","406","     * @see Logger#trace(Marker, String, Object...)\r","407","     * @see Logger#trace(String, Object...)\r","408","     * @see StringFormatterMessageFactory\r","409","     *\/\r","410","    public static Logger getFormatterLogger(final String name) {\r","411","        return name == null ? getFormatterLogger(ReflectionUtil.getCallerClass(2)) : getLogger(name,\r","412","            StringFormatterMessageFactory.INSTANCE);\r","413","    }\r","414","\r","415","    \/**\r","416","     * Returns a Logger with the name of the calling class.\r","417","     * @return The Logger for the calling class.\r","418","     * @throws UnsupportedOperationException if the calling class cannot be determined.\r","419","     *\/\r","420","    public static Logger getLogger() {\r","421","        return getLogger(ReflectionUtil.getCallerClass(2));\r","422","    }\r","423","\r","424","    \/**\r","425","     * Returns a Logger using the fully qualified name of the Class as the Logger name.\r","426","     * @param clazz The Class whose name should be used as the Logger name. If null it will default to the calling\r","427","     *              class.\r","428","     * @return The Logger.\r","429","     * @throws UnsupportedOperationException if {@code clazz} is {@code null} and the calling class cannot be determined.\r","430","     *\/\r","431","    public static Logger getLogger(final Class<?> clazz) {\r","432","        if (clazz == null) {\r","433","            final Class<?> candidate = ReflectionUtil.getCallerClass(2);\r","434","            if (candidate == null) {\r","435","                throw new UnsupportedOperationException(\"No class provided, and an appropriate one cannot be found.\");\r","436","            }\r","437","            return getLogger(candidate);\r","438","        }\r","439","        return getContext(clazz.getClassLoader(), false).getLogger(clazz.getName());\r","440","    }\r","441","\r","442","    \/**\r","443","     * Returns a Logger using the fully qualified name of the Class as the Logger name.\r","444","     * @param clazz The Class whose name should be used as the Logger name. If null it will default to the calling\r","445","     *              class.\r","446","     * @param messageFactory The message factory is used only when creating a logger, subsequent use does not change\r","447","     *                       the logger but will log a warning if mismatched.\r","448","     * @return The Logger.\r","449","     * @throws UnsupportedOperationException if {@code clazz} is {@code null} and the calling class cannot be determined.\r","450","     *\/\r","451","    public static Logger getLogger(final Class<?> clazz, final MessageFactory messageFactory) {\r","452","        if (clazz == null) {\r","453","            final Class<?> candidate = ReflectionUtil.getCallerClass(2);\r","454","            if (candidate == null) {\r","455","                throw new UnsupportedOperationException(\"No class provided, and an appropriate one cannot be found.\");\r","456","            }\r","457","            return getLogger(candidate, messageFactory);\r","458","        }\r","459","        return getContext(clazz.getClassLoader(), false).getLogger(clazz.getName(), messageFactory);\r","460","    }\r","461","\r","462","    \/**\r","463","     * Returns a Logger with the name of the calling class.\r","464","     * @param messageFactory The message factory is used only when creating a logger, subsequent use does not change\r","465","     *                       the logger but will log a warning if mismatched.\r","466","     * @return The Logger for the calling class.\r","467","     * @throws UnsupportedOperationException if the calling class cannot be determined.\r","468","     *\/\r","469","    public static Logger getLogger(final MessageFactory messageFactory) {\r","470","        return getLogger(ReflectionUtil.getCallerClass(2), messageFactory);\r","471","    }\r","472","\r","473","    \/**\r","474","     * Returns a Logger using the fully qualified class name of the value as the Logger name.\r","475","     * @param value The value whose class name should be used as the Logger name. If null the name of the calling\r","476","     *              class will be used as the logger name.\r","477","     * @return The Logger.\r","478","     * @throws UnsupportedOperationException if {@code value} is {@code null} and the calling class cannot be determined.\r","479","     *\/\r","480","    public static Logger getLogger(final Object value) {\r","481","        return getLogger(value != null ? value.getClass() : ReflectionUtil.getCallerClass(2));\r","482","    }\r","483","\r","484","    \/**\r","485","     * Returns a Logger using the fully qualified class name of the value as the Logger name.\r","486","     * @param value The value whose class name should be used as the Logger name. If null the name of the calling\r","487","     *              class will be used as the logger name.\r","488","     * @param messageFactory The message factory is used only when creating a logger, subsequent use does not change\r","489","     *                       the logger but will log a warning if mismatched.\r","490","     * @return The Logger.\r","491","     * @throws UnsupportedOperationException if {@code value} is {@code null} and the calling class cannot be determined.\r","492","     *\/\r","493","    public static Logger getLogger(final Object value, final MessageFactory messageFactory) {\r","494","        return getLogger(value != null ? value.getClass() : ReflectionUtil.getCallerClass(2), messageFactory);\r","495","    }\r","496","\r","497","    \/**\r","498","     * Returns a Logger with the specified name.\r","499","     *\r","500","     * @param name The logger name. If null the name of the calling class will be used.\r","501","     * @return The Logger.\r","502","     * @throws UnsupportedOperationException if {@code name} is {@code null} and the calling class cannot be determined.\r","503","     *\/\r","504","    public static Logger getLogger(final String name) {\r","505","        return name != null ? getContext(false).getLogger(name) : getLogger(ReflectionUtil.getCallerClass(2));\r","506","    }\r","507","\r","508","    \/**\r","509","     * Returns a Logger with the specified name.\r","510","     *\r","511","     * @param name The logger name. If null the name of the calling class will be used.\r","512","     * @param messageFactory The message factory is used only when creating a logger, subsequent use does not change\r","513","     *                       the logger but will log a warning if mismatched.\r","514","     * @return The Logger.\r","515","     * @throws UnsupportedOperationException if {@code name} is {@code null} and the calling class cannot be determined.\r","516","     *\/\r","517","    public static Logger getLogger(final String name, final MessageFactory messageFactory) {\r","518","        return name != null ? getContext(false).getLogger(name, messageFactory) : getLogger(\r","519","            ReflectionUtil.getCallerClass(2), messageFactory);\r","520","    }\r","521","\r","522","    \/**\r","523","     * Returns a Logger with the specified name.\r","524","     *\r","525","     * @param fqcn The fully qualified class name of the class that this method is a member of.\r","526","     * @param name The logger name.\r","527","     * @return The Logger.\r","528","     *\/\r","529","    protected static Logger getLogger(final String fqcn, final String name) {\r","530","        return factory.getContext(fqcn, null, null, false).getLogger(name);\r","531","    }\r","532","\r","533","    \/**\r","534","     * Returns the root logger.\r","535","     *\r","536","     * @return the root logger, named {@link #ROOT_LOGGER_NAME}.\r","537","     *\/\r","538","    public static Logger getRootLogger() {\r","539","        return getLogger(ROOT_LOGGER_NAME);\r","540","    }\r","541","\r","542","    \/**\r","543","     * Prevents instantiation\r","544","     *\/\r","545","    protected LogManager() {\r","546","    }\r","547","\r","548","}\r"]}]}},"05f4941f8a08d21c7f334b7ba0d24d5d78b5ed5c":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/pattern\/StyleConverter.java":"MODIFY"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/pattern\/StyleConverter.java":[{"add":["18","import java.util.Arrays;","60","        final boolean noConsoleNoAnsi = Arrays.toString(options).contains(PatternParser.NO_CONSOLE_NO_ANSI + \"=true\");"],"delete":["59","        final boolean noConsoleNoAnsi = options.length > 2","60","                && (PatternParser.NO_CONSOLE_NO_ANSI + \"=true\").equals(options[2]);"]}]}},"7c56cf3c95149db2e3f9f3958aa4cfab37011896":{"changes":{"src\/changes\/changes.xml":"MODIFY","log4j-web\/pom.xml":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["24","      <action issue=\"LOG4J2-690\" dev=\"rgoers\" type=\"fix\" due-to=\"Philip Helger\">","25","        Log4j Web test dependencies should be in scope \"test\" in the pom.","26","      <\/action>","35","      <\/action>","38","      <\/action>","41","      <\/action>","44","      <\/action>"],"delete":["32","      <\/action>      ","35","      <\/action>      ","38","      <\/action>      ","41","      <\/action>      "]}],"log4j-web\/pom.xml":[{"add":["58","      <scope>test<\/scope>","63","      <scope>test<\/scope>","68","      <scope>test<\/scope>","73","      <scope>test<\/scope>"],"delete":[]}]}},"9db483101df1ffb61e627afcd5d35a21a7cb35c6":{"changes":{"log4j-taglib\/src\/test\/java\/org\/apache\/logging\/log4j\/taglib\/EnterTagTest.java":"MODIFY"},"diff":{"log4j-taglib\/src\/test\/java\/org\/apache\/logging\/log4j\/taglib\/EnterTagTest.java":[{"add":["71","            assertEquals(\"Incorrect message.\", \"o.a.l.l.t.EnterTagTest \" + expected, events.get(0));"],"delete":["71","            assertEquals(\"Incorrect message.\", \"o.a.l.l.t.EntryTagTest \" + expected, events.get(0));"]}]}},"992ed1e07a56797c60e8f2a0350a8307f766d74e":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/DefaultAsyncEventRouter.java":"ADD"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/DefaultAsyncEventRouter.java":[{"add":[],"delete":[]}]}},"445745c77487ee4ee85619561217cf748884188a":{"changes":{"src\/changes\/changes.xml":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["30","      <action issue=\"LOG4J2-686\" dev=\"ggregory\" type=\"fix\">","31","        Core's OptionConverter support for \\b is broken (affects PatternLayout).","32","      <\/action>      "],"delete":[]}]}},"aeb6fc9df62c314fb80c325f9a44d059004be00b":{"changes":{"api\/src\/test\/java\/org\/apache\/logging\/log4j\/message\/MapMessageTest.java":"MODIFY","src\/changes\/changes.xml":"MODIFY","api\/src\/main\/java\/org\/apache\/logging\/log4j\/message\/MapMessage.java":"MODIFY"},"diff":{"api\/src\/test\/java\/org\/apache\/logging\/log4j\/message\/MapMessageTest.java":[{"add":["45","        final String expected = \"<Map>\\n  <Entry key=\\\"message\\\">Test message {}<\/Entry>\\n\" +","46","            \"  <Entry key=\\\"project\\\">Log4j<\/Entry>\\n\" +"],"delete":["45","        final String expected = \"<Map>\\n  <Entry key=message>Test message {}<\/Entry>\\n\" +","46","            \"  <Entry key=project>Log4j<\/Entry>\\n\" +"]}],"src\/changes\/changes.xml":[{"add":["25","      <action issue=\"LOG4J2-210\" dev=\"rgoers\" type=\"fix\" due-to=\"Arkin Yetis\">","26","        MapMessage was not enclosing key value in quotes when generating XML.","27","      <\/action>"],"delete":[]}],"api\/src\/main\/java\/org\/apache\/logging\/log4j\/message\/MapMessage.java":[{"add":["195","            sb.append(\"  <Entry key=\\\"\").append(entry.getKey()).append(\"\\\">\").append(entry.getValue()).append(\"<\/Entry>\\n\");"],"delete":["195","            sb.append(\"  <Entry key=\").append(entry.getKey()).append(\">\").append(entry.getValue()).append(\"<\/Entry>\\n\");"]}]}},"50340d0c5888787e3504c3ef6bbb95db56522ddb":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/web\/Log4jWebInitializerImpl.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/lookup\/Interpolator.java":"MODIFY","log4j-core\/src\/test\/resources\/log4j-test2.xml":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/config\/BaseConfiguration.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/LoggerContext.java":"MODIFY","src\/changes\/changes.xml":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/HostNameTest.java":"ADD","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/config\/plugins\/PropertiesPlugin.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/LoggerTest.java":"MODIFY"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/web\/Log4jWebInitializerImpl.java":[{"add":["19","import java.util.Map;","20","import java.util.concurrent.ConcurrentHashMap;","27","import org.apache.logging.log4j.core.helpers.NetUtils;","53","    private final Map<String, String> map = new ConcurrentHashMap<String, String>();","54","    private final StrSubstitutor substitutor = new StrSubstitutor(new Interpolator(map));","66","        map.put(\"hostName\", NetUtils.getLocalHostname());"],"delete":["50","    private final StrSubstitutor substitutor = new StrSubstitutor(new Interpolator());"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/lookup\/Interpolator.java":[{"add":["62","        this((Map<String, String>) null);","63","    }","64","","65","    \/**","66","     * Create the dInterpolator using only Lookups that work without an event and initial properties.","67","     *\/","68","    public Interpolator(Map<String, String> properties) {","69","        this.defaultLookup = new MapLookup(properties == null ? new HashMap<String, String>() : properties);"],"delete":["62","        this.defaultLookup = new MapLookup(new HashMap<String, String>());"]}],"log4j-core\/src\/test\/resources\/log4j-test2.xml":[{"add":["43","    <File name=\"File\" fileName=\"target\/test.log\">"],"delete":["19","  <Properties>","20","    <Property name=\"filename\">target\/test.log<\/Property>","21","  <\/Properties>","22","  <ThresholdFilter level=\"trace\"\/>","23","","48","    <File name=\"File\" fileName=\"${filename}\">"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/config\/BaseConfiguration.java":[{"add":["106","    private ConcurrentMap<String, String> properties = new ConcurrentHashMap<String, String>();","107","","108","    private final StrLookup tempLookup = new Interpolator(properties);","124","        componentMap.put(Configuration.CONTEXT_PROPERTIES, properties);","132","        return properties;"],"delete":["106","    private final StrLookup tempLookup = new Interpolator();","129","        return (Map<String, String>) componentMap.get(CONTEXT_PROPERTIES);"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/LoggerContext.java":[{"add":["336","        final ConcurrentMap<String, String> map = config.getComponent(Configuration.CONTEXT_PROPERTIES);","337","        map.putIfAbsent(\"hostName\", NetUtils.getLocalHostname());","338","        map.putIfAbsent(\"contextName\", name);"],"delete":["336","        final Map<String, String> map = new HashMap<String, String>();","337","        map.put(\"hostName\", NetUtils.getLocalHostname());","338","        map.put(\"contextName\", name);","339","        config.addComponent(Configuration.CONTEXT_PROPERTIES, map);"]}],"src\/changes\/changes.xml":[{"add":["23","      <action issue=\"LOG4J2-470\" dev=\"rgoers\" type=\"fix\">","24","        hostName property was not being set until after the first configuration element.","25","      <\/action>"],"delete":[]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/HostNameTest.java":[{"add":[],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/config\/plugins\/PropertiesPlugin.java":[{"add":["46","            return new Interpolator(config.getProperties());"],"delete":["46","            return new Interpolator(null);"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/LoggerTest.java":[{"add":[],"delete":["56","    private static RollingFileAppender hostFile;","83","            } else if (entry.getKey().equals(\"HostFile\")) {","84","                hostFile = (RollingFileAppender) entry.getValue();","89","        assertNotNull(\"No Host FileAppender\", hostFile);","188","    public void testHostname() {","189","        final org.apache.logging.log4j.Logger testLogger = LogManager.getLogger(\"org.apache.logging.log4j.hosttest\");","190","        testLogger.debug(\"Hello, {}\", \"World\");","191","        final List<String> msgs = host.getMessages();","192","        assertTrue(\"Incorrect number of events. Expected 1, actual \" + msgs.size(), msgs.size() == 1);","193","        String expected = NetUtils.getLocalHostname() + Constants.LINE_SEP;","194","        assertTrue(\"Incorrect hostname - expected \" + expected + \" actual - \" + msgs.get(0),","195","            msgs.get(0).endsWith(expected));","196","        assertNotNull(\"No Host FileAppender file name\", hostFile.getFileName());","197","        expected = \"target\/\" + NetUtils.getLocalHostname() + \".log\";","198","        String name = hostFile.getFileName();","199","        assertTrue(\"Incorrect HostFile FileAppender file name - expected \" + expected + \" actual - \" + name,","200","            name.equals(expected));","201","        name = hostFile.getFilePattern();","202","        assertNotNull(\"No file pattern\", name);","203","        expected = \"target\/\" + NetUtils.getLocalHostname() + \"-%d{MM-dd-yyyy}-%i.log\";","204","        assertTrue(\"Incorrect HostFile FileAppender file pattern - expected \" + expected + \" actual - \" + name,","205","            name.equals(expected));","206","","207","    }","208","","209","    @Test"]}]}},"eecc561b8b6f0c8c3ec8b48adedf8adf4b8b1cbe":{"changes":{"flume-ng\/src\/test\/resources\/default_embedded.xml":"MODIFY","flume-ng\/src\/test\/resources\/persistent.xml":"MODIFY","core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/config\/BaseConfiguration.java":"MODIFY","flume-ng\/src\/test\/resources\/embedded.xml":"MODIFY","src\/changes\/changes.xml":"MODIFY","core\/src\/test\/resources\/log4j-failover.xml":"MODIFY","core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/LoggerTest.java":"MODIFY"},"diff":{"flume-ng\/src\/test\/resources\/default_embedded.xml":[{"add":["13","    <logger name=\"EventLogger\" level=\"info\" additivity=\"false\">"],"delete":["13","    <logger name=\"EventLogger\" level=\"info\">"]}],"flume-ng\/src\/test\/resources\/persistent.xml":[{"add":["16","    <logger name=\"EventLogger\" level=\"info\" additivity=\"false\">"],"delete":["16","    <logger name=\"EventLogger\" level=\"info\">"]}],"core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/config\/BaseConfiguration.java":[{"add":["782","                } else {","783","                    logger.setParent(root);"],"delete":[]}],"flume-ng\/src\/test\/resources\/embedded.xml":[{"add":["29","    <logger name=\"EventLogger\" level=\"info\" additivity=\"false\">"],"delete":["29","    <logger name=\"EventLogger\" level=\"info\">"]}],"src\/changes\/changes.xml":[{"add":["25","      <action issue=\"LOG4J2-212\" dev=\"rgoers\" type=\"fix\">","26","        Loggers without a \".\" had no parent logger.","27","      <\/action>"],"delete":[]}],"core\/src\/test\/resources\/log4j-failover.xml":[{"add":["36","    <logger name=\"Once\" level=\"error\" additivity=\"false\">"],"delete":["36","    <logger name=\"Once\" level=\"error\" additvity=\"false\">"]}],"core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/LoggerTest.java":[{"add":["261","        localLogger.error(\"Test parent additivity\");","262","        final List<LogEvent> events = app.getEvents();","263","        assertTrue(\"Incorrect number of events. Expected 1, actual \" + events.size(), events.size() == 1);"],"delete":["261",""]}]}},"db6ef306c50fb2f1695d6d20f3dd180fbedb1a76":{"changes":{"src\/changes\/changes.xml":"MODIFY","log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/util\/ProcessIdUtil.java":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["32","    <release version=\"2.10.1\" date=\"2017-xx-xx\" description=\"GA Release 2.10.1\">","33","      <action issue=\"LOG4J2-2126\" dev=\"rpopma\" type=\"fix\" due-to=\"Oleg Kalnichevski\">","34","        Removed compile-time dependency on Java Management APIs from Log4J API module to improve compatibility with Android Platform which does not support JMX extensions.","35","      <\/action>","36","    <\/release>"],"delete":[]}],"log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/util\/ProcessIdUtil.java":[{"add":["20","import java.lang.reflect.Method;","31","            \/\/ LOG4J2-2126 use reflection to improve compatibility with Android Platform which does not support JMX extensions","32","            Class<?> managementFactoryClass = Class.forName(\"java.lang.management.ManagementFactory\");","33","            Method getRuntimeMXBean = managementFactoryClass.getDeclaredMethod(\"getRuntimeMXBean\");","34","            Class<?> runtimeMXBeanClass = Class.forName(\"java.lang.management.RuntimeMXBean\");","35","            Method getName = runtimeMXBeanClass.getDeclaredMethod(\"getName\");","36","","37","            Object runtimeMXBean = getRuntimeMXBean.invoke(null);","38","            String name = (String) getName.invoke(runtimeMXBean);","39","            \/\/String name = ManagementFactory.getRuntimeMXBean().getName(); \/\/JMX not allowed on Android","40","            return name.split(\"@\")[0]; \/\/ likely works on most platforms"],"delete":["20","import java.lang.management.ManagementFactory;","31","            return ManagementFactory.getRuntimeMXBean().getName().split(\"@\")[0]; \/\/ likely works on most platforms"]}]}},"7c4e748d6e2569f758404511a646adeaf068c3a1":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/web\/Log4jWebInitializerImpl.java":"MODIFY","src\/changes\/changes.xml":"MODIFY","src\/site\/site.xml":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/web\/Log4jWebInitializerImplTest.java":"MODIFY","src\/site\/xdoc\/manual\/webapp.xml":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/web\/Log4jWebSupport.java":"MODIFY"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/web\/Log4jWebInitializerImpl.java":[{"add":["81","            final String location =","82","                    this.substitutor.replace(this.servletContext.getInitParameter(LOG4J_CONFIG_LOCATION));","83","            final boolean isJndi =","84","                    \"true\".equalsIgnoreCase(this.servletContext.getInitParameter(IS_LOG4J_CONTEXT_SELECTOR_NAMED));","183","    @Override","184","    public void wrapExecution(Runnable runnable) {","185","        this.setLoggerContext();","186","","187","        try {","188","            runnable.run();","189","        } finally {","190","            this.clearLoggerContext();","191","        }","192","    }","193",""],"delete":["81","            final String location = this.substitutor.replace(this.servletContext.getInitParameter(LOG4J_CONFIG_LOCATION));","82","            final boolean isJndi = \"true\".equals(this.servletContext.getInitParameter(IS_LOG4J_CONTEXT_SELECTOR_NAMED));"]}],"src\/changes\/changes.xml":[{"add":["23","      <action issue=\"LOG4J2-452\" dev=\"nickwilliams\" type=\"fix\">"],"delete":["23","      <action issue=\"LOG4J2-452\" dev=\"nickwilliams\" type=\"fix\" due-to=\"\">"]}],"src\/site\/site.xml":[{"add":["67","        <item name=\"Configuration Lookups\" href=\"\/manual\/webapp.html#WebLookup\" \/>","69","        <item name=\"Asynchronous Requests\" href=\"\/manual\/webapp.html#Async\" \/>"],"delete":["67","        <item name=\"Configuration\" href=\"\/manual\/webapp.html#WebLookup\" \/>"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/web\/Log4jWebInitializerImplTest.java":[{"add":["24","import org.easymock.IAnswer;","420","","421","    @Test","422","    public void testWrapExecutionWithNoParameters() throws Exception {","423","        Capture<Object> loggerContextCapture = new Capture<Object>();","424","","425","        expect(this.servletContext.getInitParameter(Log4jWebSupport.LOG4J_CONTEXT_NAME)).andReturn(null);","426","        expect(this.servletContext.getInitParameter(Log4jWebSupport.LOG4J_CONFIG_LOCATION)).andReturn(null);","427","        expect(this.servletContext.getInitParameter(Log4jWebSupport.IS_LOG4J_CONTEXT_SELECTOR_NAMED))","428","                .andReturn(null);","429","        expect(this.servletContext.getServletContextName()).andReturn(\"helloWorld01\");","430","        this.servletContext.setAttribute(eq(Log4jWebSupport.CONTEXT_ATTRIBUTE), capture(loggerContextCapture));","431","        expectLastCall();","432","","433","        replay(this.servletContext);","434","","435","        assertNull(\"The context should be null.\", ContextAnchor.THREAD_CONTEXT.get());","436","","437","        this.initializer.initialize();","438","","439","        assertNotNull(\"The context attribute should not be null.\", loggerContextCapture.getValue());","440","        assertTrue(\"The context attribute is not correct.\",","441","                loggerContextCapture.getValue() instanceof org.apache.logging.log4j.spi.LoggerContext);","442","        final org.apache.logging.log4j.spi.LoggerContext loggerContext =","443","                (org.apache.logging.log4j.spi.LoggerContext)loggerContextCapture.getValue();","444","","445","        verify(this.servletContext);","446","        reset(this.servletContext);","447","","448","        assertNull(\"The context should still be null.\", ContextAnchor.THREAD_CONTEXT.get());","449","","450","        Runnable runnable = createStrictMock(Runnable.class);","451","        runnable.run();","452","        expectLastCall().andAnswer(new IAnswer<Void>() {","453","            @Override","454","            public Void answer() {","455","                final LoggerContext context = ContextAnchor.THREAD_CONTEXT.get();","456","                assertNotNull(\"The context should not be null.\", context);","457","                assertSame(\"The context is not correct.\", loggerContext, context);","458","                return null;","459","            }","460","        });","461","","462","        replay(this.servletContext, runnable);","463","","464","        this.initializer.wrapExecution(runnable);","465","","466","        assertNull(\"The context should be null again.\", ContextAnchor.THREAD_CONTEXT.get());","467","","468","        verify(this.servletContext, runnable);","469","        reset(this.servletContext);","470","","471","        this.servletContext.log(anyObject(String.class));","472","        expectLastCall();","473","        this.servletContext.removeAttribute(Log4jWebSupport.CONTEXT_ATTRIBUTE);","474","        expectLastCall();","475","","476","        replay(this.servletContext);","477","","478","        this.initializer.deinitialize();","479","","480","        verify(this.servletContext);","481","        reset(this.servletContext);","482","        replay(this.servletContext);","483","","484","        assertNull(\"The context should again still be null.\", ContextAnchor.THREAD_CONTEXT.get());","485","","486","        this.initializer.setLoggerContext();","487","","488","        assertNull(\"The context should finally still be null.\", ContextAnchor.THREAD_CONTEXT.get());","489","    }"],"delete":[]}],"src\/site\/xdoc\/manual\/webapp.xml":[{"add":["69","          For some users, automatically starting Log4j is problematic or undesirable. You can easily disable this","70","          feature using the <code>isLog4jAutoInitializationDisabled<\/code> context parameter. Simply add it to your","71","          deployment descriptor with the value \"true\" to disable auto-initialization. You <em>must<\/em> define the","72","          context parameter in <code>web.xml<\/code>. If you set in programmatically, it will be too late for Log4j","73","          to detect the setting.","74","          <pre class=\"prettyprint linenums\"><![CDATA[    <context-param>","75","        <param-name>isLog4jAutoInitializationDisabled<\/param-name>","76","        <param-value>true<\/param-value>","77","    <\/context-param>]]><\/pre>","78","        <\/p>","79","        <p>","80","          Once you disable auto-initialization, you must initialize Log4j as you would a","81","          <a href=\"#Servlet-2.5\">Servlet 2.5 web application<\/a>. You must do so in a way that this initialization","82","          happens before any other application code (such as Spring Framework startup code) executes.","83","        <\/p>","84","        <p>","90","          application <em>unless you disable auto-initialization<\/em> with","91","          <code>isLog4jAutoInitializationDisabled<\/code>. Doing so will result in startup errors and unspecified","92","          erroneous behavior.","105","          If you are using Log4j in a Servlet 2.5 web application, or if you have disabled auto-initialization with","106","          the <code>isLog4jAutoInitializationDisabled<\/code> context parameter, you <em>must<\/em> configure the","110","            >Log4jServletFilter<\/a> in the deployment descriptor or programmatically. The filter should match all","111","          requests of any type. The listener should be the very first listener defined in your application, and the","112","          filter should be the very first filter defined and mapped in your application. This is easily accomplished","113","          using the following <code>web.xml<\/code> code:","129","        <dispatcher>ASYNC<\/dispatcher><!-- Servlet 3.0 w\/ disabled auto-initialization only; not supported in 2.5 -->","200","      <subsection name=\"Using Web Application Information During the Configuration\">","202","          You may want to use information about the web application during configuration. For example, you could embed","203","          the web application's context path in the name of a Rolling File Appender. See WebLookup in","204","          <a href=\".\/lookups.html#WebLookup\">Lookups<\/a> for more information.","230","      <a name=\"Async\" \/>","231","      <subsection name=\"Asynchronous Requests and Threads\">","232","        <p>","233","          The handling of asynchronous requests is tricky, and regardless of Servlet container version or configuration","234","          Log4j cannot handle everything automatically. When standard requests, forwards, includes, and error resources","235","          are processed, the <code>Log4jServletFilter<\/code> binds the <code>LoggerContext<\/code> to the thread handling","236","          the request. After request processing completes, the filter unbinds the <code>LoggerContext<\/code> from the","237","          thread.","238","        <\/p>","239","        <p>","240","          Similarly, when an internal request is dispatched using a <code>javax.servlet.AsyncContext<\/code>, the","241","          <code>Log4jServletFilter<\/code> also binds the <code>LoggerContext<\/code> to the thread handling the request","242","          and unbinds it when request processing completes. However, this only happens for requests <em>dispatched<\/em>","243","          through the <code>AsyncContext<\/code>. There are other asynchronous activities that can take place other than","244","          internal dispatched requests.","245","        <\/p>","246","        <p>","247","          For example, after starting an <code>AsyncContext<\/code> you could start up a separate thread to process the","248","          request in the background, possibly writing the response with the <code>ServletOutputStream<\/code>. Filters","249","          cannot intercept the execution of this thread. Filters also cannot intercept threads that you start in","250","          the background during non-asynchronous requests. This is true whether you use a brand new thread or a thread","251","          borrowed from a thread pool. So what can you do for these special threads?","252","        <\/p>","253","        <p>","254","          You may not need to do anything. If you didn't use the <code>isLog4jContextSelectorNamed<\/code> context","255","          parameter, there is no need to bind the <code>LoggerContext<\/code> to the thread. Log4j can safely locate the","256","          <code>LoggerContext<\/code> on its own. In these cases, the filter provides only very modest performance","257","          gains, and only when creating new <code>Logger<\/code>s. However, if you <em>did<\/em> specify the","258","          <code>isLog4jContextSelectorNamed<\/code> context parameter with the value \"true\", you will need to manually","259","          bind the <code>LoggerContext<\/code> to asynchronous threads. Otherwise, Log4j will not be able to locate it.","260","        <\/p>","261","        <p>","262","          Thankfully, Log4j provides a simple mechanism for binding the <code>LoggerContext<\/code> to asynchronous","263","          threads in these special circumstances. The key is to obtain a","264","          <a href=\"..\/log4j-core\/apidocs\/org\/apache\/logging\/log4j\/core\/web\/Log4jWebSupport.html\"","265","              >Log4jWebSupport<\/a> instance from the <code>ServletContext<\/code> attributes, call its","266","          <code>setLoggerContext<\/code> method as the very first line of code in your asynchronous thread, and call","267","          its <code>clearLoggerContext<\/code> method as the very last line of code in your asynchronous thread. The","268","          following code demonstrates this. It uses the container thread pool to execute asynchronous request","269","          processing, passing an anonymous inner <code>Runnable<\/code> to the <code>start<\/code> method.","270","          <pre class=\"prettyprint linenums\"><![CDATA[public class AsyncServlet extends HttpServlet","271","{","272","    @Override","273","    protected void doGet(HttpServletRequest request, HttpServletResponse response)","274","            throws ServletException, IOException","275","    {","276","        final AsyncContext context = request.startAsync(request, response);","277","        context.setTimeout(timeout);","278","        context.start(new Runnable() {","279","            @Override","280","            public void run() {","281","                Log4jWebSupport support = (Log4jWebSupport)this.getServletContext()","282","                        .getAttribute(Log4jWebSupport.SUPPORT_ATTRIBUTE);","283","                support.setLoggerContext();","284","","285","                try {","286","                    \/\/ miscellaneous asynchronous request handling","287","                } finally {","288","                    support.clearLoggerContext();","289","                }","290","            }","291","        });","292","    }","293","}]]><\/pre>","294","        <\/p>","295","        <p>","296","          Note that you <em>must<\/em> call <code>clearLoggerContext<\/code> once your thread is finished","297","          processing. Failing to do so will result in memory leaks. If using a thread pool, it can even disrupt the","298","          logging of other web applications in your container. For that reason, the example here shows clearing the","299","          context in a <code>finally<\/code> block, which will always execute. As a shortcut, you can use the","300","          <code>wrapExecution<\/code> method, which takes care of setting the context, executing the code you pass in,","301","          and clearing the context in a finally black. This is especially convenient when using Java 8 lambdas.","302","          <pre class=\"prettyprint linenums\"><![CDATA[public class AsyncServlet extends HttpServlet","303","{","304","    @Override","305","    protected void doGet(HttpServletRequest request, HttpServletResponse response)","306","            throws ServletException, IOException","307","    {","308","        final AsyncContext context = request.startAsync(request, response);","309","        context.setTimeout(timeout);","310","        context.start(() => {","311","            Log4jWebSupport support = (Log4jWebSupport)this.getServletContext()","312","                    .getAttribute(Log4jWebSupport.SUPPORT_ATTRIBUTE);","313","            support.wrapExecution(() => {","314","                \/\/ miscellaneous asynchronous request handling","315","            });","316","        });","317","    }","318","}]]><\/pre>","319","        <\/p>","320","      <\/subsection>"],"delete":["74","          application. Doing so will result in startup errors and unspecified erroneous behavior.","87","          If you are using Log4j in a Servlet 2.5 web application, you <em>must<\/em> configure the","91","            >Log4jServletFilter<\/a> in the deployment descriptor. The filter should match all requests of any type. The","92","          listener should be the very first listener defined in the deployment descriptor, and the filter should be the","93","          very first filter defined and mapped in the deployment descriptor. This is easily accomplished using the","94","          following <code>web.xml<\/code> code:","180","      <subsection name=\"Using Web Application information during the configuration\">","182","            You may want to use information about the web application during configuration.  For example, you could","183","            embed the web application's context path in the name of a Rolling File Appender.  ","184","            See WebLookup in <a href=\".\/lookups.html#WebLookup\">Lookups<\/a> for more information."]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/web\/Log4jWebSupport.java":[{"add":["58","     * Clears the logger context set up in {@link #setLoggerContext}.","61","","62","    \/**","63","     * Sets the logger context by calling {@link #setLoggerContext}, executes the runnable argument, then clears the","64","     * logger context by calling {@link #clearLoggerContext}.","65","     *","66","     * @param runnable The runnable to execute wrapped with a configured logger context","67","     *\/","68","    void wrapExecution(Runnable runnable);"],"delete":["58","     * Clears the logger context set up in {@link #setLoggerContext()}."]}]}},"69dded271e1b0a2779eff4d0868412fed2c0f60b":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/config\/plugins\/ResolverUtil.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/config\/plugins\/ResolverUtilTest.java":"ADD","src\/changes\/changes.xml":"MODIFY"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/config\/plugins\/ResolverUtil.java":[{"add":["22","import java.io.UnsupportedEncodingException;","27","import java.util.Arrays;","31","import java.util.List;","242","                String urlPath = extractPath(url);","272","    String extractPath(final URL url) throws UnsupportedEncodingException {","273","        String urlPath = url.getPath(); \/\/ same as getFile but without the Query portion","274","        \/\/System.out.println(url.getProtocol() + \"->\" + urlPath);","275","        ","276","        \/\/ I would be surprised if URL.getPath() ever starts with \"jar:\" but no harm in checking","277","        if (urlPath.startsWith(\"jar:\")) {","278","            urlPath = urlPath.substring(4);","279","        }","280","        \/\/ For jar: URLs, the path part starts with \"file:\"","281","        if (urlPath.startsWith(\"file:\")) {","282","            urlPath = urlPath.substring(5);","283","        }","284","        \/\/ If it was in a JAR, grab the path to the jar","285","        if (urlPath.indexOf('!') > 0) {","286","            urlPath = urlPath.substring(0, urlPath.indexOf('!'));","287","        }","288","        ","289","        \/\/ LOG4J2-445","290","        \/\/ Finally, decide whether to URL-decode the file name or not...","291","        final String protocol = url.getProtocol();","292","        final List<String> neverDecode = Arrays.asList(VFSZIP, BUNDLE_RESOURCE);","293","        if (neverDecode.contains(protocol)) {","294","            return urlPath;","295","        }","296","        if (new File(urlPath).exists()) {","297","            \/\/ if URL-encoded file exists, don't decode it","298","            return urlPath;","299","        }","300","        urlPath = URLDecoder.decode(urlPath, Charsets.UTF_8.name());","301","        return urlPath;","302","    }","303",""],"delete":["239","                String urlPath = url.getFile();","240","                urlPath = URLDecoder.decode(urlPath, Charsets.UTF_8.name());","241","","242","                \/\/ If it's a file in a directory, trim the stupid file: spec","243","                if (urlPath.startsWith(\"file:\")) {","244","                    urlPath = urlPath.substring(5);","245","                }","246","","247","                \/\/ Else it's in a JAR, grab the path to the jar","248","                if (urlPath.indexOf('!') > 0) {","249","                    urlPath = urlPath.substring(0, urlPath.indexOf('!'));","250","                }"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/config\/plugins\/ResolverUtilTest.java":[{"add":[],"delete":[]}],"src\/changes\/changes.xml":[{"add":["23","      <action issue=\"LOG4J2-445\" dev=\"rpopma\" type=\"fix\" due-to=\"Anthony Baldocchi\">","24","        ResolverUtil cannot find packages in file URLs which include the '+' character.","25","      <\/action>"],"delete":[]}]}},"ec34bd2f1ebc34bc80cde64d51ec6060d7bd250e":{"changes":{"log4j-to-slf4j\/src\/main\/java\/org\/apache\/logging\/slf4j\/MDCContextMap.java":"MODIFY","log4j-to-slf4j\/src\/test\/java\/org\/apache\/logging\/slf4j\/LoggerTest.java":"MODIFY"},"diff":{"log4j-to-slf4j\/src\/main\/java\/org\/apache\/logging\/slf4j\/MDCContextMap.java":[{"add":["73","        Map<String, String> map = MDC.getCopyOfContextMap();","74","        return map != null && map.containsKey(key);","91","        Map<String, String> map = MDC.getCopyOfContextMap();","92","        return map == null || map.isEmpty();"],"delete":["73","        return MDC.getCopyOfContextMap().containsKey(key);","90","        return MDC.getCopyOfContextMap().isEmpty();"]}],"log4j-to-slf4j\/src\/test\/java\/org\/apache\/logging\/slf4j\/LoggerTest.java":[{"add":["35","import org.slf4j.MDC;","187","    @Test","188","    public void mdcNullBackedIsEmpty() {","189","        assertNull(\"Setup wrong\", MDC.getCopyOfContextMap());","190","        assertTrue(ThreadContext.isEmpty());","191","    }","192","","193","    @Test","194","    public void mdcNullBackedContainsKey() {","195","        assertNull(\"Setup wrong\", MDC.getCopyOfContextMap());","196","        assertFalse(ThreadContext.containsKey(\"something\"));","197","    }","198","","199","    @Test","200","    public void mdcNullBackedContainsNullKey() {","201","        assertNull(\"Setup wrong\", MDC.getCopyOfContextMap());","202","        assertFalse(ThreadContext.containsKey(null));","203","    }","204","","205","    @Test","206","    public void mdcContainsNullKey() {","207","        try {","208","            ThreadContext.put(\"some\", \"thing\");","209","            assertNotNull(\"Setup wrong\", MDC.getCopyOfContextMap());","210","            assertFalse(ThreadContext.containsKey(null));","211","        } finally {","212","            ThreadContext.clearMap();","213","        }","214","    }","215","","216","    @Test","217","    public void mdcCannotContainNullKey() {","218","        try {","219","            ThreadContext.put(null, \"something\");","220","            fail(\"should throw\");","221","        } catch (IllegalArgumentException | NullPointerException e) {","222","            \/\/ expected","223","        }","224","    }","225","}"],"delete":["185","}"]}]}},"4d3b58a68762dc763099044d9a87fbd92a8b32f7":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jmx\/Server.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jmx\/LoggerConfigAdmin.java":"MODIFY","src\/changes\/changes.xml":"MODIFY"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jmx\/Server.java":[{"add":["322","            final LoggerConfigAdmin mbean = new LoggerConfigAdmin(ctx, cfg);"],"delete":["322","            final LoggerConfigAdmin mbean = new LoggerConfigAdmin(ctx.getName(), cfg);"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jmx\/LoggerConfigAdmin.java":[{"add":["23","import org.apache.logging.log4j.core.LoggerContext;","33","    private final LoggerContext loggerContext;","44","    public LoggerConfigAdmin(final LoggerContext loggerContext, final LoggerConfig loggerConfig) {","46","        this.loggerContext = Assert.requireNonNull(loggerContext, \"loggerContext\");","49","            final String ctxName = Server.escape(loggerContext.getName());","81","        loggerContext.updateLoggers();","92","        loggerContext.updateLoggers();"],"delete":["32","    private final String contextName;","43","    public LoggerConfigAdmin(final String contextName, final LoggerConfig loggerConfig) {","45","        this.contextName = Assert.requireNonNull(contextName, \"contextName\");","48","            final String ctxName = Server.escape(this.contextName);"]}],"src\/changes\/changes.xml":[{"add":["24","      <action issue=\"LOG4J2-637\" dev=\"rpopma\" type=\"fix\" due-to=\"Mansoor Sajjad, Jon Wilmoth\">","25","        JMX: Updating a Logger's level via jConsole now correctly takes effect.","26","      <\/action>"],"delete":[]}]}},"d310dd49002d394967a6f6d597bd891a5d6c4d3b":{"changes":{"src\/changes\/changes.xml":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/impl\/ThrowableProxy.java":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["33","      <action issue=\"LOG4J2-2389\" dev=\"rgoers\" type=\"fix\" due-to=\"Liu Wen\">","34","        ThrowableProxy was saving and retrieving cache entries using different keys.","35","      <\/action>"],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/impl\/ThrowableProxy.java":[{"add":["740","                    map.put(className, entry);"],"delete":["740","                    map.put(stackTraceElement.toString(), entry);"]}]}},"f5571691b87d267d1bed3fa8fd86c7441bf5e3b7":{"changes":{"src\/changes\/changes.xml":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/db\/AbstractDatabaseManager.java":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["24","      <action issue=\"LOG4J2-657\" dev=\"popmarem\" type=\"fix\" due-to=\"Stefan Wehner\">","25","        Fixed AbstractDatabaseManager to close connection on writeInternal error.","26","      <\/action>"],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/db\/AbstractDatabaseManager.java":[{"add":["137","            try {","138","                for (final LogEvent event : this.buffer) {","139","                    this.writeInternal(event);","140","                }","141","            } finally {","142","                this.commitAndClose();","143","                \/\/ not sure if this should be done when writing the events failed","144","                this.buffer.clear();","162","            try {","163","                this.writeInternal(event);","164","            } finally {","165","                this.commitAndClose();","166","            }"],"delete":["137","            for (final LogEvent event : this.buffer) {","138","                this.writeInternal(event);","140","            this.commitAndClose();","141","            this.buffer.clear();","158","            this.writeInternal(event);","159","            this.commitAndClose();"]}]}},"794c4691185b56ad9faa75a5bf269ded00dfaa53":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/config\/ConfigurationFactory.java":"MODIFY","src\/changes\/changes.xml":"MODIFY"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/config\/ConfigurationFactory.java":[{"add":["390","                final String configLocationStr = this.substitutor.replace(PropertiesUtil.getProperties()","391","                        .getStringProperty(CONFIGURATION_FILE_PROPERTY));","392","                if (configLocationStr != null) {","395","                        source = getInputFromUri(FileUtils.getCorrectedFilePathUri(configLocationStr));","402","                        source = getInputFromString(configLocationStr, loader);","405","                        for (final ConfigurationFactory factory : getFactories()) {","409","                                    if (type.equals(\"*\") || configLocationStr.endsWith(type)) {","410","                                        final Configuration config = factory.getConfiguration(source);","411","                                        if (config != null) {","412","                                            return config;","419","                } else {","420","                    for (final ConfigurationFactory factory : getFactories()) {","421","                        final String[] types = factory.getSupportedTypes();","422","                        if (types != null) {","423","                            for (final String type : types) {","424","                                if (type.equals(\"*\")) {","425","                                    final Configuration config = factory.getConfiguration(name, configLocation);","426","                                    if (config != null) {","427","                                        return config;","428","                                    }","429","                                }","430","                            }","431","                        }","432","                    }","435","                \/\/ configLocation != null","436","                final String configLocationStr = configLocation.toString();","437","                for (final ConfigurationFactory factory : getFactories()) {","441","                            if (type.equals(\"*\") || configLocationStr.endsWith(type)) {","472","            for (final ConfigurationFactory factory : getFactories()) {","504","                for (final ConfigurationFactory factory : getFactories()) {","525","","526","    static List<ConfigurationFactory> getFactories() {","527","        return factories;","528","    }"],"delete":["390","                final String config = this.substitutor.replace(","391","                    PropertiesUtil.getProperties().getStringProperty(CONFIGURATION_FILE_PROPERTY));","392","                if (config != null) {","395","                        source = getInputFromUri(FileUtils.getCorrectedFilePathUri(config));","402","                        source = getInputFromString(config, loader);","405","                        for (final ConfigurationFactory factory : factories) {","409","                                    if (type.equals(\"*\") || config.endsWith(type)) {","410","                                        final Configuration c = factory.getConfiguration(source);","411","                                        if (c != null) {","412","                                            return c;","421","                for (final ConfigurationFactory factory : factories) {","425","                            if (type.equals(\"*\") || configLocation.toString().endsWith(type)) {","456","            for (final ConfigurationFactory factory : factories) {","488","                for (final ConfigurationFactory factory : factories) {"]}],"src\/changes\/changes.xml":[{"add":["83","      <action issue=\"LOG4J2-1045\" dev=\"ggregory\" type=\"fix\" due-to=\"Gnter Albrecht\">","84","        Externalize log4j2.xml via URL resource.","85","      <\/action>      "],"delete":[]}]}},"79df06f5137352bfb1048f2c4717fde212bc2396":{"changes":{"src\/changes\/changes.xml":"MODIFY","core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/LoggerContext.java":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["25","      <action issue=\"LOG4J2-200\" dev=\"rgoers\" type=\"fix\" due-to=\"Remko Popma\">","26","        LoggerContext method renamed to removeFilter from removeFiler.","27","      <\/action>"],"delete":[]}],"core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/LoggerContext.java":[{"add":["251","    public void removeFilter(final Filter filter) {"],"delete":["251","    public void removeFiler(final Filter filter) {"]}]}},"39e28688135fea0397d2df20cb3acbd29d02d43c":{"changes":{"src\/changes\/changes.xml":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["25","    <release version=\"2.1.1\" date=\"201?-??-??\" description=\"GA Release 2.2\">","35","      <action issue=\"LOG4J2-897\" dev=\"ggregory\" type=\"fix\">","36","        Javaodc for org.apache.log4j.BasicConfigurator.configure() is incorrect.","37","      <\/action>"],"delete":["25","    <release version=\"2.1.1\" date=\"201?-??-??\" description=\"GA Release 2.1.1\">"]}]}},"9e56581ec11df9ec0e6f1887cd01cfe9099347c4":{"changes":{"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/db\/AbstractDatabaseAppenderTest.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/db\/nosql\/NoSQLConnection.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/db\/jdbc\/JDBCDatabaseManager.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/db\/AbstractDatabaseManagerTest.java":"MODIFY","src\/changes\/changes.xml":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/db\/nosql\/NoSQLDatabaseManagerTest.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/db\/nosql\/NoSQLDatabaseManager.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/db\/nosql\/NoSQLProvider.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/db\/jpa\/JPADatabaseManager.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/db\/AbstractDatabaseManager.java":"MODIFY"},"diff":{"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/db\/AbstractDatabaseAppenderTest.java":[{"add":["128","        this.manager.connectAndStart();","129","        expectLastCall();","132","        this.manager.commitAndClose();","133","        expectLastCall();","140","        this.manager.connectAndStart();","141","        expectLastCall();","144","        this.manager.commitAndClose();","145","        expectLastCall();"],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/db\/nosql\/NoSQLConnection.java":[{"add":["57","     * HTTP web service), in which case this method would be a no-op. This method should also commit any open","58","     * transactions, if applicable and if not already committed.<br \/>","59","     * <br \/>","60","     * If this connection is part of a connection pool, executing this method should commit the transaction and return","61","     * the connection to the pool, but it should not actually close the underlying connection."],"delete":["57","     * HTTP web service), in which case this method would be a no-op."]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/db\/jdbc\/JDBCDatabaseManager.java":[{"add":["55","    protected void startupInternal() {","56","        \/\/ nothing to see here","60","    protected void shutdownInternal() {","61","        if (this.connection != null || this.statement != null) {","62","            this.commitAndClose();","63","        }","64","    }","65","","66","    @Override","67","    protected void connectAndStart() {","69","            this.connection = this.connectionSource.getConnection();","70","            this.connection.setAutoCommit(false);","71","            this.statement = this.connection.prepareStatement(this.sqlStatement);","72","        } catch (SQLException e) {","73","            throw new AppenderLoggingException(","74","                    \"Cannot write logging event or flush buffer; JDBC manager cannot connect to the database.\", e","75","            );","83","            if (!this.isRunning() || this.connection == null || this.connection.isClosed() || this.statement == null","84","                    || this.statement.isClosed()) {","123","    @Override","124","    protected void commitAndClose() {","125","        try {","126","            if (this.connection != null && !this.connection.isClosed()) {","127","                this.connection.commit();","128","            }","129","        } catch (SQLException e) {","130","            throw new AppenderLoggingException(\"Failed to commit transaction logging event or flushing buffer.\", e);","131","        } finally {","132","            try {","133","                if (this.statement != null) {","134","                    this.statement.close();","135","                }","136","            } catch (Exception e) {","137","                LOGGER.warn(\"Failed to close SQL statement logging event or flushing buffer.\", e);","138","            } finally {","139","                this.statement = null;","140","            }","141","","142","            try {","143","                if (this.connection != null) {","144","                    this.connection.close();","145","                }","146","            } catch (Exception e) {","147","                LOGGER.warn(\"Failed to close database connection logging event or flushing buffer.\", e);","148","            } finally {","149","                this.connection = null;","150","            }","151","        }","152","    }","153",""],"delete":["55","    protected void startupInternal() throws SQLException {","56","        this.connection = this.connectionSource.getConnection();","57","        this.statement = this.connection.prepareStatement(this.sqlStatement);","61","    protected void shutdownInternal() throws SQLException {","63","            Closer.close(this.statement);","64","        } finally {","65","            Closer.close(this.connection);","73","            if (!this.isRunning() || this.connection == null || this.connection.isClosed()) {"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/db\/AbstractDatabaseManagerTest.java":[{"add":["129","        verify(this.manager);","130","        reset(this.manager);","131","        this.manager.connectAndStart();","132","        expectLastCall();","133","        this.manager.writeInternal(same(event1));","134","        expectLastCall();","135","        this.manager.commitAndClose();","136","        expectLastCall();","137","        replay(this.manager);","138","","143","        this.manager.connectAndStart();","144","        expectLastCall();","147","        this.manager.commitAndClose();","148","        expectLastCall();","155","        this.manager.connectAndStart();","156","        expectLastCall();","159","        this.manager.commitAndClose();","160","        expectLastCall();","187","        this.manager.connectAndStart();","188","        expectLastCall();","197","        this.manager.commitAndClose();","198","        expectLastCall();","224","        this.manager.connectAndStart();","225","        expectLastCall();","232","        this.manager.commitAndClose();","233","        expectLastCall();","259","        this.manager.connectAndStart();","260","        expectLastCall();","267","        this.manager.commitAndClose();","268","        expectLastCall();"],"delete":["125","        this.manager.writeInternal(same(event1));","126","        expectLastCall();"]}],"src\/changes\/changes.xml":[{"add":["23","      <action issue=\"LOG4J2-489\" dev=\"nickwilliams\" type=\"fix\">","24","        Fixed the JPAAppender's overuse of transactions by connecting (borrowing from pool) on new write internal or on","25","        flush.","26","      <\/action>","27","      <action issue=\"LOG4J2-457\" dev=\"nickwilliams\" type=\"fix\">","28","        Fixed failure of JDBC and JPA appender to properly release database connections by connecting (borrowing from","29","        pool) on new write internal or on flush.","30","      <\/action>","31","      <action issue=\"LOG4J2-442\" dev=\"nickwilliams\" type=\"fix\">","32","        Fixed problem with JDBC and JPA appender connectivity in WebSphere by connecting (borrowing from pool) on new","33","        write internal or on flush.","34","      <\/action>","35","      <action issue=\"LOG4J2-438\" dev=\"nickwilliams\" type=\"fix\">","36","        Ensured the JDBCAppender commits transactions after a single write or a flush of multiple writes.","37","      <\/action>","38","      <action issue=\"LOG4J2-407\" dev=\"nickwilliams\" type=\"fix\">","39","        Fixed inability to recover from lost database connection in database appenders by connecting (borrowing from","40","        pool) on new write internal or on flush.","41","      <\/action>"],"delete":[]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/db\/nosql\/NoSQLDatabaseManagerTest.java":[{"add":["71","            manager.connectAndStart();","80","            manager.commitAndClose();","125","            replay(this.provider, this.connection);","126","","131","            expect(this.provider.getConnection()).andReturn(this.connection);","132","            replay(this.provider, this.connection);","133","","134","            manager.connectAndStart();","135","","136","            verify(this.provider, this.connection);","137","            reset(this.provider, this.connection);","170","            replay(this.provider, this.connection);","171","","176","            expect(this.provider.getConnection()).andReturn(this.connection);","177","            replay(this.provider, this.connection);","178","","179","            manager.connectAndStart();","180","","181","            verify(this.provider, this.connection);","182","            reset(this.provider, this.connection);","262","            replay(this.provider, this.connection);","263","","268","            expect(this.provider.getConnection()).andReturn(this.connection);","269","            replay(this.provider, this.connection);","270","","271","            manager.connectAndStart();","272","","273","            verify(this.provider, this.connection);","274","            reset(this.provider, this.connection);","402","            replay(this.provider, this.connection);","403","","408","            expect(this.provider.getConnection()).andReturn(this.connection);","409","            replay(this.provider, this.connection);","410","","411","            manager.connectAndStart();","412","","413","            verify(this.provider, this.connection);","414","            reset(this.provider, this.connection);"],"delete":["71","            manager.startupInternal();","80","            manager.shutdownInternal();","122","        expect(this.provider.getConnection()).andReturn(this.connection);","123","        replay(this.provider, this.connection);","124","","161","        expect(this.provider.getConnection()).andReturn(this.connection);","162","        replay(this.provider, this.connection);","163","","247","        expect(this.provider.getConnection()).andReturn(this.connection);","248","        replay(this.provider, this.connection);","249","","381","        expect(this.provider.getConnection()).andReturn(this.connection);","382","        replay(this.provider, this.connection);","383",""]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/db\/nosql\/NoSQLDatabaseManager.java":[{"add":["47","        \/\/ nothing to see here","52","        if (this.connection != null) {","53","            this.commitAndClose();","54","        }","55","    }","56","","57","    @Override","58","    protected void connectAndStart() {","59","        try {","60","            this.connection = this.provider.getConnection();","61","        } catch (Exception e) {","62","            throw new AppenderLoggingException(\"Failed to get connection from NoSQL connection provider.\", e);","150","    @Override","151","    protected void commitAndClose() {","152","        try {","153","            if (this.connection != null && !this.connection.isClosed()) {","154","                this.connection.close();","155","            }","156","        } catch (Exception e) {","157","            throw new AppenderLoggingException(\"Failed to commit and close NoSQL connection in manager.\", e);","158","        }","159","    }","160",""],"delete":["47","        this.connection = this.provider.getConnection();","52","        if (this.connection != null && !this.connection.isClosed()) {","53","            this.connection.close();"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/db\/nosql\/NoSQLProvider.java":[{"add":["28","     * inserting objects that may use a persistent connection or may use HTTP web service calls, etc.<br \/>","29","     * <br \/>","30","     * Where applicable, this method should return a connection from the connection pool as opposed to opening a","31","     * brand new connection every time."],"delete":["28","     * inserting objects that may use a persistent connection or may use HTTP web service calls, etc."]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/db\/jpa\/JPADatabaseManager.java":[{"add":["41","    private EntityManager entityManager;","42","    private EntityTransaction transaction;","43","","61","        if (this.entityManager != null || this.transaction != null) {","62","            this.commitAndClose();","63","        }","70","    protected void connectAndStart() {","71","        try {","72","            this.entityManager = this.entityManagerFactory.createEntityManager();","73","            this.transaction = this.entityManager.getTransaction();","74","            this.transaction.begin();","75","        } catch (Exception e) {","76","            throw new AppenderLoggingException(","77","                    \"Cannot write logging event or flush buffer; manager cannot create EntityManager or transaction.\", e","78","            );","79","        }","80","    }","81","","82","    @Override","84","        if (!this.isRunning() || this.entityManagerFactory == null || this.entityManager == null","85","                || this.transaction == null) {","98","            this.entityManager.persist(entity);","100","            if (this.transaction != null && this.transaction.isActive()) {","101","                this.transaction.rollback();","102","                this.transaction = null;","104","            throw new AppenderLoggingException(\"Failed to insert record for log event in JPA manager: \" +","106","        }","107","    }","108","","109","    @Override","110","    protected void commitAndClose() {","111","        try {","112","            if (this.transaction != null && this.transaction.isActive()) {","113","                this.transaction.commit();","114","            }","115","        } catch (Exception e) {","116","            if (this.transaction != null && this.transaction.isActive()) {","117","                this.transaction.rollback();","118","            }","120","            this.transaction = null;","121","            try {","122","                if (this.entityManager != null && this.entityManager.isOpen()) {","123","                    this.entityManager.close();","124","                }","125","            } catch (Exception e) {","126","                LOGGER.warn(\"Failed to close entity manager while logging event or flushing buffer.\", e);","127","            } finally {","128","                this.entityManager = null;"],"delete":["65","        if (!this.isRunning() || this.entityManagerFactory == null) {","77","        EntityManager entityManager = null;","78","        EntityTransaction transaction = null;","80","            entityManager = this.entityManagerFactory.createEntityManager();","81","            transaction = entityManager.getTransaction();","82","            transaction.begin();","83","            entityManager.persist(entity);","84","            transaction.commit();","86","            if (transaction != null && transaction.isActive()) {","87","                transaction.rollback();","89","            throw new AppenderLoggingException(\"Failed to insert record for log event in JDBC manager: \" +","92","            if (entityManager != null && entityManager.isOpen()) {","93","                entityManager.close();"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/db\/AbstractDatabaseManager.java":[{"add":["108","     * Connects to the database and starts a transaction (if applicable). With buffering enabled, this is called when","109","     * flushing the buffer begins, before the first call to {@link #writeInternal}. With buffering disabled, this is","110","     * called immediately before every invocation of {@link #writeInternal}.","111","     *\/","112","    protected abstract void connectAndStart();","113","","114","    \/**","123","     * Commits any active transaction (if applicable) and disconnects from the database (returns the connection to the","124","     * connection pool). With buffering enabled, this is called when flushing the buffer completes, after the last call","125","     * to {@link #writeInternal}. With buffering disabled, this is called immediately after every invocation of","126","     * {@link #writeInternal}.","127","     *\/","128","    protected abstract void commitAndClose();","129","","130","    \/**","136","            this.connectAndStart();","140","            this.commitAndClose();","157","            this.connectAndStart();","159","            this.commitAndClose();"],"delete":[]}]}},"07e500bcb5069d6ab7b7e39995f561b99190c8ee":{"changes":{"src\/changes\/changes.xml":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["48","      <action issue=\"LOG4J2-2592\" dev=\"ggregory\" type=\"fix\" due-to=\"Dvid Kaya, Gary Gregory\">\r"],"delete":["48","      <action issue=\"LOG4J2-2592\" dev=\"ggregory\" type=\"update\" due-to=\"Dvid Kaya, Gary Gregory\">\r"]}]}},"8e79b7b097bd074bd69097b570eb3fc8ce15ee81":{"changes":{"src\/changes\/changes.xml":"MODIFY","log4j-web\/src\/site\/xdoc\/index.xml":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["26","      <action issue=\"LOG4J2-678\" dev=\"rpopma\" type=\"fix\" due-to=\"Matt Sicker\">","27","        Fixed minor issues with Log4j2 web site\/documentation.","28","      <\/action>"],"delete":[]}],"log4j-web\/src\/site\/xdoc\/index.xml":[{"add":["31","              See the user manual page on <a href=\"..\/manual\/webapp.html\">Web Applications and JSPs<\/a>","32","              for details on using Log4j 2 in Web Applications."],"delete":["31","              Need something about Servlet support."]}]}},"4a4b7530b1848e630a65d79e9c7dc388a5a7785b":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/AbstractManager.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/lookup\/Interpolator.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/selector\/JndiContextSelector.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/routing\/RoutingAppenderWithJndiTest.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/lookup\/JndiLookupTest.java":"MODIFY","src\/site\/xdoc\/manual\/appenders.xml":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/lookup\/JndiDisabledLookupTest.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/mom\/JmsManager.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/lookup\/JndiLookup.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/net\/JndiManager.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/net\/JndiManagerTest.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/lookup\/JndiRestrictedLookupTest.java":"MODIFY","src\/site\/xdoc\/manual\/configuration.xml.vm":"MODIFY","src\/changes\/changes.xml":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/lookup\/InterpolatorTest.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/mom\/JmsAppenderTest.java":"MODIFY"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/AbstractManager.java":[{"add":["20","import java.util.Objects;","113","                manager = Objects.requireNonNull(factory, \"factory\").createManager(name, data);"],"delete":["112","                manager = factory.createManager(name, data);"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/lookup\/Interpolator.java":[{"add":["80","                if (!clazz.getName().equals(\"org.apache.logging.log4j.core.lookup.JndiLookup\") || JndiManager.isJndiLookupEnabled()) {","111","        if (JndiManager.isJndiLookupEnabled()) {"],"delete":["80","                if (!clazz.getName().equals(\"org.apache.logging.log4j.core.lookup.JndiLookup\") || JndiManager.isJndiEnabled()) {","111","        if (JndiManager.isJndiEnabled()) {"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/selector\/JndiContextSelector.java":[{"add":["96","        if (!JndiManager.isJndiContextSelectorEnabled()) {","97","            throw new IllegalStateException(\"JNDI must be enabled by setting log4j2.enableJndiContextSelector=true\");"],"delete":["96","        if (!JndiManager.isJndiEnabled()) {","97","            throw new IllegalStateException(\"JNDI must be enabled by setting log4j2.enableJndiJava=true\");"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/routing\/RoutingAppenderWithJndiTest.java":[{"add":["54","        System.setProperty(\"log4j2.enableJndiLookup\", \"true\");","55","        \/\/System.setProperty(\"log4j2.enableJndiJms\", \"true\");","56","        \/\/System.setProperty(\"log4j2.enableJndiContextSelector\", \"true\");","68","        if (listAppender1 != null) {","69","            listAppender1.clear();","70","        }","71","        if (listAppender2 != null) {","72","            listAppender2.clear();","73","        }"],"delete":["54","        System.setProperty(\"log4j2.enableJndiJava\", \"true\");","66","        listAppender1.clear();","67","        listAppender2.clear();"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/lookup\/JndiLookupTest.java":[{"add":["47","        System.setProperty(\"log4j2.enableJndiLookup\", \"true\");"],"delete":["47","        System.setProperty(\"log4j2.enableJndiJava\", \"true\");"]}],"src\/site\/xdoc\/manual\/appenders.xml":[{"add":["1543","            <code>log4j2.enableJndiJms=true<\/code> is configured as a system property or environment","1544","            variable. See the <a href=\".\/configuration.html#enableJndiJms\">enableJndiJms<\/a> system property.<\/p>"],"delete":["1543","            <code>log4j2.enableJndiJava=true<\/code>log4j2.enableJndiJava=true is configured as a system property or environment","1544","            variable. See the <a href=\".\/configuration.html#enableJndiJava\">enableJndiJava<\/a> system property.<\/p>"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/lookup\/JndiDisabledLookupTest.java":[{"add":["18","import static org.junit.jupiter.api.Assertions.assertThrows;","25"," * Verifies the Lookups are disabled without the log4j2.enableJndiLookup property set to true.","31","        assertThrows(IllegalStateException.class, JndiLookup::new);"],"delete":["18","import java.util.Arrays;","19","import java.util.Collection;","20","import java.util.HashMap;","21","import java.util.Map;","23","import org.apache.logging.log4j.junit.JndiRule;","24","import org.junit.BeforeClass;","25","import org.junit.Rule;","28","import static org.junit.Assert.assertEquals;","29","import static org.junit.Assert.assertNull;","30","","34"," * Verifies the Lookups are disabled without the log4j2.enableJndiJava property set to true.","38","    private static final String TEST_CONTEXT_RESOURCE_NAME = \"logging\/context-name\";","39","    private static final String TEST_CONTEXT_NAME = \"app-1\";","40","    private static final String TEST_INTEGRAL_NAME = \"int-value\";","41","    private static final int TEST_INTEGRAL_VALUE = 42;","42","    private static final String TEST_STRINGS_NAME = \"string-collection\";","43","    private static final Collection<String> TEST_STRINGS_COLLECTION = Arrays.asList(\"one\", \"two\", \"three\");","44","","45","    @Rule","46","    public JndiRule jndiRule = new JndiRule(createBindings());","47","","48","    private Map<String, Object> createBindings() {","49","        final Map<String, Object> map = new HashMap<>();","50","        map.put(JndiLookup.CONTAINER_JNDI_RESOURCE_PATH_PREFIX + TEST_CONTEXT_RESOURCE_NAME, TEST_CONTEXT_NAME);","51","        map.put(JndiLookup.CONTAINER_JNDI_RESOURCE_PATH_PREFIX + TEST_INTEGRAL_NAME, TEST_INTEGRAL_VALUE);","52","        map.put(JndiLookup.CONTAINER_JNDI_RESOURCE_PATH_PREFIX + TEST_STRINGS_NAME, TEST_STRINGS_COLLECTION);","53","        return map;","54","    }","55","","58","        final StrLookup lookup = new JndiLookup();","59","","60","        String contextName = lookup.lookup(TEST_CONTEXT_RESOURCE_NAME);","61","        assertNull(contextName);"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/mom\/JmsManager.java":[{"add":["126","            if (JndiManager.isJndiJmsEnabled()) {","134","                logger().error(\"JNDI must be enabled by setting log4j2.enableJndiJms=true\");"],"delete":["126","            if (JndiManager.isJndiEnabled()) {","134","                logger().error(\"JNDI has not been enabled. The log4j2.enableJndiJava property must be set to true\");"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/lookup\/JndiLookup.java":[{"add":["43","     * Constructs a new instance or throw IllegalStateException if this feature is disabled.","44","     *\/","45","    public JndiLookup() {","46","        if (!JndiManager.isJndiLookupEnabled()) {","47","            throw new IllegalStateException(\"JNDI must be enabled by setting log4j2.enableJndiLookup=true\");","48","        }","49","    }","50","","51","    \/**","53","     * ","55","     * @param key the JNDI resource name to be looked up, may be null","73","     * Convert the given JNDI name to the actual JNDI name to use. Default implementation applies the \"java:comp\/env\/\"","74","     * prefix unless other scheme like \"java:\" is given.","75","     * "],"delete":["45","     * @param key  the JNDI resource name to be looked up, may be null","63","     * Convert the given JNDI name to the actual JNDI name to use.","64","     * Default implementation applies the \"java:comp\/env\/\" prefix","65","     * unless other scheme like \"java:\" is given."]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/net\/JndiManager.java":[{"add":["41","    private static final String PREFIX = \"log4j2.enableJndi\";","42","    private static final String JAVA_SCHEME = \"java\";","46","    private static boolean isJndiEnabled(final String subKey) {","47","        return PropertiesUtil.getProperties().getBooleanProperty(PREFIX + subKey, false);","48","    }","49","","51","        return isJndiContextSelectorEnabled() || isJndiJmsEnabled() || isJndiLookupEnabled();","52","    }","53","","54","    public static boolean isJndiContextSelectorEnabled() {","55","        return isJndiEnabled(\"ContextSelector\");","56","    }","57","","58","    public static boolean isJndiJmsEnabled() {","59","        return isJndiEnabled(\"Jms\");","60","    }","61","","62","    public static boolean isJndiLookupEnabled() {","63","        return isJndiEnabled(\"Lookup\");","201","            if (uri.getScheme() == null || uri.getScheme().equals(JAVA_SCHEME)) {","215","            if (!isJndiEnabled()) {","216","                throw new IllegalStateException(String.format(\"JNDI must be enabled by setting one of the %s* properties to true\", PREFIX));","217","            }","218","            try {","219","                return new JndiManager(name, new InitialContext(data));","220","            } catch (final NamingException e) {","221","                LOGGER.error(\"Error creating JNDI InitialContext for '{}'.\", name, e);","222","                return null;"],"delete":["41","    private static final String PREFIX = \"log4j2.\";","42","    private static final String JAVA = \"java\";","47","        return PropertiesUtil.getProperties().getBooleanProperty(\"log4j2.enableJndiJava\", false);","185","            if (uri.getScheme() == null || uri.getScheme().equals(JAVA)) {","199","            if (isJndiEnabled()) {","200","                try {","201","                    return new JndiManager(name, new InitialContext(data));","202","                } catch (final NamingException e) {","203","                    LOGGER.error(\"Error creating JNDI InitialContext.\", e);","204","                    return null;","205","                }","206","            } else {","207","                return new JndiManager(name, null);"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/net\/JndiManagerTest.java":[{"add":["20","import static org.junit.jupiter.api.Assertions.assertThrows;","21","","22","import java.util.Properties;","35","","36","    @Test","37","    public void testIsJndiContextSelectorEnabled() {","38","        assertFalse(JndiManager.isJndiContextSelectorEnabled());","39","    }","40","","41","    @Test","42","    public void testIsJndiJmsEnabled() {","43","        assertFalse(JndiManager.isJndiJmsEnabled());","44","    }","45","","46","    @Test","47","    public void testIsJndiLookupEnabled() {","48","        assertFalse(JndiManager.isJndiLookupEnabled());","49","    }","50","    ","51","    @Test","52","    public void testNoInstanceByDefault() {","53","        assertThrows(IllegalStateException.class, () -> JndiManager.getDefaultManager());","54","        assertThrows(IllegalStateException.class, () -> JndiManager.getDefaultManager(null));","55","        assertThrows(IllegalStateException.class, () -> JndiManager.getDefaultManager(\"A\"));","56","        assertThrows(IllegalStateException.class, () -> JndiManager.getJndiManager(null));","57","        assertThrows(IllegalStateException.class, () -> JndiManager.getJndiManager(new Properties()));","58","        assertThrows(IllegalStateException.class, () -> JndiManager.getJndiManager(null, null, null, null, null, null));","59","        assertThrows(IllegalStateException.class, () -> JndiManager.getJndiManager(\"A\", \"A\", \"A\", \"A\", \"A\", new Properties()));","60","    }","61","    ","62","    "],"delete":[]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/lookup\/JndiRestrictedLookupTest.java":[{"add":["32","        System.setProperty(\"log4j2.enableJndiLookup\", \"true\");"],"delete":["32","        System.setProperty(\"log4j2.enableJndiJava\", \"true\");"]}],"src\/site\/xdoc\/manual\/configuration.xml.vm":[{"add":["2151","    <td><a name=\"enableJndiContextSelector\"\/>log4j2.enableJndiContextSelector<\/td>","2152","    <td>LOG4J_ENABLE_JNDI_CONTEXT_SELECTOR<\/td>","2155","      When true, the Log4j context selector that uses the JNDI java protocol is enabled. When false, the default, they are disabled.","2156","    <\/td>","2157","  <\/tr>","2158","  <tr>","2159","    <td><a name=\"enableJndiJms\"\/>log4j2.enableJndiJms<\/td>","2160","    <td>LOG4J_ENABLE_JNDI_JMS<\/td>","2161","    <td>false<\/td>","2162","    <td>","2163","      When true, the Log4j JMS Appender that uses JNDI's java protocol is enabled. When false, the default, they are disabled.","2164","    <\/td>","2165","  <\/tr>","2166","  <tr>","2167","    <td><a name=\"enableJndiLookup\"\/>log4j2.enableJndiLookup<\/td>","2168","    <td>LOG4J_ENABLE_JNDI_LOOKUP<\/td>","2169","    <td>false<\/td>","2170","    <td>","2171","      When true, the Log4j lookup that uses JNDI's java protocol is enabled. When false, the default, they are disabled."],"delete":["2151","    <td><a name=\"enableJndiJava\"\/>log4j2.enableJndiJava<\/td>","2152","    <td>LOG4J_ENABLE_JNDI_JAVA<\/td>","2155","      When true, Log4j components that use JNDI java protocol are enabled. When false, the default, they are disabled."]}],"src\/changes\/changes.xml":[{"add":["32","      <action issue=\"LOG4J2-3242\" dev=\"rgoers, ggregory\" type=\"fix\">","33","        Limit JNDI to the java protocol only. JNDI will remain disabled by default. Rename JNDI enablement property from","34","        'log4j2.enableJndi' to 'log4j2.enableJndiLookup', 'log4j2.enableJndiJms', and 'log4j2.enableJndiContextSelector'.","37","        Do not declare log4j-api-java9 and log4j-core-java9 as dependencies as it causes problems with the","47","        Log4j 1.2 bridge API hard codes the Syslog protocol to TCP."],"delete":["32","      <action issue=\"LOG4J2-3242\" dev=\"rgoers\" type=\"fix\">","33","        Limit JNDI to the java protocol only. JNDI will remain disabled by default. The enablement","34","        property has been renamed to 'log4j2.enableJndiJava'","37","        Do not declare log4j-api-java9 and log4j-core-java9 as depdendencies as it causes problems with the","47","        Log4j 1.2 bridge API hard codes protocol to TCP."]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/lookup\/InterpolatorTest.java":[{"add":["51","            System.setProperty(\"log4j2.enableJndiLookup\", \"true\");","58","            System.clearProperty(\"log4j2.enableJndiLookup\");"],"delete":["51","            System.setProperty(\"log4j2.enableJndiJava\", \"true\");","58","            System.clearProperty(\"log4j2.enableJndiJava\");"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/mom\/JmsAppenderTest.java":[{"add":["87","    public static void afterClass() throws Exception {","88","        System.clearProperty(\"log4j2.enableJndiJms\");","89","    }","90","","91","    @BeforeClass","93","        System.setProperty(\"log4j2.enableJndiJms\", \"true\");"],"delete":["88","        System.setProperty(\"log4j2.enableJndiJava\", \"true\");"]}]}},"24f2b0408698ffb436452da98db397aadedc1b23":{"changes":{"src\/changes\/changes.xml":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["24","      <action issue=\"LOG4J2-694\" dev=\"mattsicker\" type=\"fix\">","25","        Fix strange compilation error that popped up in a test class.","26","      <\/action>"],"delete":[]}]}},"ea3e733c2f03ad29fca344358e5c895498ca2b68":{"changes":{"src\/changes\/changes.xml":"MODIFY","pom.xml":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["25","      <action issue=\"LOG4J2-233\" dev=\"rpopma\" type=\"fix\">","26","        Fixed link to log4j-user mailing list.","27","      <\/action>"],"delete":[]}],"pom.xml":[{"add":["94","      <archive>http:\/\/mail-archives.apache.org\/mod_mbox\/logging-log4j-user\/<\/archive>"],"delete":["94","      <archive>http:\/\/mail-archives.apache.org\/mod_mbox\/logging-log4j-dev\/<\/archive>"]}]}},"2928984d7aed949d3fbc36c4004a2788f6217cb5":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/config\/AwaitCompletionReliabilityStrategy.java":"MODIFY"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/config\/AwaitCompletionReliabilityStrategy.java":[{"add":["96","            return result == this.loggerConfig ? result : result.getReliabilityStrategy().getActiveLoggerConfig(next);"],"delete":["96","            \/\/return result == this.loggerConfig ? result : result.getReliabilityStrategy().getActiveLoggerConfig(next);","97","            return result.getReliabilityStrategy().getActiveLoggerConfig(next);"]}]}},"c4415993b3cd79ce027bec575976330135f51c83":{"changes":{"src\/changes\/changes.xml":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["32","      <action issue=\"LOG4J2-3264\" dev=\"ckozak\" type=\"fix\" due-to=\"Yanming Zhou\">","33","        Fix MapLookup to lookup MapMessage before DefaultMap","34","      <\/action>"],"delete":[]}]}},"2d7d6311a808391e43137ae9c36060709fb185b6":{"changes":{"core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/filter\/RegexFilter.java":"MODIFY","src\/changes\/changes.xml":"MODIFY","core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/filter\/RegexFilterTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/filter\/RegexFilter.java":[{"add":["59","        if (msg == null) {","60","            return onMismatch;","61","        }","68","        if (msg == null) {","69","            return onMismatch;","70","        }"],"delete":[]}],"src\/changes\/changes.xml":[{"add":["25","      <action issue=\"LOG4J2-234\" dev=\"rgoers\" type=\"fix\">","26","        RegexFilter threw a NullPointerException when used as a context-wide filter.","27","      <\/action>"],"delete":[]}],"core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/filter\/RegexFilterTest.java":[{"add":["22","import org.apache.logging.log4j.message.Message;","54","","55","    @Test","56","    public void TestNoMsg() {","57","        RegexFilter filter = RegexFilter.createFilter(\".* test .*\", null, null, null);","58","        filter.start();","59","        assertTrue(filter.isStarted());","60","        assertTrue(filter.filter(null, Level.DEBUG, null, (String)null, (Throwable)null) == Filter.Result.DENY);","61","        assertTrue(filter.filter(null, Level.DEBUG, null, (Message)null, (Throwable)null) == Filter.Result.DENY);","62","        assertTrue(filter.filter(null, Level.DEBUG, null, null, (Object[])null) == Filter.Result.DENY);","63","","64","    }"],"delete":[]}]}},"3afc56801b4942ec1675c73f99594b8982a0cda1":{"changes":{"log4j-web\/src\/main\/java\/org\/apache\/logging\/log4j\/web\/Log4jWebInitializerImpl.java":"MODIFY"},"diff":{"log4j-web\/src\/main\/java\/org\/apache\/logging\/log4j\/web\/Log4jWebInitializerImpl.java":[{"add":["149","            LOGGER.debug(\"Using the servlet context name \\\"{}\\\".\", this.name);"],"delete":[]}]}},"528c3a97c40071866d210541d5606707deb13a73":{"changes":{"src\/changes\/changes.xml":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["25","      <action issue=\"LOG4J2-235\" dev=\"rpopma\" type=\"fix\" due-to=\"Sebastian Oerding\">"],"delete":["25","      <action issue=\"LOG4J2-235\" dev=\"rpopma\" type=\"fix\">"]}]}},"9a8e3fa946cadc184f664e25e83a9aab2e3c61fa":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggerDisruptor.java":"MODIFY"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggerDisruptor.java":[{"add":["213","     * <p>\r","214","     * This property may be modified after the {@link #start()} method has been called.\r","215","     * <\/p>\r","223","        LOGGER.trace(\"[{}] AsyncLoggers have been modified to use a {} translator\", contextName,\r","224","                useThreadLocalTranslator ? \"threadlocal\" : \"vararg\");\r"],"delete":[]}]}},"cfb38e144d627981dae41635b9481866a7657737":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/util\/Loader.java":"MODIFY"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/util\/Loader.java":[{"add":["21","import java.lang.reflect.ReflectPermission;","49","        final SecurityManager sm = System.getSecurityManager();","50","        if (sm != null) {","51","            sm.checkPermission(new RuntimePermission(\"getClassLoader\"));","52","            sm.checkPermission(new RuntimePermission(\"getStackTrace\"));","53","            sm.checkPermission(new ReflectPermission(\"suppressAccessChecks\"));","54","        }"],"delete":[]}]}},"687b383f3e9fc377ea99a247dd9bc6ed23b3eb78":{"changes":{"log4j-jul\/src\/main\/java\/org\/apache\/logging\/log4j\/jul\/DefaultLevelConverter.java":"MODIFY"},"diff":{"log4j-jul\/src\/main\/java\/org\/apache\/logging\/log4j\/jul\/DefaultLevelConverter.java":[{"add":[],"delete":["98","        final Level level = julToLog4j.get(customJavaLevel);","99","        if (level != null) {","100","            \/\/ don't search","101","            return level;","102","        }"]}]}},"1a3070d95af5bb11af835fd145dca9233aa9ee37":{"changes":{"log4j-layout-template-json\/src\/test\/java\/org\/apache\/logging\/log4j\/layout\/template\/json\/JsonTemplateLayoutTest.java":"MODIFY","log4j-layout-template-json\/src\/main\/java\/org\/apache\/logging\/log4j\/layout\/template\/json\/resolver\/MessageParameterResolver.java":"MODIFY","src\/changes\/changes.xml":"MODIFY"},"diff":{"log4j-layout-template-json\/src\/test\/java\/org\/apache\/logging\/log4j\/layout\/template\/json\/JsonTemplateLayoutTest.java":[{"add":["227","        final String eventTemplate = writeJson(asMap(","228","                timestampFieldName, asMap(","230","                        \"pattern\", asMap(\"timeZone\", \"Europe\/Amsterdam\")),","252","        final String eventTemplate = writeJson(asMap(","253","                \"mapValue3\", asMap(\"$resolver\", \"message\"),","293","        final String eventTemplate = writeJson(asMap(","294","                \"message\", asMap(\"$resolver\", \"message\")));","330","        final String eventTemplate = writeJson(asMap(","331","                \"typedValue\", asMap(","334","                \"stringifiedValue\", asMap(","370","        final String eventTemplate = writeJson(asMap(","371","                \"message\", asMap(","429","        final String eventTemplate = writeJson(asMap(","465","        final String eventTemplate = writeJson(asMap(","466","                \"ex_class\", asMap(","469","                \"ex_message\", asMap(","472","                \"ex_stacktrace\", asMap(","476","                \"root_ex_class\", asMap(","479","                \"root_ex_message\", asMap(","482","                \"root_ex_stacktrace\", asMap(","529","        final String eventTemplate = writeJson(asMap(","530","                \"ex_class\", asMap(","533","                \"ex_message\", asMap(","536","                \"ex_stacktrace\", asMap(","540","                \"root_ex_class\", asMap(","543","                \"root_ex_message\", asMap(","546","                \"root_ex_stacktrace\", asMap(","595","        final String eventTemplate = writeJson(asMap(","596","                \"message\", asMap(\"$resolver\", \"message\"),","597","                \"marker\", asMap(","673","        final String template = writeJson(asMap(","674","                \"name\", asMap(","677","                \"positionArg\", asMap(","680","                \"notFoundArg\", asMap(","763","        String eventTemplate = writeJson(asMap(","764","                directlyAccessedKey, asMap(","767","                directlyAccessedNullPropertyKey, asMap(","854","        final String eventTemplate = writeJson(asMap(","855","                mapFieldName, asMap(","942","        final String eventTemplate = writeJson(asMap(","943","                \"ignoredFieldName\", asMap(","946","                        \"flatten\", asMap(\"prefix\", prefix))));","977","        final String eventTemplate = writeJson(asMap(","978","                \"mapValue1\", asMap(","981","                \"mapValue2\", asMap(","1015","        final String eventTemplate = writeJson(asMap(","1016","                \"message\", asMap(\"$resolver\", \"message\")));","1053","        final String eventTemplate = writeJson(asMap(","1054","                \"message\", asMap(\"$resolver\", \"message\")));","1080","        final String stackTraceElementTemplate = writeJson(asMap(","1081","                classNameFieldName, asMap(","1084","                methodNameFieldName, asMap(","1087","                fileNameFieldName, asMap(","1090","                lineNumberFieldName, asMap(","1096","        final String eventTemplate = writeJson(asMap(","1097","                stackTraceFieldName, asMap(","1233","        final String eventTemplate = writeJson(asMap(","1234","                messageKey, asMap(\"$resolver\", \"message\"),","1236","                nullValueKey, asMap(","1313","        final String eventTemplate = writeJson(asMap(","1314","                \"ex_stacktrace\", asMap(","1394","                asMap(","1402","                asMap(","1412","        final String eventTemplate = writeJson(asMap(","1413","                \"epochSecs\", asMap(","1415","                        \"epoch\", asMap(\"unit\", \"secs\")),","1416","                \"epochSecsRounded\", asMap(","1418","                        \"epoch\", asMap(","1421","                \"epochSecsNanos\", asMap(","1423","                        \"epoch\", asMap(\"unit\", \"secs.nanos\")),","1424","                \"epochMillis\", asMap(","1426","                        \"epoch\", asMap(\"unit\", \"millis\")),","1427","                \"epochMillisRounded\", asMap(","1429","                        \"epoch\", asMap(","1432","                \"epochMillisNanos\", asMap(","1434","                        \"epoch\", asMap(\"unit\", \"millis.nanos\")),","1435","                \"epochNanos\", asMap(","1437","                        \"epoch\", asMap(\"unit\", \"nanos\"))));","1493","        final String eventTemplate = writeJson(asMap(","1494","                \"timestamp\", asMap(","1496","                        \"pattern\", asMap(","1546","        final String eventTemplate = writeJson(asMap(","1547","                \"severityKeyword\", asMap(","1550","                        \"severity\", asMap(\"field\", \"keyword\")),","1551","                \"severityCode\", asMap(","1554","                        \"severity\", asMap(\"field\", \"code\"))));","1599","        final String eventTemplate = writeJson(asMap(","1600","                \"exStackTrace\", asMap(","1603","                \"exStackTraceString\", asMap(","1607","                \"exRootCauseStackTrace\", asMap(","1610","                \"exRootCauseStackTraceString\", asMap(","1639","        final String eventTemplate = writeJson(asMap(","1640","                \"stackTrace\", asMap(","1677","        final String eventTemplate = writeJson(asMap(\"key\", \"val\"));","1709","        final String eventTemplate = writeJson(asMap(","1710","                \"message\", asMap(\"$resolver\", \"message\")));","1884","        final String eventTemplate = writeJson(asMap(","1885","                \"message\", asMap(","1922","    void test_MessageParameterResolver_noParameters_with_ParameterizedMessageFactory() {","1923","        testMessageParameterResolverNoParameters(ParameterizedMessageFactory.INSTANCE);","1924","    }","1925","","1926","    @Test","1931","    @Test","1932","    void test_MessageParameterResolver_noParameters_with_ReusableMessageFactory() {","1933","        testMessageParameterResolverNoParameters(ReusableMessageFactory.INSTANCE);","1934","    }","1935","","1936","    private static void testMessageParameterResolver(final MessageFactory messageFactory) {","1939","        final String eventTemplate = writeJson(asMap(","1940","                \"po*\", asMap(","1942","                \"ps*\", asMap(","1945","                \"po2\", asMap(","1948","                \"ps2\", asMap(","1951","                        \"stringified\", true),","1952","                \"po3\", asMap(","1953","                        \"$resolver\", \"messageParameter\",","1954","                        \"index\", 3)));","1984","            assertThat(accessor.getString(\"ps3\")).isNull();","1985","        });","1986","","1987","    }","1988","","1989","    private static void testMessageParameterResolverNoParameters(","1990","            final MessageFactory messageFactory) {","1991","","1992","        \/\/ Create the event template.","1993","        final String eventTemplate = writeJson(asMap(","1994","                \"po*\", asMap(","1995","                        \"$resolver\", \"messageParameter\"),","1996","                \"ps*\", asMap(","1997","                        \"$resolver\", \"messageParameter\",","1998","                        \"stringified\", true)));","1999","","2000","        \/\/ Create the layout.","2001","        final JsonTemplateLayout layout = JsonTemplateLayout","2002","                .newBuilder()","2003","                .setConfiguration(CONFIGURATION)","2004","                .setEventTemplate(eventTemplate)","2005","                .build();","2006","","2007","        \/\/ Create the log event.","2008","        final Message message = messageFactory.newMessage(\"foo\", new Object[0]);","2009","        final Level level = Level.FATAL;","2010","        final LogEvent logEvent = Log4jLogEvent","2011","                .newBuilder()","2012","                .setLoggerName(LOGGER_NAME)","2013","                .setMessage(message)","2014","                .setLevel(level)","2015","                .build();","2016","","2017","        \/\/ Check the serialized event.","2018","        usingSerializedLogEventAccessor(layout, logEvent, accessor -> {","2019","            assertThat(accessor.getObject(\"po*\")).isEqualTo(Collections.emptyList());","2020","            assertThat(accessor.getObject(\"ps*\")).isEqualTo(Collections.emptyList());","2029","        final String eventTemplate = writeJson(asMap(","2030","                \"exception\", asMap(","2031","                        \"message\", asMap(","2034","                        \"className\", asMap(","2037","                \"exceptionRootCause\", asMap(","2038","                        \"message\", asMap(","2041","                        \"className\", asMap(","2044","                \"source\", asMap(","2045","                        \"lineNumber\", asMap(","2048","                        \"fileName\", asMap(","2113","    private static Map<String, Object> asMap(final Object... pairs) {"],"delete":["227","        final String eventTemplate = writeJson(Map(","228","                timestampFieldName, Map(","230","                        \"pattern\", Map(\"timeZone\", \"Europe\/Amsterdam\")),","252","        final String eventTemplate = writeJson(Map(","253","                \"mapValue3\", Map(\"$resolver\", \"message\"),","293","        final String eventTemplate = writeJson(Map(","294","                \"message\", Map(\"$resolver\", \"message\")));","330","        final String eventTemplate = writeJson(Map(","331","                \"typedValue\", Map(","334","                \"stringifiedValue\", Map(","370","        final String eventTemplate = writeJson(Map(","371","                \"message\", Map(","429","        final String eventTemplate = writeJson(Map(","465","        final String eventTemplate = writeJson(Map(","466","                \"ex_class\", Map(","469","                \"ex_message\", Map(","472","                \"ex_stacktrace\", Map(","476","                \"root_ex_class\", Map(","479","                \"root_ex_message\", Map(","482","                \"root_ex_stacktrace\", Map(","529","        final String eventTemplate = writeJson(Map(","530","                \"ex_class\", Map(","533","                \"ex_message\", Map(","536","                \"ex_stacktrace\", Map(","540","                \"root_ex_class\", Map(","543","                \"root_ex_message\", Map(","546","                \"root_ex_stacktrace\", Map(","595","        final String eventTemplate = writeJson(Map(","596","                \"message\", Map(\"$resolver\", \"message\"),","597","                \"marker\", Map(","673","        final String template = writeJson(Map(","674","                \"name\", Map(","677","                \"positionArg\", Map(","680","                \"notFoundArg\", Map(","763","        String eventTemplate = writeJson(Map(","764","                directlyAccessedKey, Map(","767","                directlyAccessedNullPropertyKey, Map(","854","        final String eventTemplate = writeJson(Map(","855","                mapFieldName, Map(","942","        final String eventTemplate = writeJson(Map(","943","                \"ignoredFieldName\", Map(","946","                        \"flatten\", Map(\"prefix\", prefix))));","977","        final String eventTemplate = writeJson(Map(","978","                \"mapValue1\", Map(","981","                \"mapValue2\", Map(","1015","        final String eventTemplate = writeJson(Map(","1016","                \"message\", Map(\"$resolver\", \"message\")));","1053","        final String eventTemplate = writeJson(Map(","1054","                \"message\", Map(\"$resolver\", \"message\")));","1080","        final String stackTraceElementTemplate = writeJson(Map(","1081","                classNameFieldName, Map(","1084","                methodNameFieldName, Map(","1087","                fileNameFieldName, Map(","1090","                lineNumberFieldName, Map(","1096","        final String eventTemplate = writeJson(Map(","1097","                stackTraceFieldName, Map(","1233","        final String eventTemplate = writeJson(Map(","1234","                messageKey, Map(\"$resolver\", \"message\"),","1236","                nullValueKey, Map(","1313","        final String eventTemplate = writeJson(Map(","1314","                \"ex_stacktrace\", Map(","1394","                Map(","1402","                Map(","1412","        final String eventTemplate = writeJson(Map(","1413","                \"epochSecs\", Map(","1415","                        \"epoch\", Map(\"unit\", \"secs\")),","1416","                \"epochSecsRounded\", Map(","1418","                        \"epoch\", Map(","1421","                \"epochSecsNanos\", Map(","1423","                        \"epoch\", Map(\"unit\", \"secs.nanos\")),","1424","                \"epochMillis\", Map(","1426","                        \"epoch\", Map(\"unit\", \"millis\")),","1427","                \"epochMillisRounded\", Map(","1429","                        \"epoch\", Map(","1432","                \"epochMillisNanos\", Map(","1434","                        \"epoch\", Map(\"unit\", \"millis.nanos\")),","1435","                \"epochNanos\", Map(","1437","                        \"epoch\", Map(\"unit\", \"nanos\"))));","1493","        final String eventTemplate = writeJson(Map(","1494","                \"timestamp\", Map(","1496","                        \"pattern\", Map(","1546","        final String eventTemplate = writeJson(Map(","1547","                \"severityKeyword\", Map(","1550","                        \"severity\", Map(\"field\", \"keyword\")),","1551","                \"severityCode\", Map(","1554","                        \"severity\", Map(\"field\", \"code\"))));","1599","        final String eventTemplate = writeJson(Map(","1600","                \"exStackTrace\", Map(","1603","                \"exStackTraceString\", Map(","1607","                \"exRootCauseStackTrace\", Map(","1610","                \"exRootCauseStackTraceString\", Map(","1639","        final String eventTemplate = writeJson(Map(","1640","                \"stackTrace\", Map(","1677","        final String eventTemplate = writeJson(Map(\"key\", \"val\"));","1709","        final String eventTemplate = writeJson(Map(","1710","                \"message\", Map(\"$resolver\", \"message\")));","1884","        final String eventTemplate = writeJson(Map(","1885","                \"message\", Map(","1926","    private static void testMessageParameterResolver(MessageFactory messageFactory) {","1929","        final String eventTemplate = writeJson(Map(","1930","                \"po*\", Map(","1932","                \"ps*\", Map(","1935","                \"po2\", Map(","1938","                \"ps2\", Map(","1941","                        \"stringified\", true)));","1979","        final String eventTemplate = writeJson(Map(","1980","                \"exception\", Map(","1981","                        \"message\", Map(","1984","                        \"className\", Map(","1987","                \"exceptionRootCause\", Map(","1988","                        \"message\", Map(","1991","                        \"className\", Map(","1994","                \"source\", Map(","1995","                        \"lineNumber\", Map(","1998","                        \"fileName\", Map(","2063","    private static Map<String, Object> Map(final Object... pairs) {"]}],"log4j-layout-template-json\/src\/main\/java\/org\/apache\/logging\/log4j\/layout\/template\/json\/resolver\/MessageParameterResolver.java":[{"add":["113","        if (parameters == null || parameters.length == 0 || index >= parameters.length) {","114","            if (index < 0) {","115","                jsonWriter.writeArrayStart();","116","                jsonWriter.writeArrayEnd();","117","            } else {","118","                jsonWriter.writeNull();","119","            }","169","            final StringBuilder buf = jsonWriter.getStringBuilder();","170","            final int startIndex = buf.length();","177","            } else if (startIndex == buf.length()) {","178","                \/\/ Handle the case in which index was not present in the event.","179","                jsonWriter.writeNull();"],"delete":["113","        if (parameters == null || parameters.length == 0) {","114","            jsonWriter.writeNull();"]}],"src\/changes\/changes.xml":[{"add":["98","      <action issue=\"LOG4J2-2967\" dev=\"ckozak\" type=\"fix\">","99","        Fix JsonTemplateLayout index based parameter resolution when messages contain too few parameters.","100","      <\/action>"],"delete":[]}]}},"bb02fa151637552016790c1f090f209233f27ade":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/OutputStreamManager.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/RollingRandomAccessFileManager.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/RollingRandomAccessFileManagerHeaderFooterTest.java":"ADD","src\/changes\/changes.xml":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/RollingFileManager.java":"MODIFY","log4j-core\/src\/test\/resources\/RollingRandomAccessFileAppenderHeaderFooterTest.xml":"ADD"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/OutputStreamManager.java":[{"add":["30","    protected final Layout<?> layout;","67","        writeFooter();","68","        close();","69","    }","70","","71","    \/**","72","     * Writes the footer.","73","     *\/","74","    protected void writeFooter() {","75","        if (layout == null) {","76","            return;","77","        }"],"delete":["30","","31","    private final Layout<?> layout;","72","        close();"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/RollingRandomAccessFileManager.java":[{"add":["57","        writeHeader();","58","    }","59","","60","    \/**","61","     * Writes the layout's header to the file if it exists.","62","     *\/","63","    private void writeHeader() {","64","        if (layout == null) {","65","            return;","66","        }","67","        byte[] header = layout.getHeader();","68","        if (header == null) {","69","            return;","70","        }","71","        try {","72","            \/\/ write to the file, not to the buffer: the buffer may not be empty","73","            randomAccessFile.write(header, 0, header.length);","74","        } catch (final IOException ioe) {","75","            LOGGER.error(\"Unable to write header\", ioe);","76","        }","121","        writeHeader();"],"delete":[]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/RollingRandomAccessFileManagerHeaderFooterTest.java":[{"add":[],"delete":[]}],"src\/changes\/changes.xml":[{"add":["24","      <action issue=\"LOG4J2-675\" dev=\"rpopma\" type=\"add\">","25","        RollingFile and RollingRandomAccessFile now write the layout footer before rollover.","26","      <\/action>","27","      <action issue=\"LOG4J2-581\" dev=\"rpopma\" type=\"fix\" due-to=\"Alexander Khokhlov\">","28","        RollingRandomAccessFile now writes the layout header after rollover.","29","      <\/action>"],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/RollingFileManager.java":[{"add":["169","                writeFooter();"],"delete":[]}],"log4j-core\/src\/test\/resources\/RollingRandomAccessFileAppenderHeaderFooterTest.xml":[{"add":[],"delete":[]}]}},"4ac441d1f9e4373c5477cc896057469b41b8b1f4":{"changes":{"log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/spi\/LoggerContextShutdownAware.java":"ADD","log4j-slf4j-impl\/src\/test\/java\/org\/apache\/logging\/slf4j\/LoggerContextTest.java":"ADD","log4j-api\/src\/test\/java\/org\/apache\/logging\/log4j\/spi\/LoggerAdapterTest.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/LoggerContext.java":"MODIFY","log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/spi\/LoggerContextShutdownEnabled.java":"ADD","src\/changes\/changes.xml":"MODIFY","log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/spi\/AbstractLoggerAdapter.java":"MODIFY","log4j-slf4j18-impl\/src\/test\/java\/org\/apache\/logging\/slf4j\/LoggerContextTest.java":"ADD","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/selector\/ClassLoaderContextSelector.java":"MODIFY"},"diff":{"log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/spi\/LoggerContextShutdownAware.java":[{"add":[],"delete":[]}],"log4j-slf4j-impl\/src\/test\/java\/org\/apache\/logging\/slf4j\/LoggerContextTest.java":[{"add":[],"delete":[]}],"log4j-api\/src\/test\/java\/org\/apache\/logging\/log4j\/spi\/LoggerAdapterTest.java":[{"add":["18","import org.apache.logging.log4j.Logger;","19","import org.apache.logging.log4j.TestLogger;","20","import org.apache.logging.log4j.TestLoggerContext;","21","import org.apache.logging.log4j.TestLoggerContextFactory;","25","import java.util.HashSet;","27","import java.util.Set;","28","import java.util.concurrent.ConcurrentHashMap;","89","    private static class TestLoggerAdapter2 extends AbstractLoggerAdapter<Logger> {","90","","91","        @Override","92","        protected Logger newLogger(String name, LoggerContext context) {","93","            return context.getLogger(name);","94","        }","95","","96","        @Override","97","        protected LoggerContext getContext() {","98","            return null;","99","        }","100","","101","        public LoggerContext getContext(String fqcn) {","102","            for (LoggerContext lc : registry.keySet()) {","103","                TestLoggerContext2 context = (TestLoggerContext2) lc;","104","                if (fqcn.equals(context.getName())) {","105","                    return context;","106","                }","107","            }","108","            LoggerContext lc = new TestLoggerContext2(fqcn, this);","109","            registry.put(lc, new ConcurrentHashMap<String, Logger>());","110","            return lc;","111","        }","112","    }","113","","114","    private static class TestLoggerContext2 extends TestLoggerContext {","115","        private final String name;","116","        private final LoggerContextShutdownAware listener;","117","","118","        public TestLoggerContext2(String name, LoggerContextShutdownAware listener) {","119","            this.name = name;","120","            this.listener = listener;","121","        }","122","","123","        public String getName() {","124","            return name;","125","        }","126","","127","        public void shutdown() {","128","            listener.contextShutdown(this);","129","        }","130","    }","131","","132","    @Test","133","    public void testCleanup() throws Exception {","134","        final LoggerContextFactory factory = new TestLoggerContextFactory();","135","        final TestLoggerAdapter2 adapter = new TestLoggerAdapter2();","136","        for (int i = 0; i < 5; ++i) {","137","            LoggerContext lc = adapter.getContext(Integer.toString(i));","138","            lc.getLogger(Integer.toString(i));","139","        }","140","        assertEquals(\"Expected 5 LoggerContexts\", 5, adapter.registry.size());","141","        Set<LoggerContext> contexts = new HashSet<>(adapter.registry.keySet());","142","        for (LoggerContext context : contexts) {","143","            ((TestLoggerContext2) context).shutdown();","144","        }","145","        assertEquals(\"Expected 0 LoggerContexts\", 0, adapter.registry.size());","146","    }","147","","148","","149","","186","}"],"delete":["23","import java.util.logging.Logger;","70","    private static class TestLogger extends Logger {","71","        public TestLogger() {","72","            super(\"test\", null);","73","        }","74","    }","75","","125","}"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/LoggerContext.java":[{"add":["24","import java.util.ArrayList;","26","import java.util.Collections;","27","import java.util.List;","53","import org.apache.logging.log4j.spi.LoggerContextShutdownAware;","54","import org.apache.logging.log4j.spi.LoggerContextShutdownEnabled;","67","        implements org.apache.logging.log4j.spi.LoggerContext, AutoCloseable, Terminable, ConfigurationListener,","68","        LoggerContextShutdownEnabled {","88","    private volatile List<LoggerContextShutdownAware> listeners = null;","158","    public void addShutdownListener(LoggerContextShutdownAware listener) {","159","        if (listeners == null) {","160","            synchronized(this) {","161","                if (listeners == null) {","162","                    listeners = Collections.synchronizedList(new ArrayList<LoggerContextShutdownAware>());","163","                }","164","            }","165","        }","166","        listeners.add(listener);","167","    }","168","","169","    public List<LoggerContextShutdownAware> getListeners() {","170","        return listeners;","171","    }","172","","384","        if (listeners != null) {","385","            for (LoggerContextShutdownAware listener : listeners) {","386","                try {","387","                    listener.contextShutdown(this);","388","                } catch (Exception ex) {","389","                    \/\/ Ignore the exception.","390","                }","391","            }","392","        }"],"delete":["62","        implements org.apache.logging.log4j.spi.LoggerContext, AutoCloseable, Terminable, ConfigurationListener {"]}],"log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/spi\/LoggerContextShutdownEnabled.java":[{"add":[],"delete":[]}],"src\/changes\/changes.xml":[{"add":["32","      <action issue=\"LOG4J2-2366\" dev=\"rgoers\" type=\"fix\">","33","        Remove references to LoggerContext when it is shutdown.","34","      <\/action>"],"delete":[]}],"log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/spi\/AbstractLoggerAdapter.java":[{"add":["18","import java.util.HashSet;","20","import java.util.Set;","36","public abstract class AbstractLoggerAdapter<L> implements LoggerAdapter<L>, LoggerContextShutdownAware {","41","    protected final Map<LoggerContext, ConcurrentMap<String, L>> registry = new ConcurrentHashMap<>();","57","    @Override","58","    public void contextShutdown(LoggerContext loggerContext) {","59","        registry.remove(loggerContext);","60","    }","61","","86","                if (context instanceof LoggerContextShutdownEnabled) {","87","                    ((LoggerContextShutdownEnabled) context).addShutdownListener(this);","88","                }","97","     * For unit testing. Consider to be private.","98","     *\/","99","    public Set<LoggerContext> getLoggerContexts() {","100","        return new HashSet<>(registry.keySet());","101","    }","102","","103","    \/**"],"delete":["34","public abstract class AbstractLoggerAdapter<L> implements LoggerAdapter<L> {","39","    protected final Map<LoggerContext, ConcurrentMap<String, L>> registry = new WeakHashMap<>();"]}],"log4j-slf4j18-impl\/src\/test\/java\/org\/apache\/logging\/slf4j\/LoggerContextTest.java":[{"add":[],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/selector\/ClassLoaderContextSelector.java":[{"add":["31","import org.apache.logging.log4j.spi.LoggerContextShutdownAware;","46","public class ClassLoaderContextSelector implements ContextSelector, LoggerContextShutdownAware {","56","    public void contextShutdown(org.apache.logging.log4j.spi.LoggerContext loggerContext) {","57","        if (loggerContext instanceof LoggerContext) {","58","            removeContext((LoggerContext) loggerContext);","59","        }","60","    }","61","","62","    @Override"],"delete":["45","public class ClassLoaderContextSelector implements ContextSelector {"]}]}},"a06d98f8f0718ceed81f9c3585c16397dfdd9bcb":{"changes":{"src\/changes\/changes.xml":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["25","      <action issue=\"LOG4J2-207\" dev=\"ggregory\" type=\"fix\">","26","        Use the Maven group ID org.apache.logging.log4j for all artifacts.","27","      <\/action>"],"delete":[]}]}},"0343e9c7f061cb7073e9ee2d5a1f5671e5c90f9e":{"changes":{"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/layout\/XMLLayoutTest.java":"MODIFY","src\/changes\/changes.xml":"MODIFY","log4j-core\/src\/main\/resources\/Log4j-events.xsd":"MODIFY","src\/site\/xdoc\/manual\/layouts.xml.vm":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/layout\/XMLLayout.java":"MODIFY","log4j-core\/src\/main\/resources\/Log4j-events.dtd":"MODIFY"},"diff":{"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/layout\/XMLLayoutTest.java":[{"add":["18","import static org.junit.Assert.assertEquals;","19","import static org.junit.Assert.assertTrue;","20","","21","import java.util.List;","22","","25","import org.apache.logging.log4j.Marker;","26","import org.apache.logging.log4j.MarkerManager;","33","import org.apache.logging.log4j.test.appender.ListAppender;","43","    private static final String markerTag = \"<Marker>EVENT<\/Marker>\";","104","        final Marker marker = MarkerManager.getMarker(\"EVENT\");","105","        root.error(marker, \"marker test\");","106","","116","","117","        assertTrue(\"Missing Marker-Tag, Expected \"+markerTag+\", Actual\"+list.get(list.size() - 4),","118","                   list.get(list.size() - 4).contains(markerTag));"],"delete":["24","import org.apache.logging.log4j.test.appender.ListAppender;","31","import java.util.List;","32","","33","import static org.junit.Assert.assertEquals;","34","import static org.junit.Assert.assertTrue;","35",""]}],"src\/changes\/changes.xml":[{"add":["22","    <release version=\"2.0-RC1\" date=\"2013-MM-DD\" description=\"Bug fixes and enhancements\">","23","      <action issue=\"LOG4J2-447\" dev=\"ggregory\" type=\"fix\" due-to=\"Jeff Hudren, Mark Paluch, Scott Deboy\">","24","        XMLLayout does not include marker name.","25","      <\/action>"],"delete":["22","    <release version=\"2.0RC1\" date=\"2013-MM-DD\" description=\"Bug fixes and enhancements\">"]}],"log4j-core\/src\/main\/resources\/Log4j-events.xsd":[{"add":["30","                            <xs:element name=\"Marker\" minOccurs=\"0\">","31","                               <xs:complexType mixed=\"true\">","32","                                   <xs:attribute name=\"parent\" type=\"xs:string\" use=\"optional\"\/>","33","                               <\/xs:complexType>","34","                           <\/xs:element>"],"delete":[]}],"src\/site\/xdoc\/manual\/layouts.xml.vm":[{"add":["1311","          Appends a series of <code>Event<\/code> elements as defined in the <a href=\"log4j.dtd\">log4j.dtd<\/a>.","1325","&lt;Events xmlns=&quot;http:\/\/logging.apache.org\/log4j\/2.0\/events&quot;&gt;","1326","  &lt;Event logger=&quot;com.foo.Bar&quot; timestamp=&quot;1373436580419&quot; level=&quot;INFO&quot; thread=&quot;main&quot;&gt;","1327","    &lt;Message&gt;&lt;![CDATA[This is a log message 1]]&gt;&lt;\/Message&gt;","1328","    &lt;Marker parent=&quot;Parent Marker&quot;&gt;&lt;Child Marker&gt;&lt;\/Marker&gt;","1329","  &lt;\/Event&gt;","1330","  &lt;Event logger=&quot;com.foo.Baz&quot; timestamp=&quot;1373436580420&quot; level=&quot;INFO&quot; thread=&quot;main&quot;&gt;","1331","    &lt;Message&gt;&lt;![CDATA[This is a log message 2]]&gt;&lt;\/Message&gt;","1332","    &lt;Marker&gt;&lt;The Marker Name&gt;&lt;\/Marker&gt;","1333","  &lt;\/Event&gt;","1334","&lt;\/Events&gt;<\/pre>","1342","          <h4>Marker<\/h4>","1343","          <p>Markers are represented by a <code>Marker<\/code> element within the <code>Event<\/code> element.","1344","          The <code>Marker<\/code> element appears only when a marker is used in the log message. The name of the marker's","1345","          parent will be provided in the <code>parent<\/code> attribute of the <code>Marker<\/code> element.","1346","          Only the leaf marker is included, not the full hierarchy.","1347","          <\/p>"],"delete":["1311","          Appends a series of <code>event<\/code> elements as defined in the <a href=\"log4j.dtd\">log4j.dtd<\/a>.","1325","&lt;events xmlns=&quot;http:\/\/logging.apache.org\/log4j\/2.0\/events&quot;&gt;","1326","  &lt;event logger=&quot;com.foo.Bar&quot; timestamp=&quot;1373436580419&quot; level=&quot;INFO&quot; thread=&quot;main&quot;&gt;","1327","    &lt;message&gt;&lt;![CDATA[This is a log message 1]]&gt;&lt;\/message&gt;","1328","  &lt;\/event&gt;","1329","  &lt;event logger=&quot;com.foo.Baz&quot; timestamp=&quot;1373436580420&quot; level=&quot;INFO&quot; thread=&quot;main&quot;&gt;","1330","    &lt;message&gt;&lt;![CDATA[This is a log message 2]]&gt;&lt;\/message&gt;","1331","  &lt;\/event&gt;","1332","&lt;\/events&gt;<\/pre>"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/layout\/XMLLayout.java":[{"add":["23","import org.apache.logging.log4j.Marker;","198","        if (event.getMarker() != null) {","199","            final Marker marker = event.getMarker();","200","            buf.append(this.indent2);","201","            buf.append('<');","202","            if (!complete) {","203","                buf.append(this.namespacePrefix);","204","            }","205","            buf.append(\"Marker\");","206","            final Marker parent = marker.getParent();","207","            if (parent != null) {","208","                buf.append(\" parent=\\\"\").append(Transform.escapeHtmlTags(parent.getName())).append(\"\\\"\");","209","            }","210","            buf.append('>');","211","            buf.append(Transform.escapeHtmlTags(marker.getName()));","212","            buf.append(\"<\/\");","213","            if (!complete) {","214","                buf.append(this.namespacePrefix);","215","            }","216","            buf.append(\"Marker>\");","217","            buf.append(this.eol);","218","        }","219",""],"delete":[]}],"log4j-core\/src\/main\/resources\/Log4j-events.dtd":[{"add":["30","<!ENTITY % log4j..Marker \"%log4j_prefix..;Marker\">","31","<!ATTLIST %log4j..Marker;","32","    parent CDATA #IMPLIED","33",">","45","<!ELEMENT %log4j..Event; (%log4j..Message;, (%log4j..NDC;)?, (%log4j..Marker;)?, (%log4j..Throwable;)?, (%log4j..LocationInfo;)?, (%log4j..Properties;)?)>"],"delete":["41","<!ELEMENT %log4j..Event; (%log4j..Message;, (%log4j..NDC;)?, (%log4j..Throwable;)?, (%log4j..LocationInfo;)?, (%log4j..Properties;)?)>"]}]}},"464ed9a82646416821add6f5f07bf701db3b08a0":{"changes":{"log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/util\/StringBuilders.java":"MODIFY","log4j-api\/src\/test\/java\/org\/apache\/logging\/log4j\/message\/MapMessageTest.java":"MODIFY"},"diff":{"log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/util\/StringBuilders.java":[{"add":["173","            switch (c) {","174","                case '\\b':","175","                    toAppendTo.setCharAt(i, '\\\\');","176","                    toAppendTo.insert(i + 1, 'b');","177","                    break;","178","","179","                case '\\t':","180","                    toAppendTo.setCharAt(i, '\\\\');","181","                    toAppendTo.insert(i + 1, 't');","182","                    break;","183","","184","                case '\\f':","185","                    toAppendTo.setCharAt(i, '\\\\');","186","                    toAppendTo.insert(i + 1, 'f');","187","                    break;","188","","189","                case '\\n':","190","                    \/\/ Json string newline character must be encoded as literal \"\\n\"","191","                    toAppendTo.setCharAt(i, '\\\\');","192","                    toAppendTo.insert(i + 1, 'n');","193","                    break;","194","","195","                case '\\r':","196","                    toAppendTo.setCharAt(i, '\\\\');","197","                    toAppendTo.insert(i + 1, 'r');","198","                    break;","199","","200","                case '\"':","201","                case '\\\\':","202","                    \/\/ only \" and \\ need to be escaped; other escapes are optional","203","                    toAppendTo.insert(i, '\\\\');","204","                    break;","205","","206","                default:","207","                    if (Character.isISOControl(c)) {","208","                        \/\/ all iso control characters are in U+00xx","209","                        toAppendTo.setCharAt(i, '\\\\');","210","                        toAppendTo.insert(i + 1, \"u0000\");","211","                        toAppendTo.setCharAt(i + 4, Chars.getUpperCaseHex((c & 0xF0) >> 4));","212","                        toAppendTo.setCharAt(i + 5, Chars.getUpperCaseHex(c & 0xF));","213","                    }"],"delete":["173","            if (c == '\\n') {","174","                \/\/ Json string newline character must be encoded as literal \"\\n\"","175","                toAppendTo.setCharAt(i, '\\\\');","176","                toAppendTo.insert(i + 1, 'n');","177","            } else if (Character.isISOControl(c)) {","178","                \/\/ all iso control characters are in U+00xx","179","                toAppendTo.setCharAt(i, '\\\\');","180","                toAppendTo.insert(i + 1, \"u0000\");","181","                toAppendTo.setCharAt(i + 4, Chars.getUpperCaseHex((c & 0xF0) >> 4));","182","                toAppendTo.setCharAt(i + 5, Chars.getUpperCaseHex(c & 0xF));","183","            } else if (c == '\"' || c == '\\\\') {","184","                \/\/ only \" and \\ need to be escaped; other escapes are optional","185","                toAppendTo.insert(i, '\\\\');"]}],"log4j-api\/src\/test\/java\/org\/apache\/logging\/log4j\/message\/MapMessageTest.java":[{"add":["96","    public void testJSONEscapeNewlineAndOtherControlCharacters() {","97","        final String testMsg = \"hello\\tworld\\r\\nhh\\bere is it\\f\";","101","        final String expected =","102","                \"{\\\"one\\\\ntwo\\\":\\\"hello\\\\tworld\\\\r\\\\nhh\\\\bere is it\\\\f\\\"}\";"],"delete":["96","    public void testJSONEscapeNewline() {","97","        final String testMsg = \"hello\\nworld\";","101","        final String expected = \"{\\\"one\\\\ntwo\\\":\\\"hello\\\\nworld\\\"}\";"]}]}},"c0641527111f1f6ec870824feef8798d75dfd7a5":{"changes":{"src\/site\/xdoc\/manual\/appenders.xml":"MODIFY"},"diff":{"src\/site\/xdoc\/manual\/appenders.xml":[{"add":["3827","          <IfLastModified age=\"P60D\" \/>","3869","            <IfLastModified age=\"P30D\">"],"delete":["3827","          <IfLastModified age=\"60d\" \/>","3869","            <IfLastModified age=\"30d\">"]}]}},"5a3bcf7678739c1db3554ab41bc222a3bd43403f":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/util\/ShutdownRegistrationStrategy.java":"ADD","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/util\/DefaultShutdownRegistrationStrategy.java":"ADD"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/util\/ShutdownRegistrationStrategy.java":[{"add":[],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/util\/DefaultShutdownRegistrationStrategy.java":[{"add":[],"delete":[]}]}},"3517460ec0e750ea1a19261c9aa2eaf24b1b71b3":{"changes":{"src\/site\/pdf.xml":"MODIFY","src\/changes\/changes.xml":"MODIFY","src\/site\/resources\/pdf-config.xml":"MODIFY"},"diff":{"src\/site\/pdf.xml":[{"add":["29","    <item name=\"Introduction\" ref=\"\/manual\/index.xml\"\/>","30","    <item name=\"Architecture\" ref=\"\/manual\/architecture.xml\"\/>","31","    <item name=\"Log4j 1.x Migration\" ref=\"manual\/migration.xml\"\/>","32","    <item name=\"API\" ref=\"\/manual\/api.xml\"\/>","33","    <item name=\"Configuration\" ref=\"\/manual\/configuration.xml.vm\"\/>","34","    <item name=\"Web Applications and JSPs\" ref=\"\/manual\/webapp.xml\"\/>","35","    <item name=\"Plugins\" ref=\"\/manual\/plugins.xml\"\/>","36","    <item name=\"Lookups\" ref=\"\/manual\/lookups.xml\"\/>","37","    <item name=\"Appenders\" ref=\"\/manual\/appenders.xml\"\/>","38","    <item name=\"Layouts\" ref=\"\/manual\/layouts.xml.vm\"\/>","39","    <item name=\"Filters\" ref=\"\/manual\/filters.xml\"\/>","40","    <item name=\"Async Loggers\" ref=\"\/manual\/async.xml\" \/>","41","    <item name=\"JMX\" ref=\"\/manual\/jmx.xml\"\/>","42","    <item name=\"Logging Separation\" ref=\"\/manual\/logsep.xml\"\/>","43","    <item name=\"Extending Log4j\" ref=\"\/manual\/extending.xml\"\/>"],"delete":["29","    <item name=\"Introduction\" ref=\"\/manual\/index.html\"\/>","30","    <item name=\"Architecture\" ref=\"\/manual\/architecture.html\"\/>","31","    <item name=\"Log4j 1.x Migration\" ref=\"manual\/migration.html\"\/>","32","    <item name=\"API\" ref=\"\/manual\/api.html\"\/>","33","    <item name=\"Configuration\" ref=\"\/manual\/configuration.html\"\/>","34","    <item name=\"Web Applications and JSPs\" ref=\"\/manual\/webapp.html\"\/>","35","    <item name=\"Plugins\" ref=\"\/manual\/plugins.html\"\/>","36","    <item name=\"Lookups\" ref=\"\/manual\/lookups.html\"\/>","37","    <item name=\"Appenders\" ref=\"\/manual\/appenders.html\"\/>","38","    <item name=\"Layouts\" ref=\"\/manual\/layouts.html\"\/>","39","    <item name=\"Filters\" ref=\"\/manual\/filters.html\"\/>","40","    <item name=\"Async Loggers\" ref=\"\/manual\/async.html\" \/>","41","    <item name=\"JMX\" ref=\"\/manual\/jmx.html\"\/>","42","    <item name=\"Logging Separation\" ref=\"\/manual\/logsep.html\"\/>","43","    <item name=\"Extending Log4j\" ref=\"\/manual\/extending.html\"\/>"]}],"src\/changes\/changes.xml":[{"add":["42","      <action issue=\"LOG4J2-226\" dev=\"rgoers\" type=\"fix\">","43","        Fix table of contents generation in pdf.","44","      <\/action>"],"delete":[]}],"src\/site\/resources\/pdf-config.xml":[{"add":["26","  <!-- <xsl:attribute-set name=\"layout.master.set.base\">","33","  <\/xsl:attribute-set> -->","40","  <!-- <xsl:attribute-set name=\"body.source\" use-attribute-sets=\"body.pre\">","44","  <\/xsl:attribute-set> -->"],"delete":["26","  <xsl:attribute-set name=\"layout.master.set.base\">","33","  <\/xsl:attribute-set>","40","  <xsl:attribute-set name=\"body.source\" use-attribute-sets=\"body.pre\">","44","  <\/xsl:attribute-set>"]}]}},"fc734a78094f91c5c1c08b02c705f75d6cfcde81":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/lookup\/StrSubstitutor.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/lookup\/StrSubstitutorTest.java":"MODIFY"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/lookup\/StrSubstitutor.java":[{"add":["61"," * Map valuesMap = new HashMap&lt;&gt;();","82"," * Map valuesMap = new HashMap&lt;&gt;();"],"delete":["61"," * Map valuesMap = HashMap();","82"," * Map valuesMap = HashMap();"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/lookup\/StrSubstitutorTest.java":[{"add":["47","    @Test","48","    public void testJavaDocExample() {","49","        final Map<String, String> valuesMap = new HashMap<>();","50","        valuesMap.put(\"animal\", \"quick brown fox\");","51","        valuesMap.put(\"target\", \"lazy dog\");","52","        final String templateString = \"The ${animal} jumped over the ${target}.\";","53","        final StrSubstitutor sub = new StrSubstitutor(valuesMap);","54","        final String resolvedString = sub.replace(templateString);","55","        assertEquals(\"The quick brown fox jumped over the lazy dog.\", resolvedString);","56","    }","57","","58","    @Test","59","    public void testDelimiterExampleFromJavaDoc() {","60","        final Map<String, String> valuesMap = new HashMap<>();","61","        valuesMap.put(\"animal\", \"quick brown fox\");","62","        valuesMap.put(\"target\", \"lazy dog\");","63","        final String templateString = \"The ${animal} jumped over the ${target}. ${undefined.number:-1234567890}\";","64","        final StrSubstitutor sub = new StrSubstitutor(valuesMap);","65","        final String resolvedString = sub.replace(templateString);","66","        assertEquals(\"The quick brown fox jumped over the lazy dog. 1234567890\", resolvedString);","67","    }","68","","69","    @Test","70","    public void testEscapedRecursionExampleFromJavaDoc() {","71","        final Map<String, String> valuesMap = new HashMap<>();","72","        valuesMap.put(\"name\", \"x\");","73","        final String templateString = \"The variable $${${name}} must be used.\";","74","        final StrSubstitutor sub = new StrSubstitutor(valuesMap);","75","","76","        sub.setEnableSubstitutionInVariables(false);","77","        final String resolvedString = sub.replace(templateString);","78","        assertEquals(\"The variable ${x} must be used.\", resolvedString);","79","","80","        \/\/ Due to escaping enabling recursion now should make no difference.","81","        sub.setEnableSubstitutionInVariables(true);","82","        final String resolvedStringWithRecursion = sub.replace(templateString);","83","        assertEquals(resolvedString, resolvedStringWithRecursion);","84","    }","85","","86","    @Test","87","    public void testPrePostfixRecursionExampleFromJavaDoc() {","88","        final Map<String, String> valuesMap = new HashMap<>();","89","        valuesMap.put(\"name\", \"x\");","90","        final String templateString = \"The variable ${$[name]} must be used.\";","91","        final StrSubstitutor sub = new StrSubstitutor(valuesMap, \"$[\", \"]\");","92","        final String resolvedString = sub.replace(templateString);","93","        assertEquals(\"The variable ${x} must be used.\", resolvedString);","94","    }","95","","96","    @Test","97","    public void testRecursionExampleFromJavaDoc() {","98","        final Map<String, String> valuesMap = new HashMap<>();","99","        valuesMap.put(\"name\", \"x\");","100","        valuesMap.put(\"x\", \"3\");","101","        final String templateString = \"The value ${${name}} must be used.\";","102","        final StrSubstitutor sub = new StrSubstitutor(valuesMap);","103","","104","        sub.setEnableSubstitutionInVariables(false);","105","        assertEquals(\"The value ${${name}} must be used.\", sub.replace(templateString));","106","","107","        sub.setEnableSubstitutionInVariables(true);","108","        assertEquals(\"The value 3 must be used.\", sub.replace(templateString));","109","    }","110","","111","    @Test","112","    public void testValueEscapeDelimiter() {","113","        final Map<String, String> valuesMap = new HashMap<>();","114","        \/\/ Example from MainMapLookup. Key contains \":-\"","115","        valuesMap.put(\"main:--file\", \"path\/file.txt\");","116","        \/\/ Create substitutor, initially without support for escaping :-","117","        final StrSubstitutor sub = new StrSubstitutor(","118","                new PropertiesLookup(valuesMap),","119","                StrSubstitutor.DEFAULT_PREFIX,","120","                StrSubstitutor.DEFAULT_SUFFIX,","121","                StrSubstitutor.DEFAULT_ESCAPE,","122","                StrSubstitutor.DEFAULT_VALUE_DELIMITER,","123","                null \/\/ Ensure valueEscapeMatcher == null","124","        );","125","        \/\/ regular default values work without a valueEscapeMatcher.","126","        assertEquals(\"3\", sub.replace(\"${y:-3}\"));","127","        \/\/ variables with ':-' are treated as if they have a default value","128","        assertEquals(\"-file\", sub.replace(\"${main:--file}\"));","129","        \/\/ yet escaping doesn't work anymore (results in the original string).","130","        assertEquals(\"${main:\\\\--file}\", sub.replace(\"${main:\\\\--file}\"));","131","","132","        \/\/ ensure there is valueEscapeMatcher (by resetting the value delimiter)","133","        sub.setValueDelimiter(StrSubstitutor.DEFAULT_VALUE_DELIMITER_STRING);","134","        \/\/ now the escaped variable with \":-\" in it will be resolved.","135","        assertEquals(\"path\/file.txt\", sub.replace(\"${main:\\\\--file}\"));","136","        \/\/ default values continue to work:","137","        assertEquals(\"no help\", sub.replace(\"${main:\\\\--help:-no help}\"));","138","        \/\/ even in minimalistic corner case:","139","        assertEquals(\"\", sub.replace(\"${:\\\\-:-}\"));","140","    }"],"delete":[]}]}},"9ed470fcef1da227d8a24f7bd81de4dd487775ab":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/OutputStreamManager.java":"MODIFY","src\/changes\/changes.xml":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/OutputStreamManagerTest.java":"MODIFY"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/OutputStreamManager.java":[{"add":["280","        try {","281","            if (buf.remaining() > 0) {","282","                writeToDestination(buf.array(), buf.arrayOffset() + buf.position(), buf.remaining());","283","            }","284","        } finally {","285","            buf.clear();"],"delete":["280","        if (buf.remaining() > 0) {","281","            writeToDestination(buf.array(), buf.arrayOffset() + buf.position(), buf.remaining());","283","        buf.clear();"]}],"src\/changes\/changes.xml":[{"add":["33","      <action issue=\"LOG4J2-3028\" dev=\"ckozak\" type=\"fix\" due-to=\"Jakub Kozlowski\">","34","        OutputStreamManager.flushBuffer always resets the buffer, previously the buffer was not reset after an exception.","35","      <\/action>"],"delete":[]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/OutputStreamManagerTest.java":[{"add":["19","import java.io.IOException;","20","import java.io.OutputStream;","55","","56","    @Test","57","    public void testOutputStreamAppenderFlushClearsBufferOnException() {","58","        IOException exception = new IOException();","59","        final OutputStream throwingOutputStream = new OutputStream() {","60","            @Override","61","            public void write(int b) throws IOException {","62","                throw exception;","63","            }","64","        };","65","","66","        final int bufferSize = 3;","67","        OutputStreamManager outputStreamManager = new OutputStreamManager(throwingOutputStream, \"test\", null, false, bufferSize);","68","","69","        for (int i = 0; i < bufferSize - 1; i++) {","70","            outputStreamManager.getByteBuffer().put((byte) 0);","71","        }","72","","73","        assertEquals(outputStreamManager.getByteBuffer().remaining(), 1);","74","","75","        AppenderLoggingException appenderLoggingException = assertThrows(AppenderLoggingException.class, () -> outputStreamManager.flushBuffer(outputStreamManager.getByteBuffer()));","76","        assertEquals(appenderLoggingException.getCause(), exception);","77","","78","        assertEquals(outputStreamManager.getByteBuffer().limit(), outputStreamManager.getByteBuffer().capacity());","79","    }"],"delete":[]}]}},"60f64cc1599a055427e83b3b49e5e91c382a6bdf":{"changes":{"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggersWithAsyncAppenderTest.java":"ADD","src\/changes\/changes.xml":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/AsyncAppender.java":"MODIFY","log4j-core\/src\/test\/resources\/AsyncLoggersWithAsyncAppenderTest.xml":"ADD"},"diff":{"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggersWithAsyncAppenderTest.java":[{"add":[],"delete":[]}],"src\/changes\/changes.xml":[{"add":["24","      <action issue=\"LOG4J2-668\" dev=\"rpopma\" type=\"fix\">","25","        Correctly process log events when combining AsyncLoggers with AsyncAppender.","26","      <\/action>"],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/AsyncAppender.java":[{"add":["29","import org.apache.logging.log4j.core.async.RingBufferLogEvent;","130","    public void append(LogEvent logEvent) {","135","            if (!(logEvent instanceof RingBufferLogEvent)) {","136","                return; \/\/ only know how to Serialize Log4jLogEvents and RingBufferLogEvents","137","            }","138","            logEvent = ((RingBufferLogEvent) logEvent).createMemento();"],"delete":["129","    public void append(final LogEvent logEvent) {","134","            return; \/\/ only know how to Serialize Log4jLogEvents"]}],"log4j-core\/src\/test\/resources\/AsyncLoggersWithAsyncAppenderTest.xml":[{"add":[],"delete":[]}]}},"715bc5062f009283c0a2aca65f7923dd55095f28":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jmx\/AsyncAppenderAdminMBean.java":"ADD","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jmx\/AppenderAdmin.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jmx\/RingBufferAdminMBean.java":"ADD","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jmx\/Server.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jmx\/RingBufferAdmin.java":"ADD","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jmx\/AsyncAppenderAdmin.java":"ADD","src\/changes\/changes.xml":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLogger.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggerConfigHelper.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggerConfig.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/AsyncAppender.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jmx\/AppenderAdminMBean.java":"MODIFY"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jmx\/AsyncAppenderAdminMBean.java":[{"add":[],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jmx\/AppenderAdmin.java":[{"add":["21","import org.apache.logging.log4j.core.filter.AbstractFilterable;","75","    public boolean isIgnoreExceptions() {","83","","84","    @Override","85","    public String getFilter() {","86","        if (appender instanceof AbstractFilterable) {","87","            return String.valueOf(((AbstractFilterable) appender).getFilter());","88","        }","89","        return null;","90","    }"],"delete":["74","    public boolean isExceptionSuppressed() {"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jmx\/RingBufferAdminMBean.java":[{"add":[],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jmx\/Server.java":[{"add":["36","import org.apache.logging.log4j.core.appender.AsyncAppender;","37","import org.apache.logging.log4j.core.async.AsyncLogger;","38","import org.apache.logging.log4j.core.async.AsyncLoggerConfig;","39","import org.apache.logging.log4j.core.async.AsyncLoggerContext;","153","                    unregisterAsyncLoggerConfigRingBufferAdmins(context.getName(), mbs);","155","                    unregisterAsyncAppenders(context.getName(), mbs);","197","        unregisterAllMatching(search, mbs); \/\/ unregister context mbean","200","        unregisterAsyncAppenders(contextName, mbs);","201","        unregisterAsyncLoggerRingBufferAdmins(contextName, mbs);","202","        unregisterAsyncLoggerConfigRingBufferAdmins(contextName, mbs);","220","    \/**","221","     * Registers MBeans for all contexts in the list.","222","     * First unregisters each context (and nested loggers, appender etc)","223","     * to prevent InstanceAlreadyExistsExceptions.","224","     *\/","230","            \/\/ first unregister the context and all nested loggers & appenders","231","            unregisterContext(ctx.getName());","232","            ","235","            ","236","            if (ctx instanceof AsyncLoggerContext) {","237","                RingBufferAdmin rbmbean = AsyncLogger.createRingBufferAdmin(ctx.getName());","238","                mbs.registerMBean(rbmbean, rbmbean.getObjectName());","239","            }","257","    private static void unregisterAsyncAppenders(final String contextName,","258","            final MBeanServer mbs) {","259","        final String pattern = AsyncAppenderAdminMBean.PATTERN;","260","        final String search = String.format(pattern, contextName, \"*\");","261","        unregisterAllMatching(search, mbs);","262","    }","263","","264","    private static void unregisterAsyncLoggerRingBufferAdmins(final String contextName,","265","            final MBeanServer mbs) {","266","        final String pattern1 = RingBufferAdminMBean.PATTERN_ASYNC_LOGGER;","267","        final String search1 = String.format(pattern1, contextName);","268","        unregisterAllMatching(search1, mbs);","269","    }","270","","271","    private static void unregisterAsyncLoggerConfigRingBufferAdmins(final String contextName,","272","            final MBeanServer mbs) {","273","        final String pattern2 = RingBufferAdminMBean.PATTERN_ASYNC_LOGGER_CONFIG;","274","        final String search2 = String.format(pattern2, contextName, \"*\");","275","        unregisterAllMatching(search2, mbs);","276","    }","277","","299","            ","300","            if (cfg instanceof AsyncLoggerConfig) {","301","                AsyncLoggerConfig async = (AsyncLoggerConfig) cfg;","302","                RingBufferAdmin rbmbean = async.createRingBufferAdmin(ctx.getName());","303","                mbs.registerMBean(rbmbean, rbmbean.getObjectName());","304","            }","314","            ","315","            if (appender instanceof AsyncAppender) {","316","                AsyncAppender async = ((AsyncAppender) appender);","317","                final AsyncAppenderAdmin mbean = new AsyncAppenderAdmin(ctx.getName(), async);","318","                mbs.registerMBean(mbean, mbean.getObjectName());","319","            } else {","320","                final AppenderAdmin mbean = new AppenderAdmin(ctx.getName(), appender);","321","                mbs.registerMBean(mbean, mbean.getObjectName());","322","            }"],"delete":["191","        unregisterAllMatching(search, mbs);","265","            final AppenderAdmin mbean = new AppenderAdmin(ctx.getName(), appender);","266","            mbs.registerMBean(mbean, mbean.getObjectName());"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jmx\/RingBufferAdmin.java":[{"add":[],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jmx\/AsyncAppenderAdmin.java":[{"add":[],"delete":[]}],"src\/changes\/changes.xml":[{"add":["23","      <action issue=\"LOG4J2-423\" dev=\"rpopma\" type=\"add\">","24","        Added MBeans for instrumenting AsyncAppenders and AsyncLogger RingBuffers,","25","        exposing queue size, remaining capacity and other attributes.","26","      <\/action>"],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLogger.java":[{"add":["31","import org.apache.logging.log4j.core.jmx.RingBufferAdmin;","68"," * RollingRandomAccessFileAppender, with immediateFlush=false. These appenders","69"," * have built-in support for the batching mechanism used by the Disruptor","70"," * library, and they will flush to disk at the end of each batch. This means","71"," * that even with immediateFlush=false, there will never be any items left in","72"," * the buffer; all log events will all be written to disk in a very efficient","73"," * manner.","93","        disruptor = new Disruptor<RingBufferLogEvent>(RingBufferLogEvent.FACTORY, ringBufferSize, executor,","100","        LOGGER.debug(\"Starting AsyncLogger disruptor with ringbuffer size {}...\", disruptor.getRingBuffer()","101","                .getBufferSize());","107","        final String userPreferredRBSize = System.getProperty(\"AsyncLogger.RingBufferSize\",","108","                String.valueOf(ringBufferSize));","113","                LOGGER.warn(\"Invalid RingBufferSize {}, using minimum size {}.\", userPreferredRBSize,","114","                        RINGBUFFER_MIN_SIZE);","118","            LOGGER.warn(\"Invalid RingBufferSize {}, using default size {}.\", userPreferredRBSize, ringBufferSize);","148","            final Class<? extends ExceptionHandler> klass = (Class<? extends ExceptionHandler>) Class.forName(cls);","153","            LOGGER.debug(\"AsyncLogger.ExceptionHandler not set: error creating \" + cls + \": \", ignored);","161","     * ","166","    public AsyncLogger(final LoggerContext context, final String name, final MessageFactory messageFactory) {","179","    public void log(final Marker marker, final String fqcn, final Level level, final Message data, final Throwable t) {","189","        info.translator.setValues(this, getName(), marker, fqcn, level, data, t, \/\/","223","     * ","228","        event.mergePropertiesIntoContextMap(properties, config.config.getStrSubstitutor());","256","","257","    \/**","258","     * Creates and returns a new {@code RingBufferAdmin} that instruments the","259","     * ringbuffer of the {@code AsyncLogger}.","260","     * ","261","     * @param contextName name of the global {@code AsyncLoggerContext}","262","     *\/","263","    public static RingBufferAdmin createRingBufferAdmin(String contextName) {","264","        return RingBufferAdmin.forAsyncLogger(disruptor.getRingBuffer(), contextName);","265","    }"],"delete":["67"," * RollingRandomAccessFileAppender, with immediateFlush=false. These appenders have","68"," * built-in support for the batching mechanism used by the Disruptor library,","69"," * and they will flush to disk at the end of each batch. This means that even","70"," * with immediateFlush=false, there will never be any items left in the buffer;","71"," * all log events will all be written to disk in a very efficient manner.","91","        disruptor = new Disruptor<RingBufferLogEvent>(","92","                RingBufferLogEvent.FACTORY, ringBufferSize, executor,","99","        LOGGER.debug(","100","                \"Starting AsyncLogger disruptor with ringbuffer size {}...\",","101","                disruptor.getRingBuffer().getBufferSize());","107","        final String userPreferredRBSize = System.getProperty(","108","                \"AsyncLogger.RingBufferSize\", String.valueOf(ringBufferSize));","113","                LOGGER.warn(","114","                        \"Invalid RingBufferSize {}, using minimum size {}.\",","115","                        userPreferredRBSize, RINGBUFFER_MIN_SIZE);","119","            LOGGER.warn(\"Invalid RingBufferSize {}, using default size {}.\",","120","                    userPreferredRBSize, ringBufferSize);","150","            final","151","            Class<? extends ExceptionHandler> klass = (Class<? extends ExceptionHandler>) Class","152","                    .forName(cls);","157","            LOGGER.debug(","158","                    \"AsyncLogger.ExceptionHandler not set: error creating \"","159","                            + cls + \": \", ignored);","167","     *","172","    public AsyncLogger(final LoggerContext context, final String name,","173","            final MessageFactory messageFactory) {","186","    public void log(final Marker marker, final String fqcn, final Level level, final Message data,","187","            final Throwable t) {","197","        info.translator.setValues(this, getName(), marker, fqcn, level, data,","198","                t, \/\/","232","     *","237","        event.mergePropertiesIntoContextMap(properties,","238","                config.config.getStrSubstitutor());"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggerConfigHelper.java":[{"add":["24","import org.apache.logging.log4j.core.jmx.RingBufferAdmin;","286","    \/**","287","     * Creates and returns a new {@code RingBufferAdmin} that instruments the","288","     * ringbuffer of this {@code AsyncLoggerConfig}.","289","     * ","290","     * @param contextName name of the {@code LoggerContext}","291","     * @param loggerConfigName name of the logger config","292","     *\/","293","    public RingBufferAdmin createRingBufferAdmin(String contextName, String loggerConfigName) {","294","        return RingBufferAdmin.forAsyncLoggerConfig(disruptor.getRingBuffer(), contextName, loggerConfigName);","295","    }","296",""],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggerConfig.java":[{"add":["35","import org.apache.logging.log4j.core.jmx.RingBufferAdmin;","134","     * Creates and returns a new {@code RingBufferAdmin} that instruments the","135","     * ringbuffer of this {@code AsyncLoggerConfig}.","136","     * ","137","     * @param contextName name of the {@code LoggerContext}","138","     *\/","139","    public RingBufferAdmin createRingBufferAdmin(String contextName) {","140","        return helper.createRingBufferAdmin(contextName, getName());","141","    }","142","","143","    \/**"],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/AsyncAppender.java":[{"add":["55","    private final int queueSize;","72","        this.queueSize = queueSize;","268","","269","    \/**","270","     * Returns the names of the appenders that this asyncAppender delegates to","271","     * as an array of Strings.","272","     * @return the names of the sink appenders","273","     *\/","274","    public String[] getAppenderRefStrings() {","275","        final String[] result = new String[appenderRefs.length];","276","        for (int i = 0; i < result.length; i++) {","277","            result[i] = appenderRefs[i].getRef();","278","        }","279","        return result;","280","    }","281","    ","282","    \/**","283","     * Returns {@code true} if this AsyncAppender will take a snapshot of the stack with","284","     * every log event to determine the class and method where the logging call","285","     * was made.","286","     * @return {@code true} if location is included with every event, {@code false} otherwise","287","     *\/","288","    public boolean isIncludeLocation() {","289","        return includeLocation;","290","    }","291","    ","292","    \/**","293","     * Returns {@code true} if this AsyncAppender will block when the queue is full,","294","     * or {@code false} if events are dropped when the queue is full.","295","     * @return whether this AsyncAppender will block or drop events when the queue is full.","296","     *\/","297","    public boolean isBlocking() {","298","        return blocking;","299","    }","300","    ","301","    \/**","302","     * Returns the name of the appender that any errors are logged to or {@code null}.","303","     * @return the name of the appender that any errors are logged to or {@code null}","304","     *\/","305","    public String getErrorRef() {","306","        return errorRef;","307","    }","308","    ","309","    public int getQueueCapacity() {","310","        return queueSize;","311","    }","312","    ","313","    public int getQueueRemainingCapacity() {","314","        return queue.remainingCapacity();","315","    }"],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/jmx\/AppenderAdminMBean.java":[{"add":["73","    boolean isIgnoreExceptions();","83","","84","    \/**","85","     * Returns a string description of all filters configured for the","86","     * instrumented {@code Appender}.","87","     *","88","     * @return a string description of all configured filters for this","89","     *         appender","90","     *\/","91","    String getFilter();"],"delete":["73","    boolean isExceptionSuppressed();"]}]}},"43425c5235b12b1514d391099ef0d09ebb29e0f0":{"changes":{"src\/changes\/changes.xml":"MODIFY","log4j-core\/pom.xml":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["24","      <action issue=\"LOG4J2-663\" dev=\"mattsicker\" type=\"fix\" due-to=\"Florian Brunner\">","25","        Fix OSGi Import-Package problem with the JMS API.","26","      <\/action>"],"delete":[]}],"log4j-core\/pom.xml":[{"add":["93","      <optional>true<\/optional>"],"delete":[]}]}},"565e9c22bed92184daa4021a6c4305f2751e51d0":{"changes":{"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/impl\/ThrowableProxyTest.java":"MODIFY"},"diff":{"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/impl\/ThrowableProxyTest.java":[{"add":["244","\tpublic void testSuppressedExceptions() {","245","\t\tException e = new Exception(\"Root exception\");","246","\t\te.addSuppressed(new IOException(\"Suppressed #1\"));","247","\t\te.addSuppressed(new IOException(\"Suppressed #2\"));","248","\t\tLogManager.getLogger().error(\"Error\", e);","249","\t\tfinal ThrowableProxy proxy = new ThrowableProxy(e);","250","\t\tString extendedStackTraceAsString = proxy.getExtendedStackTraceAsString();","251","\t\tassertTrue(extendedStackTraceAsString.contains(\"\\tSuppressed: java.io.IOException: Suppressed #1\"));","252","\t\tassertTrue(extendedStackTraceAsString.contains(\"\\tSuppressed: java.io.IOException: Suppressed #1\"));","253","\t}","256","\tpublic void testCauseSuppressedExceptions() {","257","\t\tException cause = new Exception(\"Nested exception\");","258","\t\tcause.addSuppressed(new IOException(\"Suppressed #1\"));","259","\t\tcause.addSuppressed(new IOException(\"Suppressed #2\"));","260","\t\tLogManager.getLogger().error(\"Error\", new Exception(cause));","261","\t\tfinal ThrowableProxy proxy = new ThrowableProxy(new Exception(\"Root exception\", cause));","262","\t\tString extendedStackTraceAsString = proxy.getExtendedStackTraceAsString();","263","\t\tassertTrue(extendedStackTraceAsString.contains(\"\\tSuppressed: java.io.IOException: Suppressed #1\"));","264","\t\tassertTrue(extendedStackTraceAsString.contains(\"\\tSuppressed: java.io.IOException: Suppressed #1\"));","265","\t}"],"delete":["244","    public void testSuppressedExceptions() {","245","        Exception e = new Exception();","246","        e.addSuppressed(new IOException(\"Suppressed #1\"));","247","        e.addSuppressed(new IOException(\"Suppressed #2\"));","248","        LogManager.getLogger().error(\"Error\", e);","249","        final ThrowableProxy proxy = new ThrowableProxy(e);","250","        String extendedStackTraceAsString = proxy.getExtendedStackTraceAsString();","251","        assertTrue(extendedStackTraceAsString.contains(\"Suppressed #1\"));","252","        assertTrue(extendedStackTraceAsString.contains(\"Suppressed #2\"));","253","    }","256","    public void testCauseSuppressedExceptions() {","257","        Exception cause = new Exception();","258","        cause.addSuppressed(new IOException(\"Suppressed #1\"));","259","        cause.addSuppressed(new IOException(\"Suppressed #2\"));","260","        LogManager.getLogger().error(\"Error\", cause);","261","        final ThrowableProxy proxy = new ThrowableProxy(new Exception(cause));","262","        String extendedStackTraceAsString = proxy.getExtendedStackTraceAsString();","263","        assertTrue(extendedStackTraceAsString.contains(\"Suppressed #1\"));","264","        assertTrue(extendedStackTraceAsString.contains(\"Suppressed #2\"));","265","    }"]}]}},"8908e1dcb0906f46837e10175099001d1fe75133":{"changes":{"log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/ZeroFilterFixture.java":"ADD","log4j-1.2-api\/src\/test\/resources\/LOG4J2-3247.properties":"ADD","log4j-1.2-api\/src\/main\/java\/org\/apache\/log4j\/config\/PropertiesConfiguration.java":"MODIFY","src\/changes\/changes.xml":"MODIFY","log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/PropertiesConfigurationTest.java":"MODIFY"},"diff":{"log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/ZeroFilterFixture.java":[{"add":[],"delete":[]}],"log4j-1.2-api\/src\/test\/resources\/LOG4J2-3247.properties":[{"add":[],"delete":[]}],"log4j-1.2-api\/src\/main\/java\/org\/apache\/log4j\/config\/PropertiesConfiguration.java":[{"add":["560","                if (head == null) {"],"delete":["560","                if (head != null) {"]}],"src\/changes\/changes.xml":[{"add":["39","      <action issue=\"LOG4J2-3247\" dev=\"ggregory\" type=\"fix\">","40","        PropertiesConfiguration.parseAppenderFilters NPE when parsing properties file filters.","41","      <\/action>"],"delete":[]}],"log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/PropertiesConfigurationTest.java":[{"add":["18","import static org.junit.Assert.assertNotNull;","19","import static org.junit.Assert.assertTrue;","20","","21","import java.io.File;","22","import java.io.FileInputStream;","23","import java.io.InputStream;","24","import java.util.List;","25","import java.util.Map;","26","","94","    ","95","    @Test","96","    public void testFilter() throws Exception {","97","        try (LoggerContext loggerContext = configure(\"target\/test-classes\/LOG4J2-3247.properties\")) {","98","            \/\/ configure() not thrown an NPE.","99","        }","100","    }"],"delete":["30","import java.io.File;","31","import java.io.FileInputStream;","32","import java.io.InputStream;","33","import java.util.List;","34","import java.util.Map;","35","","36","import static org.junit.Assert.assertNotNull;","37","import static org.junit.Assert.assertTrue;","38",""]}]}},"c8031ec84b3005596bd7ef5cb765cea74ef828aa":{"changes":{"src\/changes\/changes.xml":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["155","        NullPointerException in org.apache.logging.log4j.util.LoaderUtil.getClassLoaders() when using Bootstrap class loader."],"delete":["155","        NullPointerException in org.apache.logging.log4j.util.LoaderUtil.getClassLoaders() when using Bootstrap classloader."]}]}},"d55f00fbff5dcb69138734e2734723f5d693bf5b":{"changes":{"src\/changes\/changes.xml":"MODIFY","log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/util\/LoaderUtil.java":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["71","      <action issue=\"LOG4J2-1035\" dev=\"ggregory\" type=\"update\">","72","        Log4j2 tries to SystemClassLoader when running on Google AppEngine.","73","      <\/action>"],"delete":[]}],"log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/util\/LoaderUtil.java":[{"add":["96","            return ccl == null && !GET_CLASS_LOADER_DISABLED ? ClassLoader.getSystemClassLoader() : ccl;","194","            GET_CLASS_LOADER_DISABLED ? null : ClassLoader.getSystemClassLoader()"],"delete":["96","            return ccl == null ? ClassLoader.getSystemClassLoader() : ccl;","194","            ClassLoader.getSystemClassLoader()"]}]}},"467a121c296d32827c875f9f41cdcbb7c003ad49":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/TlsSyslogFrame.java":"MODIFY","src\/changes\/changes.xml":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/TlsSyslogFrameTest.java":"MODIFY"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/TlsSyslogFrame.java":[{"add":["18","import java.nio.charset.StandardCharsets;","23"," * Wraps messages that are formatted according to RFC 5425.","28","    private final String message;","29","    private final int byteLength;","32","        this.message = message;","33","        final byte[] messageBytes = message.getBytes(StandardCharsets.UTF_8);","34","        byteLength = messageBytes.length;","41","    @Override","42","    public String toString() {","43","        return Integer.toString(byteLength) + Chars.SPACE + message;","47","    public int hashCode() {","48","        final int prime = 31;","49","        int result = 1;","50","        result = prime * result + ((message == null) ? 0 : message.hashCode());","51","        return result;","54","    @Override","55","    public boolean equals(final Object obj) {","56","        if (this == obj) {","57","            return true;","58","        }","59","        if (obj == null) {","60","            return false;","61","        }","62","        if (!(obj instanceof TlsSyslogFrame)) {","63","            return false;","64","        }","65","        final TlsSyslogFrame other = (TlsSyslogFrame) obj;","66","        if (message == null) {","67","            if (other.message != null) {","68","                return false;","69","            }","70","        } else if (!message.equals(other.message)) {","71","            return false;","72","        }","73","        return true;"],"delete":["18","import java.nio.charset.Charset;","23"," * Wrapper for messages that are formatted according to RFC 5425.","28","    private String message;","29","    private int messageLengthInBytes;","32","        setMessage(message);","39","    public void setMessage(final String message) {","40","        this.message = message;","41","        setLengthInBytes();","42","    }","43","","44","    private void setLengthInBytes() {","45","        messageLengthInBytes = message.length();","46","    }","47","","48","    public byte[] getBytes() {","49","        final String frame = toString();","50","        return frame.getBytes(Charset.defaultCharset());","54","    public String toString() {","55","        final String length = Integer.toString(messageLengthInBytes);","56","        return length + Chars.SPACE + message;","59","    public boolean equals(final TlsSyslogFrame frame) {","60","        return isLengthEquals(frame) && isMessageEquals(frame);","63","    private boolean isLengthEquals(final TlsSyslogFrame frame) {","64","        return this.messageLengthInBytes == frame.messageLengthInBytes;","65","    }","66","","67","    private boolean isMessageEquals(final TlsSyslogFrame frame) {","68","        return this.message.equals(frame.message);","69","    }"]}],"src\/changes\/changes.xml":[{"add":["46","      <action issue=\"LOG4J2-1260\" dev=\"ggregory\" type=\"fix\" due-to=\"Blake Day, Gary Gregory\">","47","        TlsSyslogFrame calculates message length incorrectly.","48","      <\/action>"],"delete":[]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/TlsSyslogFrameTest.java":[{"add":["18","import java.nio.charset.StandardCharsets;","25","    private static final String TEST_MESSAGE = \"The quick brown fox jumps over the lazy dog\";","29","        final TlsSyslogFrame first = new TlsSyslogFrame(TEST_MESSAGE);","30","        final TlsSyslogFrame second = new TlsSyslogFrame(TEST_MESSAGE);","31","        Assert.assertEquals(first, second);","32","        Assert.assertEquals(first.hashCode(), second.hashCode());","39","        Assert.assertNotEquals(first, second);","40","        Assert.assertNotEquals(first.hashCode(), second.hashCode());","41","    }","42","","43","    @Test","44","    public void testToString() {","45","        final TlsSyslogFrame frame = new TlsSyslogFrame(TEST_MESSAGE);","46","        final int length = TEST_MESSAGE.getBytes(StandardCharsets.UTF_8).length;","47","        final String expected = Integer.toString(length) + Chars.SPACE + TEST_MESSAGE;","48","        Assert.assertEquals(expected, frame.toString());"],"delete":["18","import java.util.Arrays;","25","    private static final String TESTMESSAGE = \"The quick brown fox jumps over the lazy dog\";","26","","27","    @Test","28","    public void messageSetByConstructor() {","29","        final TlsSyslogFrame frame = new TlsSyslogFrame(TESTMESSAGE);","30","        final byte[] representation = frame.getBytes();","31","        final byte[] expected = getByteRepresentation(TESTMESSAGE);","32","        Assert.assertTrue(Arrays.equals(representation, expected));","33","    }","34","","35","    @Test","36","    public void messageSetBySetter() {","37","        final TlsSyslogFrame frame = new TlsSyslogFrame(\"Some text\");","38","        frame.setMessage(TESTMESSAGE);","39","        final byte[] representation = frame.getBytes();","40","        final byte[] expected = getByteRepresentation(TESTMESSAGE);","41","        Assert.assertTrue(Arrays.equals(representation, expected));","42","    }","43","","44","    @Test","45","    public void checkGetBytes() {","46","        final TlsSyslogFrame frame = new TlsSyslogFrame(TESTMESSAGE);","47","        final byte[] representation = frame.getBytes();","48","        final byte[] expected = getByteRepresentation(TESTMESSAGE);","49","        Assert.assertTrue(Arrays.equals(representation, expected));","50","    }","51","","52","    private byte[] getByteRepresentation(final String message) {","53","        final String frame = message.length() + Character.toString(Chars.SPACE) + message;","54","        final byte[] representation = frame.getBytes();","55","        return representation;","56","    }","60","        final TlsSyslogFrame first = new TlsSyslogFrame(\"A message\");","61","        final TlsSyslogFrame second = new TlsSyslogFrame(\"A message\");","62","        Assert.assertTrue(first.equals(second));","69","        Assert.assertFalse(first.equals(second));"]}]}},"2a18cc1182ecb7e8d2facf76460563d175df1250":{"changes":{"log4j-api\/src\/test\/java\/org\/apache\/logging\/log4j\/TestLogger.java":"MODIFY","src\/changes\/changes.xml":"MODIFY","log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/simple\/SimpleLogger.java":"MODIFY"},"diff":{"log4j-api\/src\/test\/java\/org\/apache\/logging\/log4j\/TestLogger.java":[{"add":["63","        final Map<String, String> mdc = ThreadContext.getImmutableContext();"],"delete":["63","        final Map<String, String> mdc = ThreadContext.getContext();"]}],"src\/changes\/changes.xml":[{"add":["26","      <action issue=\"LOG4J2-1033\" dev=\"ggregory\" type=\"fix\" due-to=\"Mikael St?ldal\">","27","        SimpleLogger creates unnecessary Map objects by calling ThreadContext.getContext() instead of getImmutableContext().","28","      <\/action>"],"delete":[]}],"log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/simple\/SimpleLogger.java":[{"add":["147","            final Map<String, String> mdc = ThreadContext.getImmutableContext();"],"delete":["147","            final Map<String, String> mdc = ThreadContext.getContext();"]}]}},"121a4a3db42297b2af9f144c2b8788bcde36a0e2":{"changes":{"log4j-1.2-api\/src\/main\/java\/org\/apache\/log4j\/builders\/appender\/RollingFileAppenderBuilder.java":"MODIFY","src\/changes\/changes.xml":"MODIFY"},"diff":{"log4j-1.2-api\/src\/main\/java\/org\/apache\/log4j\/builders\/appender\/RollingFileAppenderBuilder.java":[{"add":["179","        if (!bufferedIo) {"],"delete":["179","        if (bufferedIo) {"]}],"src\/changes\/changes.xml":[{"add":["32","      <action issue=\"LOG4J2-3274\" dev=\"rgoers\" type=\"fix\" due-to=\"Faisal Khan Thayub Khan\">","33","        Buffered I\/O checked had inverted logic in RollingFileAppenderBuidler.","34","      <\/action>"],"delete":["44","      <action issue=\"LOG4J2-3242\" dev=\"rgoers\" type=\"fix\">","45","        Limit JNDI to the java protocol only. JNDI will remain disabled by default. The enablement","46","        property has been renamed to 'log4j2.enableJndiJava'","47","      <\/action>"]}]}},"2f38e4f622ab03228bda3b1c2f68aa4d58ff9b22":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/util\/datetime\/FastDateParser.java":"MODIFY","src\/changes\/changes.xml":"MODIFY"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/util\/datetime\/FastDateParser.java":[{"add":["121","     *","238","     *","248","     *","258","     *","336","     *","346","     *","365","     *","433","     *","459","                 *","481","     *","494","     *","505","     *","514","     *","551","         *","568","     *","637","     *","652","     *","679","         *","718","         *","774","         *","813","         *","840","         *","857","                    final String currentZoneName = zoneNames[i];","858","                    if (currentZoneName == null) {","859","                        continue;","860","                    }","861","                    final String zoneName = currentZoneName.toLowerCase(locale);","908","         *","942","         *"],"delete":["121","     * ","238","     * ","248","     * ","258","     * ","336","     * ","346","     * ","365","     * ","433","     * ","459","                 * ","481","     * ","494","     * ","505","     * ","514","     * ","551","         * ","568","     * ","637","     * ","652","     * ","679","         * ","718","         * ","774","         * ","813","         * ","840","         * ","857","                    final String zoneName = zoneNames[i].toLowerCase(locale);","904","         * ","938","         * "]}],"src\/changes\/changes.xml":[{"add":["26","      <action issue=\"LOG4J2-1279\" dev=\"rpopma\" type=\"fix\" due-to=\"Tony Baines\">","27","        Prevent NullPointerException in FastDateParser$TimeZoneStrategy.","28","      <\/action>"],"delete":[]}]}},"885ca8deb335065323323e78bbb6e52841d884bd":{"changes":{"log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/PropertiesRollingWithPropertiesTest.java":"MODIFY","log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/TestConfigurator.java":"ADD","log4j-1.2-api\/src\/main\/java\/org\/apache\/log4j\/builders\/appender\/SyslogAppenderBuilder.java":"MODIFY","log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/XmlConfigurationFactoryTest.java":"MODIFY","log4j-1.2-api\/src\/test\/resources\/log4j1-syslog-protocol-udp.properties":"ADD","log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/SyslogAppenderTest.java":"MODIFY","log4j-1.2-api\/src\/main\/java\/org\/apache\/log4j\/config\/Log4j1ConfigurationFactory.java":"MODIFY","log4j-1.2-api\/src\/test\/resources\/log4j1-syslog-protocol-default.properties":"ADD","log4j-1.2-api\/src\/main\/java\/org\/apache\/log4j\/config\/PropertySetter.java":"MODIFY","log4j-1.2-api\/src\/test\/resources\/log4j1-syslog-protocol-udp.xml":"ADD","log4j-1.2-api\/src\/main\/java\/org\/apache\/log4j\/config\/PropertiesConfiguration.java":"MODIFY","log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/AutoConfigTest.java":"MODIFY","log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/XmlConfigurationTest.java":"MODIFY","log4j-1.2-api\/src\/test\/resources\/log4j1-syslog-protocol-tcp.xml":"ADD","log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/Log4j1ConfigurationFactoryTest.java":"MODIFY","log4j-1.2-api\/src\/test\/resources\/log4j1-syslog-protocol-tcp.properties":"ADD","log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/PropertiesReconfigurationTest.java":"MODIFY","log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/PropertiesConfigurationFactoryTest.java":"MODIFY","log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/SyslogAppenderConfigurationTest.java":"ADD","\/dev\/null":"DELETE","log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/RewriteAppenderTest.java":"MODIFY","log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/XmlReconfigurationTest.java":"MODIFY","src\/changes\/changes.xml":"MODIFY","log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/AsyncAppenderTest.java":"MODIFY","log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/MapRewriteAppenderTest.java":"MODIFY","log4j-1.2-api\/src\/test\/resources\/log4j1-syslog.xml":"MODIFY","log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/PropertiesConfigurationTest.java":"MODIFY"},"diff":{"log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/PropertiesRollingWithPropertiesTest.java":[{"add":["18","import static org.junit.Assert.assertTrue;","20","import java.io.File;","21",""],"delete":["18","import java.io.File;","19","import java.io.FileInputStream;","20","import java.io.InputStream;","21","import java.util.List;","22","import java.util.Map;","24","import org.apache.log4j.ListAppender;","27","import org.apache.log4j.bridge.AppenderAdapter;","28","import org.apache.log4j.spi.LoggingEvent;","29","import org.apache.logging.log4j.core.Appender;","30","import org.apache.logging.log4j.core.LoggerContext;","31","import org.apache.logging.log4j.core.config.Configuration;","32","import org.apache.logging.log4j.core.config.ConfigurationSource;","33","import org.apache.logging.log4j.core.config.Configurator;","37","import static org.junit.Assert.assertNotNull;","38","import static org.junit.Assert.assertTrue;","39",""]}],"log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/TestConfigurator.java":[{"add":[],"delete":[]}],"log4j-1.2-api\/src\/main\/java\/org\/apache\/log4j\/builders\/appender\/SyslogAppenderBuilder.java":[{"add":["64","    private static final String PROTOCOL_PARAM = \"protocol\";","65","","82","        AtomicReference<Protocol> protocol = new AtomicReference<>();","109","                        case PROTOCOL_PARAM:","110","                            protocol.set(Protocol.valueOf(currentElement.getAttribute(VALUE_ATTR)));","111","                            break;","118","        return createAppender(name, config, layout.get(), facility.get(), filter.get(), host.get(), level.get(), protocol.get());","130","        String protocol = getProperty(PROTOCOL_PARAM, Protocol.TCP.name());","132","        return createAppender(name, configuration, layout, facility, filter, syslogHost, level, Protocol.valueOf(protocol));","136","            String facility, final Filter filter, final String syslogHost, final String level, final Protocol protocol) {","159","                .withProtocol(protocol)"],"delete":["112","        return createAppender(name, config, layout.get(), facility.get(), filter.get(), host.get(), level.get());","125","        return createAppender(name, configuration, layout, facility, filter, syslogHost, level);","129","            String facility, final Filter filter, final String syslogHost, final String level) {","152","                .withProtocol(Protocol.TCP)"]}],"log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/XmlConfigurationFactoryTest.java":[{"add":["18","import static org.junit.Assert.assertTrue;","19","","20","import java.io.File;","21",""],"delete":["24","import java.io.File;","25","import static org.junit.Assert.assertTrue;","26",""]}],"log4j-1.2-api\/src\/test\/resources\/log4j1-syslog-protocol-udp.properties":[{"add":[],"delete":[]}],"log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/SyslogAppenderTest.java":[{"add":["26","import org.apache.logging.log4j.core.config.ConfigurationFactory;","45","        System.setProperty(ConfigurationFactory.LOG4J1_CONFIGURATION_FILE_PROPERTY, \"target\/test-classes\/log4j1-syslog.xml\");","50","        System.clearProperty(ConfigurationFactory.LOG4J1_CONFIGURATION_FILE_PROPERTY);"],"delete":["24","import org.apache.log4j.Log4j1Constants;","45","        System.setProperty(Log4j1Constants.DEFAULT_CONFIGURATION_KEY, \"target\/test-classes\/log4j1-syslog.xml\");","50","        System.clearProperty(Log4j1Constants.DEFAULT_CONFIGURATION_KEY);"]}],"log4j-1.2-api\/src\/main\/java\/org\/apache\/log4j\/config\/Log4j1ConfigurationFactory.java":[{"add":["39","    private static final String[] SUFFIXES = { \".properties\" };"],"delete":["39","    private static final String[] SUFFIXES = {\".properties\"};"]}],"log4j-1.2-api\/src\/test\/resources\/log4j1-syslog-protocol-default.properties":[{"add":[],"delete":[]}],"log4j-1.2-api\/src\/main\/java\/org\/apache\/log4j\/config\/PropertySetter.java":[{"add":["30","import org.apache.log4j.Appender;","31","import org.apache.log4j.Level;","32","import org.apache.log4j.Priority;","33","import org.apache.log4j.spi.ErrorHandler;","34","import org.apache.log4j.spi.OptionHandler;","35","import org.apache.logging.log4j.Logger;","36","import org.apache.logging.log4j.core.util.OptionConverter;","37","import org.apache.logging.log4j.status.StatusLogger;","38",""],"delete":["21","import org.apache.log4j.Appender;","22","import org.apache.log4j.Level;","23","import org.apache.log4j.Priority;","24","import org.apache.log4j.spi.ErrorHandler;","25","import org.apache.log4j.spi.OptionHandler;","26","import org.apache.logging.log4j.Logger;","27","import org.apache.logging.log4j.core.util.OptionConverter;","28","import org.apache.logging.log4j.status.StatusLogger;","29",""]}],"log4j-1.2-api\/src\/test\/resources\/log4j1-syslog-protocol-udp.xml":[{"add":[],"delete":[]}],"log4j-1.2-api\/src\/main\/java\/org\/apache\/log4j\/config\/PropertiesConfiguration.java":[{"add":["18","import java.io.IOException;","19","import java.io.InputStream;","20","import java.lang.reflect.InvocationTargetException;","21","import java.util.ArrayList;","22","import java.util.Enumeration;","23","import java.util.HashMap;","24","import java.util.List;","25","import java.util.Map;","26","import java.util.Properties;","27","import java.util.SortedMap;","28","import java.util.StringTokenizer;","29","import java.util.TreeMap;","30",""],"delete":["34","import java.io.IOException;","35","import java.io.InputStream;","36","import java.lang.reflect.InvocationTargetException;","37","import java.util.ArrayList;","38","import java.util.Enumeration;","39","import java.util.HashMap;","40","import java.util.List;","41","import java.util.Map;","42","import java.util.Properties;","43","import java.util.SortedMap;","44","import java.util.StringTokenizer;","45","import java.util.TreeMap;","46",""]}],"log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/AutoConfigTest.java":[{"add":["18","import static org.junit.Assert.assertNotNull;","19","import static org.junit.Assert.assertTrue;","20","","21","import java.util.List;","22","import java.util.Map;","23",""],"delete":["30","import java.util.List;","31","import java.util.Map;","32","","33","import static org.junit.Assert.assertNotNull;","34","import static org.junit.Assert.assertTrue;","35",""]}],"log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/XmlConfigurationTest.java":[{"add":["18","import static org.junit.Assert.assertNotNull;","19","import static org.junit.Assert.assertTrue;","20","","21","import java.io.File;","22","import java.util.List;","23","import java.util.Map;","24","","32","import org.apache.logging.log4j.core.config.Configuration;","42","        final LoggerContext loggerContext = TestConfigurator.configure(\"target\/test-classes\/log4j1-list.xml\");","66","        TestConfigurator.configure(\"target\/test-classes\/log4j1-file.xml\");"],"delete":["23","import org.apache.log4j.xml.XmlConfigurationFactory;","25","import org.apache.logging.log4j.core.config.Configuration;","26","import org.apache.logging.log4j.core.config.ConfigurationSource;","27","import org.apache.logging.log4j.core.config.Configurator;","29","import org.apache.logging.log4j.spi.LoggerContextFactory;","32","import java.io.File;","33","import java.io.IOException;","34","import java.io.InputStream;","35","import java.nio.file.Files;","36","import java.nio.file.Path;","37","import java.nio.file.Paths;","38","import java.util.List;","39","import java.util.Map;","40","","41","import static org.junit.Assert.assertNotNull;","42","import static org.junit.Assert.assertTrue;","43","","49","    static LoggerContext configureXml(final String configLocation) throws IOException {","50","        final Path path = Paths.get(configLocation);","51","        final InputStream is = Files.newInputStream(path);","52","        final ConfigurationSource source = new ConfigurationSource(is, path.toFile());","53","        final LoggerContextFactory factory = org.apache.logging.log4j.LogManager.getFactory();","54","        final LoggerContext context = (LoggerContext) org.apache.logging.log4j.LogManager.getContext(false);","55","        final Configuration configuration = new XmlConfigurationFactory().getConfiguration(context, source);","56","        assertNotNull(\"No configuration created\", configuration);","57","        Configurator.reconfigure(configuration);","58","        return context;","59","    }","60","","63","        final LoggerContext loggerContext = configureXml(\"target\/test-classes\/log4j1-list.xml\");","87","        configureXml(\"target\/test-classes\/log4j1-file.xml\");"]}],"log4j-1.2-api\/src\/test\/resources\/log4j1-syslog-protocol-tcp.xml":[{"add":[],"delete":[]}],"log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/Log4j1ConfigurationFactoryTest.java":[{"add":["54","    static Configuration getConfiguration(final String configResource) throws URISyntaxException {","55","        final URL configLocation = ClassLoader.getSystemResource(configResource);","56","        assertNotNull(configResource, configLocation);","57","        final Configuration configuration = new Log4j1ConfigurationFactory().getConfiguration(null, \"test\",","58","                configLocation.toURI());","59","        assertNotNull(configuration);","60","        return configuration;","61","    }","62",""],"delete":["84","\tprivate Configuration getConfiguration(final String configResource) throws URISyntaxException {","85","\t\tfinal URL configLocation = ClassLoader.getSystemResource(configResource);","86","\t\tassertNotNull(configResource, configLocation);","87","\t\tfinal Configuration configuration = new Log4j1ConfigurationFactory().getConfiguration(null, \"test\",","88","\t\t\t\tconfigLocation.toURI());","89","\t\tassertNotNull(configuration);","90","\t\treturn configuration;","91","\t}","92",""]}],"log4j-1.2-api\/src\/test\/resources\/log4j1-syslog-protocol-tcp.properties":[{"add":[],"delete":[]}],"log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/PropertiesReconfigurationTest.java":[{"add":["18","import static org.junit.Assert.assertNotNull;","19","import static org.junit.Assert.assertTrue;","20","import static org.junit.Assert.fail;","21","","51","        LoggerContext context = TestConfigurator.configure(file.toString());"],"delete":["19","import java.io.FileInputStream;","20","import java.io.InputStream;","29","import org.apache.logging.log4j.core.config.ConfigurationSource;","30","import org.apache.logging.log4j.core.config.Configurator;","32","import org.apache.logging.log4j.spi.LoggerContextFactory;","35","import static org.junit.Assert.assertNotNull;","36","import static org.junit.Assert.assertTrue;","37","import static org.junit.Assert.fail;","38","","56","        LoggerContext context = configure(file);","83","","84","    private LoggerContext configure(File configFile) throws Exception {","85","        InputStream is = new FileInputStream(configFile);","86","        ConfigurationSource source = new ConfigurationSource(is, configFile);","87","        LoggerContextFactory factory = org.apache.logging.log4j.LogManager.getFactory();","88","        LoggerContext context = (LoggerContext) org.apache.logging.log4j.LogManager.getContext(false);","89","        Configuration configuration = new PropertiesConfigurationFactory().getConfiguration(context, source);","90","        assertNotNull(\"No configuration created\", configuration);","91","        Configurator.reconfigure(configuration);","92","        return context;","93","    }"]}],"log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/PropertiesConfigurationFactoryTest.java":[{"add":["18","import static org.junit.Assert.assertTrue;","19","","20","import java.io.File;","21",""],"delete":["24","import java.io.File;","25","","26","import static org.junit.Assert.assertTrue;","27",""]}],"log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/SyslogAppenderConfigurationTest.java":[{"add":[],"delete":[]}],"\/dev\/null":[{"add":[],"delete":[]}],"log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/RewriteAppenderTest.java":[{"add":["18","import static org.junit.Assert.assertEquals;","19","import static org.junit.Assert.assertNotNull;","20","import static org.junit.Assert.assertTrue;","21","","22","import java.util.List;","23","import java.util.Map;","24",""],"delete":["32","import java.util.List;","33","import java.util.Map;","34","","35","import static org.junit.Assert.assertEquals;","36","import static org.junit.Assert.assertNotNull;","37","import static org.junit.Assert.assertTrue;","38",""]}],"log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/XmlReconfigurationTest.java":[{"add":["18","import static org.junit.Assert.assertNotNull;","19","import static org.junit.Assert.assertTrue;","20","import static org.junit.Assert.fail;","21","","51","        LoggerContext context = TestConfigurator.configure(file.toString());"],"delete":["19","import java.io.FileInputStream;","20","import java.io.InputStream;","26","import org.apache.log4j.xml.XmlConfigurationFactory;","30","import org.apache.logging.log4j.core.config.ConfigurationSource;","31","import org.apache.logging.log4j.core.config.Configurator;","33","import org.apache.logging.log4j.spi.LoggerContextFactory;","36","import static org.junit.Assert.assertNotNull;","37","import static org.junit.Assert.assertTrue;","38","import static org.junit.Assert.fail;","39","","57","        LoggerContext context = configure(file);","84","","85","    private LoggerContext configure(File configFile) throws Exception {","86","        InputStream is = new FileInputStream(configFile);","87","        ConfigurationSource source = new ConfigurationSource(is, configFile);","88","        LoggerContextFactory factory = org.apache.logging.log4j.LogManager.getFactory();","89","        LoggerContext context = (LoggerContext) org.apache.logging.log4j.LogManager.getContext(false);","90","        Configuration configuration = new XmlConfigurationFactory().getConfiguration(context, source);","91","        assertNotNull(\"No configuration created\", configuration);","92","        Configurator.reconfigure(configuration);","93","        return context;","94","    }"]}],"src\/changes\/changes.xml":[{"add":["31","    <release version=\"2.17.0\" date=\"2021-MM-dd\" description=\"GA Release 2.17.0\">","46","      <action issue=\"LOG4J2-3237\" dev=\"ggregory\" type=\"fix\">","47","        Log4j 1.2 bridge API hard codes protocol to TCP.","48","      <\/action>"],"delete":["31","    <release version=\"2.16.1\" date=\"2021-MM-dd\" description=\"GA Release 2.16.1\">"]}],"log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/AsyncAppenderTest.java":[{"add":["18","import static org.junit.Assert.assertNotNull;","19","import static org.junit.Assert.assertTrue;","20","","21","import java.io.File;","22","import java.io.FileInputStream;","23","import java.io.InputStream;","24","import java.util.List;","25","import java.util.Map;","26",""],"delete":["31","import java.io.File;","32","import java.io.FileInputStream;","33","import java.io.InputStream;","34","import java.util.List;","35","import java.util.Map;","36","","37","import static org.junit.Assert.assertNotNull;","38","import static org.junit.Assert.assertTrue;","39",""]}],"log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/MapRewriteAppenderTest.java":[{"add":["18","import static org.junit.Assert.assertEquals;","19","import static org.junit.Assert.assertNotNull;","20","import static org.junit.Assert.assertTrue;","21","","22","import java.util.HashMap;","23","import java.util.List;","24","import java.util.Map;","25",""],"delete":["32","import java.util.HashMap;","33","import java.util.List;","34","import java.util.Map;","35","","36","import static org.junit.Assert.assertEquals;","37","import static org.junit.Assert.assertNotNull;","38","import static org.junit.Assert.assertTrue;","39",""]}],"log4j-1.2-api\/src\/test\/resources\/log4j1-syslog.xml":[{"add":["35","<\/log4j:configuration>"],"delete":["35","<\/log4j:configuration>"]}],"log4j-1.2-api\/src\/test\/java\/org\/apache\/log4j\/config\/PropertiesConfigurationTest.java":[{"add":["41","    public void testFilter() throws Exception {","42","        try (LoggerContext loggerContext = TestConfigurator.configure(\"target\/test-classes\/LOG4J2-3247.properties\")) {","43","            \/\/ [LOG4J2-3247] configure() should not throw an NPE.","49","        try (LoggerContext loggerContext = TestConfigurator.configure(\"target\/test-classes\/log4j1-list.properties\")) {","73","    public void testProperties() throws Exception {","74","        try (LoggerContext loggerContext = TestConfigurator.configure(\"target\/test-classes\/log4j1-file.properties\")) {","75","            Logger logger = LogManager.getLogger(\"test\");","76","            logger.debug(\"This is a test of the root logger\");","77","            File file = new File(\"target\/temp.A1\");","78","            assertTrue(\"File A1 was not created\", file.exists());","79","            assertTrue(\"File A1 is empty\", file.length() > 0);","80","            file = new File(\"target\/temp.A2\");","81","            assertTrue(\"File A2 was not created\", file.exists());","82","            assertTrue(\"File A2 is empty\", file.length() > 0);"],"delete":["22","import java.io.FileInputStream;","23","import java.io.InputStream;","35","import org.apache.logging.log4j.core.config.ConfigurationSource;","36","import org.apache.logging.log4j.core.config.Configurator;","45","    public void testProperties() throws Exception {","46","        try (LoggerContext loggerContext = configure(\"target\/test-classes\/log4j1-file.properties\")) {","47","            Logger logger = LogManager.getLogger(\"test\");","48","            logger.debug(\"This is a test of the root logger\");","49","            File file = new File(\"target\/temp.A1\");","50","            assertTrue(\"File A1 was not created\", file.exists());","51","            assertTrue(\"File A1 is empty\", file.length() > 0);","52","            file = new File(\"target\/temp.A2\");","53","            assertTrue(\"File A2 was not created\", file.exists());","54","            assertTrue(\"File A2 is empty\", file.length() > 0);","60","        try (LoggerContext loggerContext = configure(\"target\/test-classes\/log4j1-list.properties\")) {","83","    @SuppressWarnings(\"resource\")","84","    private LoggerContext configure(String configLocation) throws Exception {","85","        File file = new File(configLocation);","86","        InputStream is = new FileInputStream(file);","87","        ConfigurationSource source = new ConfigurationSource(is, file);","88","        LoggerContext context = (LoggerContext) org.apache.logging.log4j.LogManager.getContext(false);","89","        Configuration configuration = new PropertiesConfigurationFactory().getConfiguration(context, source);","90","        assertNotNull(\"No configuration created\", configuration);","91","        Configurator.reconfigure(configuration);","92","        return context;","93","    }","94","    ","96","    public void testFilter() throws Exception {","97","        try (LoggerContext loggerContext = configure(\"target\/test-classes\/LOG4J2-3247.properties\")) {","98","            \/\/ configure() not thrown an NPE."]}]}},"b251bcbe8fd9998e394cfd1708cd93756235640d":{"changes":{"log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/spi\/ThreadContextMap.java":"MODIFY","log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/util\/Timer.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/OutputStreamManager.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/AbstractManager.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/action\/AbstractPathAction.java":"MODIFY","log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/message\/StructuredDataMessage.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/ReconfigureAppenderTest.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/util\/Loader.java":"MODIFY","log4j-1.2-api\/src\/main\/java\/org\/apache\/log4j\/bridge\/LogEventAdapter.java":"MODIFY","log4j-liquibase\/src\/site\/markdown\/index.md":"MODIFY","src\/site\/asciidoc\/manual\/json-template-layout.vm.adoc":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/util\/ReflectionUtil.java":"MODIFY","log4j-1.2-api\/src\/main\/java\/org\/apache\/log4j\/spi\/ErrorHandler.java":"MODIFY"},"diff":{"log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/spi\/ThreadContextMap.java":[{"add":["83","     * Removes the context identified by the <code>key<\/code>"],"delete":["83","     * Removes the the context identified by the <code>key<\/code>"]}],"log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/util\/Timer.java":[{"add":["24"," * multiple threads will cause the times to be aggregated."],"delete":["24"," * multiple threads will cause the the times to be aggregated."]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/OutputStreamManager.java":[{"add":["333","     * @param buf the buffer whose contents to write the destination"],"delete":["333","     * @param buf the buffer whose contents to write the the destination"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/AbstractManager.java":[{"add":["38"," * be aware of the pattern: allocate resources on construction and call {@link #close()} at some point."],"delete":["38"," * be aware of the the pattern: allocate resources on construction and call {@link #close()} at some point."]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/action\/AbstractPathAction.java":[{"add":["140","     * Returns the maximum number of directory levels to visit."],"delete":["140","     * Returns the the maximum number of directory levels to visit."]}],"log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/message\/StructuredDataMessage.java":[{"add":["375","     * Formats the message according to the specified format."],"delete":["375","     * Formats the message according the the specified format."]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/ReconfigureAppenderTest.java":[{"add":["141","\t\t\/\/ Override this with a root logger that does not log anywhere as we leave it up the"],"delete":["141","\t\t\/\/ Override this with a root logger that does not log anywhere as we leave it up the the"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/util\/Loader.java":[{"add":["79","     * class ({@code Loader}). Under JDK 1.1, only the class","141","     * class ({@code Loader}). Under JDK 1.1, only the class"],"delete":["79","     * class ({@code Loader}). Under JDK 1.1, only the the class","141","     * class ({@code Loader}). Under JDK 1.1, only the the class"]}],"log4j-1.2-api\/src\/main\/java\/org\/apache\/log4j\/bridge\/LogEventAdapter.java":[{"add":["155","     Returns the context corresponding to the <code>key<\/code> parameter."],"delete":["155","     Returns the the context corresponding to the <code>key<\/code> parameter."]}],"log4j-liquibase\/src\/site\/markdown\/index.md":[{"add":["29","Including this module will automatically make Liquibase log via Log4j 2, due the plugin auto discovery mechanism of"],"delete":["29","Including this module will automatically make Liquibase log via Log4j 2, due the the plugin auto discovery mechanism of"]}],"src\/site\/asciidoc\/manual\/json-template-layout.vm.adoc":[{"add":["44","For instance, given the following JSON template modelling"],"delete":["44","For instance, given the following JSON template modelling the"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/util\/ReflectionUtil.java":[{"add":["182","     * @throws InternalException        wrapper of the underlying exception if checked"],"delete":[]}],"log4j-1.2-api\/src\/main\/java\/org\/apache\/log4j\/spi\/ErrorHandler.java":[{"add":["51","     * LoggingEvent)} with the event parameter set to"],"delete":["51","     * LoggingEvent)} with the the event parameter set to"]}]}},"c77b3cb39312b83b053d23a2158b99ac7de44dd3":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/mom\/JmsAppender.java":"MODIFY","src\/site\/xdoc\/manual\/lookups.xml":"MODIFY","src\/site\/xdoc\/manual\/appenders.xml":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/util\/NetUtils.java":"MODIFY","pom.xml":"MODIFY","log4j-core\/pom.xml":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/net\/JndiManager.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/lookup\/JndiRestrictedLookupTest.java":"ADD","src\/site\/xdoc\/manual\/configuration.xml.vm":"MODIFY","src\/changes\/changes.xml":"MODIFY","log4j-core\/src\/test\/resources\/JndiRestrictedLookup.ldif":"ADD","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/lookup\/JndiExploit.java":"ADD","src\/site\/xdoc\/manual\/extending.xml":"MODIFY"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/mom\/JmsAppender.java":[{"add":["90","        @PluginBuilderAttribute","91","        private String allowedLdapClasses;","92","","93","        @PluginBuilderAttribute","94","        private String allowedLdapHosts;","95","","96","        @PluginBuilderAttribute","97","        private String allowedJndiProtocols;","98","","111","                Properties additionalProperties = null;","112","                if (allowedLdapClasses != null || allowedLdapHosts != null) {","113","                    additionalProperties = new Properties();","114","                    if (allowedLdapHosts != null) {","115","                        additionalProperties.put(JndiManager.ALLOWED_HOSTS, allowedLdapHosts);","116","                    }","117","                    if (allowedLdapClasses != null) {","118","                        additionalProperties.put(JndiManager.ALLOWED_CLASSES, allowedLdapClasses);","119","                    }","120","                    if (allowedJndiProtocols != null) {","121","                        additionalProperties.put(JndiManager.ALLOWED_PROTOCOLS, allowedJndiProtocols);","122","                    }","123","                }","125","                        securityPrincipalName, securityCredentials, additionalProperties);","226","        public Builder setAllowedLdapClasses(final String allowedLdapClasses) {","227","            this.allowedLdapClasses = allowedLdapClasses;","228","            return this;","229","        }","230","","231","        public Builder setAllowedLdapHosts(final String allowedLdapHosts) {","232","            this.allowedLdapHosts = allowedLdapHosts;","233","            return this;","234","        }","235","","236","        public Builder setAllowedJndiProtocols(final String allowedJndiProtocols) {","237","            this.allowedJndiProtocols = allowedJndiProtocols;","238","            return this;","239","        }","240","","251","                    + \", jmsManager=\" + jmsManager + \", allowedLdapClasses=\" + allowedLdapClasses","252","                    + \", allowedLdapHosts=\" + allowedLdapHosts + \", allowedJndiProtocols=\" + allowedJndiProtocols + \"]\";"],"delete":["103","                        securityPrincipalName, securityCredentials, null);","214","                    + \", jmsManager=\" + jmsManager + \"]\";"]}],"src\/site\/xdoc\/manual\/lookups.xml":[{"add":["272","          <p>By default the JDNI Lookup only supports the java, ldap, and ldaps protocols or no protocol. Additional","273","            protocols may be supported by specifying them on the <code>log4j2.allowedJndiProtocols<\/code> property.","274","            When using LDAP Java classes that implement the Referenceable interface are not supported for security","275","            reasons. Only the Java primative classes are supported by default as well as any classes specified by the","276","            <code>log4j2.allowedLdapClasses<\/code> property. When using LDAP only references to the local host name","277","            or ip address are supported along with any hosts or ip addresses listed in the","278","            <code>log4j2.allowedLdapHosts<\/code> property.<\/p>"],"delete":[]}],"src\/site\/xdoc\/manual\/appenders.xml":[{"add":["1558","              <td>allowdLdapClasses<\/td>","1559","              <td>String<\/td>","1560","              <td>null<\/td>","1561","              <td>","1562","                A comma separated list of fully qualified class names that may be accessed by LDAP. The classes","1563","                must implement Serializable. Only applies when the JMS Appender By default only Java primative classes are allowed.","1564","              <\/td>","1565","            <\/tr>","1566","            <tr>","1567","              <td>allowdLdapHosts<\/td>","1568","              <td>String<\/td>","1569","              <td>null<\/td>","1570","              <td>","1571","                A comma separated list of host names or ip addresses that may be accessed by LDAP. By default only","1572","                the local host names and ip addresses are allowed.","1573","              <\/td>","1574","            <\/tr>","1575","            <tr>","1576","              <td>allowdJndiProtocols<\/td>","1577","              <td>String<\/td>","1578","              <td>null<\/td>","1579","              <td>","1580","                A comma separated list of protocol names that JNDI will allow. By default only java, ldap, and ldaps","1581","                are the only allowed protocols.","1582","              <\/td>","1583","            <\/tr>","1584","            <tr>"],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/util\/NetUtils.java":[{"add":["19","import java.net.Inet4Address;","20","import java.net.Inet6Address;","29","import java.util.ArrayList;","32","import java.util.List;","36","import org.apache.logging.log4j.util.Strings;","87","     * Returns all the local host names and ip addresses.","88","     * @return The local host names and ip addresses.","89","     *\/","90","    public static List<String> getLocalIps() {","91","        List<String> localIps = new ArrayList<>();","92","        localIps.add(\"localhost\");","93","        localIps.add(\"127.0.0.1\");","94","        try {","95","            final InetAddress addr = Inet4Address.getLocalHost();","96","            setHostName(addr, localIps);","97","        } catch (final UnknownHostException ex) {","98","            \/\/ Ignore this.","99","        }","100","        try {","101","            final Enumeration<NetworkInterface> interfaces = NetworkInterface.getNetworkInterfaces();","102","            if (interfaces != null) {","103","                while (interfaces.hasMoreElements()) {","104","                    final NetworkInterface nic = interfaces.nextElement();","105","                    final Enumeration<InetAddress> addresses = nic.getInetAddresses();","106","                    while (addresses.hasMoreElements()) {","107","                        final InetAddress address = addresses.nextElement();","108","                        setHostName(address, localIps);","109","                    }","110","                }","111","            }","112","        } catch (final SocketException se) {","113","            \/\/ ignore.","114","        }","115","        return localIps;","116","    }","117","","118","    private static void setHostName(InetAddress address, List<String> localIps) {","119","        String[] parts = address.toString().split(\"\\\\s*\/\\\\s*\");","120","        if (parts.length > 0) {","121","            for (String part : parts) {","122","                if (Strings.isNotBlank(part) && !localIps.contains(part)) {","123","                    localIps.add(part);","124","                }","125","            }","126","        }","127","    }","128","","129","    \/**"],"delete":[]}],"pom.xml":[{"add":["956","      <!-- Testing LDAP -->","957","      <dependency>","958","        <groupId>org.zapodot<\/groupId>","959","        <artifactId>embedded-ldap-junit<\/artifactId>","960","        <version>0.8.1<\/version>","961","        <scope>test<\/scope>","962","      <\/dependency>"],"delete":[]}],"log4j-core\/pom.xml":[{"add":["351","    <dependency>","352","      <groupId>org.zapodot<\/groupId>","353","      <artifactId>embedded-ldap-junit<\/artifactId>","354","      <scope>test<\/scope>","355","    <\/dependency>"],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/net\/JndiManager.java":[{"add":["19","import java.net.URI;","20","import java.net.URISyntaxException;","21","import java.util.ArrayList;","22","import java.util.Arrays;","23","import java.util.HashMap;","24","import java.util.List;","25","import java.util.Locale;","26","import java.util.Map;","31","import javax.naming.NamingEnumeration;","33","import javax.naming.directory.Attribute;","34","import javax.naming.directory.Attributes;","35","import javax.naming.directory.DirContext;","36","import javax.naming.directory.InitialDirContext;","41","import org.apache.logging.log4j.core.util.NetUtils;","42","import org.apache.logging.log4j.util.PropertiesUtil;","45"," * Manages a JNDI {@link javax.naming.directory.DirContext}.","51","    public static final String ALLOWED_HOSTS = \"allowedLdapHosts\";","52","    public static final String ALLOWED_CLASSES = \"allowedLdapClasses\";","53","    public static final String ALLOWED_PROTOCOLS = \"allowedJndiProtocols\";","54","","56","    private static final String PREFIX = \"log4j2.\";","57","    private static final String LDAP = \"ldap\";","58","    private static final String LDAPS = \"ldaps\";","59","    private static final String JAVA = \"java\";","60","    private static final List<String> permanentAllowedHosts = NetUtils.getLocalIps();","61","    private static final List<String> permanentAllowedClasses = Arrays.asList(Boolean.class.getName(),","62","            Byte.class.getName(), Character.class.getName(), Double.class.getName(), Float.class.getName(),","63","            Integer.class.getName(), Long.class.getName(), Short.class.getName(), String.class.getName());","64","    private static final List<String> permanentAllowedProtocols = Arrays.asList(JAVA, LDAP, LDAPS);","65","    private static final String SERIALIZED_DATA = \"javaSerializedData\";","66","    private static final String CLASS_NAME = \"javaClassName\";","67","    private static final String REFERENCE_ADDRESS = \"javaReferenceAddress\";","68","    private static final String OBJECT_FACTORY = \"javaFactory\";","69","    private final List<String> allowedHosts;","70","    private final List<String> allowedClasses;","71","    private final List<String> allowedProtocols;","73","    private final DirContext context;","75","    private JndiManager(final String name, final DirContext context, final List<String> allowedHosts,","76","            final List<String> allowedClasses, final List<String> allowedProtocols) {","79","        this.allowedHosts = allowedHosts;","80","        this.allowedClasses = allowedClasses;","81","        this.allowedProtocols = allowedProtocols;","208","    public synchronized <T> T lookup(final String name) throws NamingException {","209","        try {","210","            URI uri = new URI(name);","211","            if (uri.getScheme() != null) {","212","                if (!allowedProtocols.contains(uri.getScheme().toLowerCase(Locale.ROOT))) {","213","                    LOGGER.warn(\"Log4j JNDI does not allow protocol {}\", uri.getScheme());","214","                    return null;","215","                }","216","                if (LDAP.equalsIgnoreCase(uri.getScheme()) || LDAPS.equalsIgnoreCase(uri.getScheme())) {","217","                    if (!allowedHosts.contains(uri.getHost())) {","218","                        LOGGER.warn(\"Attempt to access ldap server not in allowed list\");","219","                        return null;","220","                    }","221","                    Attributes attributes = this.context.getAttributes(name);","222","                    if (attributes != null) {","223","                        \/\/ In testing the \"key\" for attributes seems to be lowercase while the attribute id is","224","                        \/\/ camelcase, but that may just be true for the test LDAP used here. This copies the Attributes","225","                        \/\/ to a Map ignoring the \"key\" and using the Attribute's id as the key in the Map so it matches","226","                        \/\/ the Java schema.","227","                        Map<String, Attribute> attributeMap = new HashMap<>();","228","                        NamingEnumeration<? extends Attribute> enumeration = attributes.getAll();","229","                        while (enumeration.hasMore()) {","230","                            Attribute attribute = enumeration.next();","231","                            attributeMap.put(attribute.getID(), attribute);","232","                        }","233","                        Attribute classNameAttr = attributeMap.get(CLASS_NAME);","234","                        if (attributeMap.get(SERIALIZED_DATA) != null) {","235","                            if (classNameAttr != null) {","236","                                String className = classNameAttr.get().toString();","237","                                if (!allowedClasses.contains(className)) {","238","                                    LOGGER.warn(\"Deserialization of {} is not allowed\", className);","239","                                    return null;","240","                                }","241","                            } else {","242","                                LOGGER.warn(\"No class name provided for {}\", name);","243","                                return null;","244","                            }","245","                        } else if (attributeMap.get(REFERENCE_ADDRESS) != null","246","                                || attributeMap.get(OBJECT_FACTORY) != null) {","247","                            LOGGER.warn(\"Referenceable class is not allowed for {}\", name);","248","                            return null;","249","                        }","250","                    }","251","                }","252","            }","253","        } catch (URISyntaxException ex) {","254","            \/\/ This is OK.","255","        }","263","            String hosts = data != null ? data.getProperty(ALLOWED_HOSTS) : null;","264","            String classes = data != null ? data.getProperty(ALLOWED_CLASSES) : null;","265","            String protocols = data != null ? data.getProperty(ALLOWED_PROTOCOLS) : null;","266","            List<String> allowedHosts = new ArrayList<>();","267","            List<String> allowedClasses = new ArrayList<>();","268","            List<String> allowedProtocols = new ArrayList<>();","269","            addAll(hosts, allowedHosts, permanentAllowedHosts, ALLOWED_HOSTS, data);","270","            addAll(classes, allowedClasses, permanentAllowedClasses, ALLOWED_CLASSES, data);","271","            addAll(protocols, allowedProtocols, permanentAllowedProtocols, ALLOWED_PROTOCOLS, data);","273","                return new JndiManager(name, new InitialDirContext(data), allowedHosts, allowedClasses,","274","                        allowedProtocols);","280","","281","        private void addAll(String toSplit, List<String> list, List<String> permanentList, String propertyName,","282","                Properties data) {","283","            if (toSplit != null) {","284","                list.addAll(Arrays.asList(toSplit.split(\"\\\\s*,\\\\s*\")));","285","                data.remove(propertyName);","286","            }","287","            toSplit = PropertiesUtil.getProperties().getStringProperty(PREFIX + propertyName);","288","            if (toSplit != null) {","289","                list.addAll(Arrays.asList(toSplit.split(\"\\\\s*,\\\\s*\")));","290","            }","291","            list.addAll(permanentList);","292","        }"],"delete":["23","import javax.naming.InitialContext;","31"," * Manages a JNDI {@link javax.naming.Context}.","39","    private final Context context;","41","    private JndiManager(final String name, final Context context) {","170","    public <T> T lookup(final String name) throws NamingException {","179","                return new JndiManager(name, new InitialContext(data));"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/lookup\/JndiRestrictedLookupTest.java":[{"add":[],"delete":[]}],"src\/site\/xdoc\/manual\/configuration.xml.vm":[{"add":["2149","    <td><a name=\"allowedLdapClasses\"\/>log4j2.allowedLdapClasses<\/td>","2150","    <td>LOG4J_ALLOWED_LDAP_CLASSES<\/td>","2151","    <td>&nbsp;<\/td>","2152","    <td>","2153","      System property that specifies fully qualified class names that may be accessed by LDAP. The classes","2154","      must implement Serializable. By default only Java primative classes are allowed.","2155","    <\/td>","2156","  <\/tr>","2157","  <tr>","2158","    <td><a name=\"allowedLdapHosts\"\/>log4j2.allowedLdapHosts<\/td>","2159","    <td>LOG4J_ALLOWED_LDAP_HOSTS<\/td>","2160","    <td>&nbsp;<\/td>","2161","    <td>","2162","      System property that adds host names or ip addresses that may be access by LDAP. By default it only allows","2163","      the local host names and ip addresses.","2164","    <\/td>","2165","  <\/tr>","2166","  <tr>","2167","    <td><a name=\"allowedJndiProtocols\"\/>log4j2.allowedJndiProtocols<\/td>","2168","    <td>LOG4J_ALLOWED_JNDI_PROTOCOLS<\/td>","2169","    <td>&nbsp;<\/td>","2170","    <td>","2171","      System property that adds protocol names that JNDI will allow. By default it only allows java, ldap, and ldaps.","2172","    <\/td>","2173","  <\/tr>","2174","  <tr>"],"delete":[]}],"src\/changes\/changes.xml":[{"add":["112","      <action issue=\"LOG4J2-3201\" dev=\"rgoers\" type=\"fix\">","113","        Limit the protocols JNDI can use by default. Limit the servers and classes that can be accessed via LDAP.","114","      <\/action>"],"delete":[]}],"log4j-core\/src\/test\/resources\/JndiRestrictedLookup.ldif":[{"add":[],"delete":[]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/lookup\/JndiExploit.java":[{"add":[],"delete":[]}],"src\/site\/xdoc\/manual\/extending.xml":[{"add":["94","              <dd>Locates the LoggerContext by querying JNDI. Please see <a href=\"..\/manual\/configuration.html#allowedJndiProtocols\">log4j2.allowedJndiProtocols<\/a>,","95","                <a href=\"..\/manual\/configuration.html#allowedLdapClasses\">log4j2.allowedLdapClasses<\/a>, and","96","                <a href=\"..\/manual\/configuration.html#allowedLdapHosts\">log4j2.allowedLdapHosts<\/a> for restrictions on using JNDI","97","                with Log4j.<\/dd>"],"delete":["94","              <dd>Locates the LoggerContext by querying JNDI.<\/dd>"]}]}},"50e1924726c060d8ce3f4e9eae4419c420c9e11b":{"changes":{"core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/SocketAppenderTest.java":"MODIFY","src\/changes\/changes.xml":"MODIFY","core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/SocketAppender.java":"MODIFY"},"diff":{"core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/SocketAppenderTest.java":[{"add":["124","    @Test","125","    public void testDefaultProtocol() throws Exception {","126","","127","        final SocketAppender appender = SocketAppender.createAppender(\"localhost\", PORT, null, \"-1\",","128","            \"false\", \"Test\", null, null, null, null, null, null);","129","        assertNotNull(appender);","130","    }","131","","132",""],"delete":[]}],"src\/changes\/changes.xml":[{"add":["25","      <action issue=\"LOG4J2-139\" dev=\"rgoers\" type=\"fix\">","26","        Fix NullPointerException (regression due to fix for LOG4J2-228)","27","      <\/action>"],"delete":[]}],"core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/SocketAppender.java":[{"add":["117","        final Protocol p = EnglishEnums.valueOf(Protocol.class, protocol != null ? protocol : Protocol.TCP.name());"],"delete":["117","        final String prot = protocol != null ? protocol : Protocol.TCP.name();","118","        final Protocol p = EnglishEnums.valueOf(Protocol.class, protocol);"]}]}},"bef3c241a290fe83ada78ead1786e259b9577377":{"changes":{"src\/changes\/changes.xml":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["117","      <action dev=\"ggregory\" type=\"fix\" issue=\"LOG4J2-3326\" due-to=\"Benjamin R?hl, Gary Gregory\">","118","        Fix parsing filters from Log4j 1.2 properties configuration file #680.","119","      <\/action>"],"delete":[]}]}},"9971274fc33b73063f34be5d7045b5eedcccfc2b":{"changes":{"log4j-to-slf4j\/src\/main\/java\/org\/apache\/logging\/slf4j\/SLF4JLoggerContext.java":"MODIFY"},"diff":{"log4j-to-slf4j\/src\/main\/java\/org\/apache\/logging\/slf4j\/SLF4JLoggerContext.java":[{"add":["32","    public SLF4JLoggerContext() {","33","        \/\/ LOG4J2-230, LOG4J2-204 (improve error reporting when misconfigured)","34","        try {","35","            Class.forName(\"org.slf4j.helpers.Log4JLoggerFactory\");","36","            throw new IllegalStateException(\"slf4j-impl jar is mutually exclusive with log4j-to-slf4j jar \"","37","                + \"(the first routes calls from SLF4J to Log4j, the second from Log4j to SLF4J)\");","38","        } catch (Throwable classNotFoundIsGood) {","39","            \/\/ org.slf4j.helpers.Log4JLoggerFactory is not on classpath. Good!","40","        }","41","    }","42",""],"delete":[]}]}},"384ed1e8eea7b0f043e977b8b991527ad721ae2f":{"changes":{"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/async\/RingBufferLogEventTest.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/RingBufferLogEvent.java":"MODIFY","src\/changes\/changes.xml":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggersWithAsyncLoggerConfigTest.java":"ADD","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggerConfigHelper.java":"MODIFY","log4j-core\/src\/test\/resources\/AsyncLoggersWithAsyncLoggerConfigTest.xml":"ADD"},"diff":{"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/async\/RingBufferLogEventTest.java":[{"add":["24","import java.util.Arrays;","25","import java.util.HashMap;","30","import org.apache.logging.log4j.MarkerManager;","32","import org.apache.logging.log4j.core.LogEvent;","37","import org.apache.logging.log4j.spi.MutableThreadContextStack;","195","    ","196","    @Test","197","    public void testCreateMementoReturnsCopy() {","198","        RingBufferLogEvent evt = new RingBufferLogEvent();","199","        String loggerName = \"logger.name\";","200","        Marker marker = MarkerManager.getMarker(\"marked man\");","201","        String fqcn = \"f.q.c.n\";","202","        Level level = Level.TRACE;","203","        Message data = new SimpleMessage(\"message\");","204","        Throwable t = new InternalError(\"not a real error\");","205","        Map<String, String> map = new HashMap<String, String>();","206","        map.put(\"key\", \"value\");","207","        ContextStack contextStack = new MutableThreadContextStack(Arrays.asList(\"a\", \"b\"));","208","        String threadName = \"main\";","209","        StackTraceElement location = null;","210","        long currentTimeMillis = 12345;","211","        evt.setValues(null, loggerName, marker, fqcn, level, data, t, map,","212","                contextStack, threadName, location, currentTimeMillis);","213","        ","214","        LogEvent actual = evt.createMemento();","215","        assertEquals(evt.getLoggerName(), actual.getLoggerName());","216","        assertEquals(evt.getMarker(), actual.getMarker());","217","        assertEquals(evt.getLoggerFqcn(), actual.getLoggerFqcn());","218","        assertEquals(evt.getLevel(), actual.getLevel());","219","        assertEquals(evt.getMessage(), actual.getMessage());","220","        assertEquals(evt.getThrown(), actual.getThrown());","221","        assertEquals(evt.getContextMap(), actual.getContextMap());","222","        assertEquals(evt.getContextStack(), actual.getContextStack());","223","        assertEquals(evt.getThreadName(), actual.getThreadName());","224","        assertEquals(evt.getTimeMillis(), actual.getTimeMillis());","225","        assertEquals(evt.getSource(), actual.getSource());","226","        assertEquals(evt.getThrownProxy(), actual.getThrownProxy());","227","    }"],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/RingBufferLogEvent.java":[{"add":["27","import org.apache.logging.log4j.core.impl.Log4jLogEvent;","38"," * When the Disruptor is started, the RingBuffer is populated with event objects. These objects are then re-used during","39"," * the life of the RingBuffer.","42","    private static final long serialVersionUID = 8462119088943934758L;","44","    \/**","45","     * Creates the events that will be put in the RingBuffer.","46","     *\/","47","    private static class Factory implements EventFactory<RingBufferLogEvent> {","49","        @Override","50","        public RingBufferLogEvent newInstance() {","51","            return new RingBufferLogEvent();","52","        }","53","    }","55","    \/** The {@code EventFactory} for {@code RingBufferLogEvent}s. *\/","56","    public static final Factory FACTORY = new Factory();","58","    private AsyncLogger asyncLogger;","59","    private String loggerName;","60","    private Marker marker;","61","    private String fqcn;","62","    private Level level;","63","    private Message message;","64","    private transient Throwable thrown;","66","    private Map<String, String> contextMap;","67","    private ContextStack contextStack;","68","    private String threadName;","69","    private StackTraceElement location;","70","    private long currentTimeMillis;","71","    private boolean endOfBatch;","72","    private boolean includeLocation;","74","    public void setValues(final AsyncLogger asyncLogger, final String loggerName, final Marker marker,","75","            final String fqcn, final Level level, final Message data, final Throwable throwable,","76","            final Map<String, String> map, final ContextStack contextStack, final String threadName,","77","            final StackTraceElement location, final long currentTimeMillis) {","78","        this.asyncLogger = asyncLogger;","79","        this.loggerName = loggerName;","80","        this.marker = marker;","81","        this.fqcn = fqcn;","82","        this.level = level;","83","        this.message = data;","84","        this.thrown = throwable;","85","        this.thrownProxy = null;","86","        this.contextMap = map;","87","        this.contextStack = contextStack;","88","        this.threadName = threadName;","89","        this.location = location;","90","        this.currentTimeMillis = currentTimeMillis;","91","    }","93","    \/**","94","     * Event processor that reads the event from the ringbuffer can call this method.","95","     * ","96","     * @param endOfBatch flag to indicate if this is the last event in a batch from the RingBuffer","97","     *\/","98","    public void execute(final boolean endOfBatch) {","99","        this.endOfBatch = endOfBatch;","100","        asyncLogger.actualAsyncLog(this);","101","    }","103","    \/**","104","     * Returns {@code true} if this event is the end of a batch, {@code false} otherwise.","105","     * ","106","     * @return {@code true} if this event is the end of a batch, {@code false} otherwise","107","     *\/","108","    @Override","109","    public boolean isEndOfBatch() {","110","        return endOfBatch;","111","    }","113","    @Override","114","    public void setEndOfBatch(final boolean endOfBatch) {","115","        this.endOfBatch = endOfBatch;","116","    }","118","    @Override","119","    public boolean isIncludeLocation() {","120","        return includeLocation;","121","    }","123","    @Override","124","    public void setIncludeLocation(final boolean includeLocation) {","125","        this.includeLocation = includeLocation;","126","    }","128","    @Override","129","    public String getLoggerName() {","130","        return loggerName;","131","    }","133","    @Override","134","    public Marker getMarker() {","135","        return marker;","136","    }","138","    @Override","139","    public String getLoggerFqcn() {","140","        return fqcn;","141","    }","143","    @Override","144","    public Level getLevel() {","145","        if (level == null) {","146","            level = Level.OFF; \/\/ LOG4J2-462, LOG4J2-465","147","        }","148","        return level;","149","    }","151","    @Override","152","    public Message getMessage() {","153","        if (message == null) {","154","            message = new SimpleMessage(Strings.EMPTY);","155","        }","156","        return message;","157","    }","159","    @Override","170","    @Override","171","    public ThrowableProxy getThrownProxy() {","172","        \/\/ lazily instantiate the (expensive) ThrowableProxy","173","        if (thrownProxy == null) {","174","            if (thrown != null) {","175","                thrownProxy = new ThrowableProxy(thrown);","176","            }","177","        }","178","        return this.thrownProxy;","179","    }","181","    @Override","182","    public Map<String, String> getContextMap() {","183","        return contextMap;","184","    }","186","    @Override","187","    public ContextStack getContextStack() {","188","        return contextStack;","189","    }","191","    @Override","192","    public String getThreadName() {","193","        return threadName;","194","    }","196","    @Override","197","    public StackTraceElement getSource() {","198","        return location;","199","    }","201","    @Override","202","    public long getTimeMillis() {","203","        Message msg = getMessage();","204","        if (msg instanceof TimestampMessage) { \/\/ LOG4J2-455","205","            return ((TimestampMessage) msg).getTimestamp();","206","        }","207","        return currentTimeMillis;","208","    }","210","    \/**","211","     * Merges the contents of the specified map into the contextMap, after replacing any variables in the property","212","     * values with the StrSubstitutor-supplied actual values.","213","     * ","214","     * @param properties configured properties","215","     * @param strSubstitutor used to lookup values of variables in properties","216","     *\/","217","    public void mergePropertiesIntoContextMap(final Map<Property, Boolean> properties,","218","            final StrSubstitutor strSubstitutor) {","219","        if (properties == null) {","220","            return; \/\/ nothing to do","221","        }","223","        final Map<String, String> map = contextMap == null ? new HashMap<String, String>()","224","                : new HashMap<String, String>(contextMap);","226","        for (final Map.Entry<Property, Boolean> entry : properties.entrySet()) {","227","            final Property prop = entry.getKey();","228","            if (map.containsKey(prop.getName())) {","229","                continue; \/\/ contextMap overrides config properties","230","            }","231","            final String value = entry.getValue().booleanValue() ? strSubstitutor.replace(prop.getValue()) : prop","232","                    .getValue();","233","            map.put(prop.getName(), value);","234","        }","235","        contextMap = map;","236","    }","238","    \/**","239","     * Release references held by ring buffer to allow objects to be garbage-collected.","240","     *\/","241","    public void clear() {","242","        setValues(null, \/\/ asyncLogger","243","                null, \/\/ loggerName","244","                null, \/\/ marker","245","                null, \/\/ fqcn","246","                null, \/\/ level","247","                null, \/\/ data","248","                null, \/\/ t","249","                null, \/\/ map","250","                null, \/\/ contextStack","251","                null, \/\/ threadName","252","                null, \/\/ location","253","                0 \/\/ currentTimeMillis","254","        );","255","    }","256","","257","    private void writeObject(java.io.ObjectOutputStream out) throws IOException {","258","        getThrownProxy(); \/\/ initialize the ThrowableProxy before serializing","259","        out.defaultWriteObject();","260","    }","261","","262","    \/**","263","     * Creates and returns a new immutable copy of this {@code RingBufferLogEvent}.","264","     * ","265","     * @return a new immutable copy of the data in this {@code RingBufferLogEvent}","266","     *\/","267","    public LogEvent createMemento() {","268","        \/\/ Ideally, would like to use the LogEventFactory here but signature does not match:","269","        \/\/ results in factory re-creating the timestamp, context map and context stack, which we don't want.","270","        return new Log4jLogEvent(loggerName, marker, fqcn, level, message, thrown, contextMap, contextStack,","271","                threadName, location, currentTimeMillis);","272","    }"],"delete":["37"," * When the Disruptor is started, the RingBuffer is populated with event","38"," * objects. These objects are then re-used during the life of the RingBuffer.","41","\tprivate static final long serialVersionUID = 8462119088943934758L;","43","\t\/**","44","\t * Creates the events that will be put in the RingBuffer.","45","\t *\/","46","\tprivate static class Factory implements EventFactory<RingBufferLogEvent> {","48","\t\t@Override","49","\t\tpublic RingBufferLogEvent newInstance() {","50","\t\t\treturn new RingBufferLogEvent();","51","\t\t}","52","\t}","54","\t\/** The {@code EventFactory} for {@code RingBufferLogEvent}s. *\/","55","\tpublic static final Factory FACTORY = new Factory();","57","\tprivate AsyncLogger asyncLogger;","58","\tprivate String loggerName;","59","\tprivate Marker marker;","60","\tprivate String fqcn;","61","\tprivate Level level;","62","\tprivate Message message;","63","\tprivate transient Throwable thrown;","65","\tprivate Map<String, String> contextMap;","66","\tprivate ContextStack contextStack;","67","\tprivate String threadName;","68","\tprivate StackTraceElement location;","69","\tprivate long currentTimeMillis;","70","\tprivate boolean endOfBatch;","71","\tprivate boolean includeLocation;","73","\tpublic void setValues(final AsyncLogger asyncLogger,","74","\t\t\tfinal String loggerName, final Marker marker, final String fqcn,","75","\t\t\tfinal Level level, final Message data, final Throwable throwable,","76","\t\t\tfinal Map<String, String> map, final ContextStack contextStack,","77","\t\t\tfinal String threadName, final StackTraceElement location,","78","\t\t\tfinal long currentTimeMillis) {","79","\t\tthis.asyncLogger = asyncLogger;","80","\t\tthis.loggerName = loggerName;","81","\t\tthis.marker = marker;","82","\t\tthis.fqcn = fqcn;","83","\t\tthis.level = level;","84","\t\tthis.message = data;","85","\t\tthis.thrown = throwable;","86","\t\tthis.thrownProxy = null;","87","\t\tthis.contextMap = map;","88","\t\tthis.contextStack = contextStack;","89","\t\tthis.threadName = threadName;","90","\t\tthis.location = location;","91","\t\tthis.currentTimeMillis = currentTimeMillis;","92","\t}","94","\t\/**","95","\t * Event processor that reads the event from the ringbuffer can call this","96","\t * method.","97","\t * ","98","\t * @param endOfBatch","99","\t *            flag to indicate if this is the last event in a batch from the","100","\t *            RingBuffer","101","\t *\/","102","\tpublic void execute(final boolean endOfBatch) {","103","\t\tthis.endOfBatch = endOfBatch;","104","\t\tasyncLogger.actualAsyncLog(this);","105","\t}","107","\t\/**","108","\t * Returns {@code true} if this event is the end of a batch, {@code false}","109","\t * otherwise.","110","\t * ","111","\t * @return {@code true} if this event is the end of a batch, {@code false}","112","\t *         otherwise","113","\t *\/","114","\t@Override","115","\tpublic boolean isEndOfBatch() {","116","\t\treturn endOfBatch;","117","\t}","119","\t@Override","120","\tpublic void setEndOfBatch(final boolean endOfBatch) {","121","\t\tthis.endOfBatch = endOfBatch;","122","\t}","124","\t@Override","125","\tpublic boolean isIncludeLocation() {","126","\t\treturn includeLocation;","127","\t}","129","\t@Override","130","\tpublic void setIncludeLocation(final boolean includeLocation) {","131","\t\tthis.includeLocation = includeLocation;","132","\t}","134","\t@Override","135","\tpublic String getLoggerName() {","136","\t\treturn loggerName;","137","\t}","139","\t@Override","140","\tpublic Marker getMarker() {","141","\t\treturn marker;","142","\t}","144","\t@Override","145","\tpublic String getLoggerFqcn() {","146","\t\treturn fqcn;","147","\t}","149","\t@Override","150","\tpublic Level getLevel() {","151","\t\tif (level == null) {","152","\t\t\tlevel = Level.OFF; \/\/ LOG4J2-462, LOG4J2-465","153","\t\t}","154","\t\treturn level;","155","\t}","157","\t@Override","158","\tpublic Message getMessage() {","159","\t\tif (message == null) {","160","\t\t\tmessage = new SimpleMessage(Strings.EMPTY);","161","\t\t}","162","\t\treturn message;","163","\t}","165","\t@Override","176","\t@Override","177","\tpublic ThrowableProxy getThrownProxy() {","178","\t    \/\/ lazily instantiate the (expensive) ThrowableProxy","179","\t    if (thrownProxy == null) {","180","\t        if (thrown != null) {","181","\t            thrownProxy = new ThrowableProxy(thrown);","182","\t        }","183","\t    }","184","\t\treturn this.thrownProxy;","185","\t}","187","\t@Override","188","\tpublic Map<String, String> getContextMap() {","189","\t\treturn contextMap;","190","\t}","192","\t@Override","193","\tpublic ContextStack getContextStack() {","194","\t\treturn contextStack;","195","\t}","197","\t@Override","198","\tpublic String getThreadName() {","199","\t\treturn threadName;","200","\t}","202","\t@Override","203","\tpublic StackTraceElement getSource() {","204","\t\treturn location;","205","\t}","207","\t@Override","208","\tpublic long getTimeMillis() {","209","\t\tMessage msg = getMessage();","210","\t\tif (msg instanceof TimestampMessage) { \/\/ LOG4J2-455","211","\t\t\treturn ((TimestampMessage) msg).getTimestamp();","212","\t\t}","213","\t\treturn currentTimeMillis;","214","\t}","216","\t\/**","217","\t * Merges the contents of the specified map into the contextMap, after","218","\t * replacing any variables in the property values with the","219","\t * StrSubstitutor-supplied actual values.","220","\t * ","221","\t * @param properties","222","\t *            configured properties","223","\t * @param strSubstitutor","224","\t *            used to lookup values of variables in properties","225","\t *\/","226","\tpublic void mergePropertiesIntoContextMap(","227","\t\t\tfinal Map<Property, Boolean> properties,","228","\t\t\tfinal StrSubstitutor strSubstitutor) {","229","\t\tif (properties == null) {","230","\t\t\treturn; \/\/ nothing to do","231","\t\t}","233","\t\tfinal Map<String, String> map = contextMap == null ? new HashMap<String, String>()","234","\t\t\t\t: new HashMap<String, String>(contextMap);","236","\t\tfor (final Map.Entry<Property, Boolean> entry : properties.entrySet()) {","237","\t\t\tfinal Property prop = entry.getKey();","238","\t\t\tif (map.containsKey(prop.getName())) {","239","\t\t\t\tcontinue; \/\/ contextMap overrides config properties","240","\t\t\t}","241","\t\t\tfinal String value = entry.getValue().booleanValue() ? strSubstitutor.replace(prop","242","\t\t\t\t\t.getValue()) : prop.getValue();","243","\t\t\tmap.put(prop.getName(), value);","244","\t\t}","245","\t\tcontextMap = map;","246","\t}","248","\t\/**","249","\t * Release references held by ring buffer to allow objects to be","250","\t * garbage-collected.","251","\t *\/","252","\tpublic void clear() {","253","\t\tsetValues(null, \/\/ asyncLogger","254","\t\t\t\tnull, \/\/ loggerName","255","\t\t\t\tnull, \/\/ marker","256","\t\t\t\tnull, \/\/ fqcn","257","\t\t\t\tnull, \/\/ level","258","\t\t\t\tnull, \/\/ data","259","\t\t\t\tnull, \/\/ t","260","\t\t\t\tnull, \/\/ map","261","\t\t\t\tnull, \/\/ contextStack","262","\t\t\t\tnull, \/\/ threadName","263","\t\t\t\tnull, \/\/ location","264","\t\t\t\t0 \/\/ currentTimeMillis","265","\t\t);","266","\t}","267","\t","268","\tprivate void writeObject(java.io.ObjectOutputStream out) throws IOException {","269","\t    getThrownProxy(); \/\/ initialize the ThrowableProxy before serializing","270","\t    out.defaultWriteObject();","271","\t}"]}],"src\/changes\/changes.xml":[{"add":["24","      <action issue=\"LOG4J2-669\" dev=\"rpopma\" type=\"fix\">","25","        Prevent NPE when combining AsyncLoggers with AsyncLoggerConfigs.","26","      <\/action>"],"delete":[]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggersWithAsyncLoggerConfigTest.java":[{"add":[],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggerConfigHelper.java":[{"add":["334","            LogEvent logEvent = event;","335","            if (event instanceof RingBufferLogEvent) {","336","                logEvent = ((RingBufferLogEvent) event).createMemento();","337","            }","341","            disruptor.getRingBuffer().publishEvent(translator, logEvent, asyncLoggerConfig);"],"delete":["337","            disruptor.getRingBuffer().publishEvent(translator, event, asyncLoggerConfig);"]}],"log4j-core\/src\/test\/resources\/AsyncLoggersWithAsyncLoggerConfigTest.xml":[{"add":[],"delete":[]}]}},"2b88cdf94159617bae85628349c412502da6982e":{"changes":{"src\/changes\/changes.xml":"MODIFY","core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/LoggerContext.java":"MODIFY","flume-ng\/src\/main\/java\/org\/apache\/logging\/log4j\/flume\/appender\/FlumePersistentManager.java":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["25","      <action issue=\"LOG4J2-212\" dev=\"rgoers\" type=\"fix\">","26","        Call LoggerContext.stop when the application is shutdown.","27","      <\/action>"],"delete":[]}],"core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/LoggerContext.java":[{"add":["61","    private ShutdownThread shutdownThread = null;","62","","141","                    shutdownThread = new ShutdownThread(this);","142","                    try {","143","                        Runtime.getRuntime().addShutdownHook(shutdownThread);","144","                    } catch (SecurityException se) {","145","                        LOGGER.warn(\"Unable to register shutdown hook due to security restrictions\");","146","                        shutdownThread = null;","147","                    }","160","            if (shutdownThread != null) {","161","                Runtime.getRuntime().removeShutdownHook(shutdownThread);","162","                shutdownThread = null;","163","            }","346","    private class ShutdownThread extends Thread {","347","","348","        private final LoggerContext context;","349","","350","        public ShutdownThread(LoggerContext context) {","351","            this.context = context;","352","        }","353","","354","        public void run() {","355","            context.shutdownThread = null;","356","            context.stop();","357","        }","358","    }","359",""],"delete":[]}],"flume-ng\/src\/main\/java\/org\/apache\/logging\/log4j\/flume\/appender\/FlumePersistentManager.java":[{"add":["164","        LOGGER.debug(\"Shutting down FlumePersistentManager\");","318","            this.setDaemon(true);","322","            LOGGER.debug(\"Writer thread shutting down\");"],"delete":[]}]}},"1a310ff446163426bb4f206e7f4956a3bfd4643e":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/action\/GzCompressAction.java":"MODIFY","src\/changes\/changes.xml":"MODIFY"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/action\/GzCompressAction.java":[{"add":["91","            throws IOException {","93","            try (final FileInputStream fis = new FileInputStream(source);","94","                    final BufferedOutputStream os = new BufferedOutputStream(new GZIPOutputStream(new FileOutputStream(","95","                            destination)))) {","96","                final byte[] inbuf = new byte[BUF_SIZE];","97","                int n;","99","                while ((n = fis.read(inbuf)) != -1) {","100","                    os.write(inbuf, 0, n);","101","                }"],"delete":["91","        throws IOException {","93","            final FileInputStream fis = new FileInputStream(source);","94","            final FileOutputStream fos = new FileOutputStream(destination);","95","            final GZIPOutputStream gzos = new GZIPOutputStream(fos);","96","            final BufferedOutputStream os = new BufferedOutputStream(gzos);","97","            final byte[] inbuf = new byte[BUF_SIZE];","98","            int n;","100","            while ((n = fis.read(inbuf)) != -1) {","101","                os.write(inbuf, 0, n);","104","            os.close();","105","            fis.close();","106",""]}],"src\/changes\/changes.xml":[{"add":["27","        ZipCompressAction leaves files open until GC when an IO error takes place.","28","      <\/action>","29","      <action issue=\"LOG4J2-1020\" dev=\"ggregory\" type=\"fix\">","30","        GzCompressAction leaves files open until GC when an IO error takes place."],"delete":["27","        ZipCompressAction leaves files open when an IO error takes place."]}]}},"26f6df84797543a66fc0b7f315f4ea5609053b22":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggerConfigDisruptor.java":"MODIFY","src\/site\/xdoc\/manual\/async.xml":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggerDisruptor.java":"MODIFY","src\/changes\/changes.xml":"MODIFY"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggerConfigDisruptor.java":[{"add":["39","import com.lmax.disruptor.TimeoutException;","214","","215","        final ThreadFactory threadFactory = new Log4jThreadFactory(\"AsyncLoggerConfig-\", true, Thread.NORM_PRIORITY) {","216","            @Override","217","            public Thread newThread(final Runnable r) {","218","                final Thread result = super.newThread(r);","219","                backgroundThreadId = result.getId();","220","                return result;","221","            }","222","        };","227","        disruptor = new Disruptor<>(factory, ringBufferSize, threadFactory, ProducerType.MULTI, waitStrategy);","230","        disruptor.setDefaultExceptionHandler(errorHandler);","268","        try {","269","            \/\/ busy-spins until all events currently in the disruptor have been processed, or timeout","270","            temp.shutdown(timeout, timeUnit);","271","        } catch (final TimeoutException e) {","272","            LOGGER.warn(\"AsyncLoggerConfigDisruptor: shutdown timed out after {} {}\", timeout, timeUnit);","273","            temp.halt(); \/\/ give up on remaining log events, if any","274","        }","275","        LOGGER.trace(\"AsyncLoggerConfigDisruptor: disruptor has been shut down.\");"],"delete":["18","import java.util.concurrent.ExecutorService;","19","import java.util.concurrent.Executors;","31","import org.apache.logging.log4j.core.util.ExecutorServices;","180","    private static final ThreadFactory THREAD_FACTORY = Log4jThreadFactory.createDaemonThreadFactory(\"AsyncLoggerConfig\");","181","","187","    private ExecutorService executor;","219","        executor = Executors.newSingleThreadExecutor(THREAD_FACTORY);","220","        backgroundThreadId = DisruptorUtil.getExecutorThreadId(executor);","225","        disruptor = new Disruptor<>(factory, ringBufferSize, executor, ProducerType.MULTI, waitStrategy);","228","        disruptor.handleExceptionsWith(errorHandler);","266","        temp.shutdown(); \/\/ busy-spins until all events currently in the disruptor have been processed","267","","268","        LOGGER.trace(\"AsyncLoggerConfigDisruptor: shutting down disruptor executor for this configuration.\");","269","        \/\/ finally, kill the processor thread","270","        ExecutorServices.shutdown(executor, timeout, timeUnit, toString());","271","        executor = null; \/\/ release reference to allow GC"]}],"src\/site\/xdoc\/manual\/async.xml":[{"add":["128","          <i>Log4j-2.9 and higher require disruptor-3.3.3.jar or higher on the classpath.","129","          Prior to Log4j-2.9, disruptor-3.0.0.jar or higher was required.","305","        <p>","306","          <i>Log4j-2.9 and higher require disruptor-3.3.3.jar or higher on the classpath.","307","            Prior to Log4j-2.9, disruptor-3.0.0.jar or higher was required."],"delete":["128","          <i>Requires disruptor-3.0.0.jar or higher on the classpath.","129","            Future versions of Log4j 2 will require disruptor-3.3.3.jar or higher.","305","        <p><i>Requires disruptor-3.0.0.jar or higher on the classpath.","306","          (Future versions of Log4j 2 will require disruptor-3.3.3.jar or higher.)"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggerDisruptor.java":[{"add":["19","import java.util.concurrent.ThreadFactory;","85","","86","        final ThreadFactory threadFactory = new Log4jThreadFactory(\"AsyncLogger[\" + contextName + \"]\", true, Thread.NORM_PRIORITY) {","87","            @Override","88","            public Thread newThread(final Runnable r) {","89","                final Thread result = super.newThread(r);","90","                backgroundThreadId = result.getId();","91","                return result;","92","            }","93","        };","96","        disruptor = new Disruptor<>(RingBufferLogEvent.FACTORY, ringBufferSize, threadFactory, ProducerType.MULTI,","100","        disruptor.setDefaultExceptionHandler(errorHandler);","142","            \/\/ busy-spins until all events currently in the disruptor have been processed, or timeout","145","            LOGGER.warn(\"[{}] AsyncLoggerDisruptor: shutdown timed out after {} {}\", contextName, timeout, timeUnit);","146","            temp.halt(); \/\/ give up on remaining log events, if any","149","        LOGGER.trace(\"[{}] AsyncLoggerDisruptor: disruptor has been shut down.\", contextName);"],"delete":["19","import java.util.concurrent.ExecutorService;","20","import java.util.concurrent.Executors;","26","import org.apache.logging.log4j.core.util.ExecutorServices;","48","    private ExecutorService executor;","88","        executor = Executors.newSingleThreadExecutor(Log4jThreadFactory.createDaemonThreadFactory(\"AsyncLogger[\" + contextName + \"]\"));","89","        backgroundThreadId = DisruptorUtil.getExecutorThreadId(executor);","92","        disruptor = new Disruptor<>(RingBufferLogEvent.FACTORY, ringBufferSize, executor, ProducerType.MULTI,","96","        disruptor.handleExceptionsWith(errorHandler);","138","            \/\/ busy-spins until all events currently in the disruptor have been processed","141","            temp.shutdown();","144","        LOGGER.trace(\"[{}] AsyncLoggerDisruptor: shutting down disruptor executor.\", contextName);","145","        \/\/ finally, kill the processor thread","146","        ExecutorServices.shutdown(executor, timeout, timeUnit, toString());","147","        executor = null;"]}],"src\/changes\/changes.xml":[{"add":["36","      <action issue=\"LOG4J2-1261\" dev=\"rpopma\" type=\"update\">","37","        Async Loggers no longer use deprecated LMAX Disruptor APIs. (Disruptor-3.3.3 or higher is now required.)","38","      <\/action>"],"delete":[]}]}},"edc7925d2ee00cbddd6856ddadd5f7d8a929ddfc":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/lookup\/Interpolator.java":"MODIFY","src\/changes\/changes.xml":"MODIFY"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/lookup\/Interpolator.java":[{"add":["66","            } catch (final Throwable t) {","67","                handleError(entry.getKey(), t);","96","        } catch (final Throwable t) {","97","            handleError(\"jndi\", t);","105","        } catch (final Throwable t) {","106","            handleError(\"jvmrunargs\", t);","115","                handleError(\"web\", ignored);","122","    private void handleError(final String lookupKey, final Throwable t) {","123","        switch (lookupKey) {","124","            case \"jndi\":","125","                \/\/ java.lang.VerifyError: org\/apache\/logging\/log4j\/core\/lookup\/JndiLookup","126","                LOGGER.warn( \/\/ LOG4J2-1582 don't print the whole stack trace (it is just a warning...)","127","                        \"JNDI lookup class is not available because this JRE does not support JNDI.\" +","128","                        \" JNDI string lookups will not be available, continuing configuration. Ignoring \" + t);","129","                break;","130","            case \"jvmrunargs\":","131","                \/\/ java.lang.VerifyError: org\/apache\/logging\/log4j\/core\/lookup\/JmxRuntimeInputArgumentsLookup","132","                LOGGER.warn(","133","                        \"JMX runtime input lookup class is not available because this JRE does not support JMX. \" +","134","                        \"JMX lookups will not be available, continuing configuration. Ignoring \" + t);","135","                break;","136","            case \"web\":","137","                LOGGER.info(\"Log4j appears to be running in a Servlet environment, but there's no log4j-web module \" +","138","                        \"available. If you want better web container support, please add the log4j-web JAR to your \" +","139","                        \"web archive or server lib directory.\");","140","                break;","141","            default:","142","                LOGGER.error(\"Unable to create Lookup for {}\", lookupKey, t);","143","        }","144","    }","145",""],"delete":["66","            } catch (final Exception ex) {","67","                LOGGER.error(\"Unable to create Lookup for {}\", entry.getKey(), ex);","96","        } catch (final Throwable e) {","97","            \/\/ java.lang.VerifyError: org\/apache\/logging\/log4j\/core\/lookup\/JndiLookup","98","            LOGGER.warn( \/\/ LOG4J2-1582 don't print the whole stack trace (it is just a warning...)","99","                    \"JNDI lookup class is not available because this JRE does not support JNDI.\" +","100","                    \" JNDI string lookups will not be available, continuing configuration. Ignoring \" + e);","108","        } catch (final Throwable e) {","109","            \/\/ java.lang.VerifyError: org\/apache\/logging\/log4j\/core\/lookup\/JmxRuntimeInputArgumentsLookup","110","            LOGGER.warn(","111","                    \"JMX runtime input lookup class is not available because this JRE does not support JMX. \" +","112","                            \"JMX lookups will not be available, continuing configuration. Ignoring \" + e);","121","                LOGGER.info(\"Log4j appears to be running in a Servlet environment, but there's no log4j-web module \" +","122","                    \"available. If you want better web container support, please add the log4j-web JAR to your \" +","123","                    \"web archive or server lib directory.\");"]}],"src\/changes\/changes.xml":[{"add":["26","      <action issue=\"LOG4J2-1051\" dev=\"rpopma\" type=\"fix\" due-to=\"Lukasz Lenart\">","27","        When starting on Google App Engine, Interpolator now suppresses the NoClassDefFoundError stack trace  for the jvmrunargs lookup.","28","      <\/action>"],"delete":[]}]}},"c8fd3c530ea43e3567bd5a1dd5b256479ca8eab8":{"changes":{"log4j-slf4j-impl\/src\/main\/java\/org\/apache\/logging\/slf4j\/Log4jMarker.java":"MODIFY","log4j-slf4j-impl\/src\/test\/java\/org\/apache\/logging\/slf4j\/MarkerTest.java":"MODIFY","src\/changes\/changes.xml":"MODIFY"},"diff":{"log4j-slf4j-impl\/src\/main\/java\/org\/apache\/logging\/slf4j\/Log4jMarker.java":[{"add":["86","\tpublic boolean contains(final org.slf4j.Marker marker) {\r","87","\t\tif (marker == null) {\r","88","\t\t\tthrow new IllegalArgumentException();\r","89","\t\t}\r","90","\t\treturn this.marker.isInstanceOf(marker.getName());\r","91","\t}\r"],"delete":["86","    public boolean contains(final org.slf4j.Marker marker) {\r","87","        return this.marker.isInstanceOf(marker.getName());\r","88","    }\r"]}],"log4j-slf4j-impl\/src\/test\/java\/org\/apache\/logging\/slf4j\/MarkerTest.java":[{"add":["21","import org.junit.Assert;","42","\tpublic void testContainsMarker() {","43","\t\tfinal org.slf4j.Marker slf4jMarker = org.slf4j.MarkerFactory.getMarker(CHILD_MAKER_NAME + \"-CM\");","44","\t\tfinal org.slf4j.Marker slf4jParent = org.slf4j.MarkerFactory.getMarker(PARENT_MARKER_NAME + \"-CM\");","45","\t\tslf4jMarker.add(slf4jParent);","46","\t\tfinal Marker log4jParent = MarkerManager.getMarker(PARENT_MARKER_NAME + \"-CM\");","47","\t\tfinal Marker log4jMarker = MarkerManager.getMarker(CHILD_MAKER_NAME + \"-CM\");","48","\t\tLog4jMarker log4jSlf4jParent = new Log4jMarker(log4jParent);","49","\t\tLog4jMarker log4jSlf4jMarker = new Log4jMarker(log4jMarker);","50","\t\tfinal org.slf4j.Marker nullMarker = null;","51","\t\ttry {","52","\t\t\tAssert.assertFalse(log4jSlf4jParent.contains(nullMarker));","53","\t\t\tfail(\"Expected \" + IllegalArgumentException.class.getName());","54","\t\t} catch (IllegalArgumentException e) {","55","\t\t\t\/\/ expected","56","\t\t}","57","\t\ttry {","58","\t\t\tAssert.assertFalse(log4jSlf4jMarker.contains(nullMarker));","59","\t\t\tfail(\"Expected \" + IllegalArgumentException.class.getName());","60","\t\t} catch (IllegalArgumentException e) {","61","\t\t\t\/\/ expected","62","\t\t}","63","\t}","64","","65","    @Test","66","\tpublic void testContainsString() {","67","\t\tfinal org.slf4j.Marker slf4jMarker = org.slf4j.MarkerFactory.getMarker(CHILD_MAKER_NAME + \"-CS\");","68","\t\tfinal org.slf4j.Marker slf4jParent = org.slf4j.MarkerFactory.getMarker(PARENT_MARKER_NAME + \"-CS\");","69","\t\tslf4jMarker.add(slf4jParent);","70","\t\tfinal Marker log4jParent = MarkerManager.getMarker(PARENT_MARKER_NAME + \"-CS\");","71","\t\tfinal Marker log4jMarker = MarkerManager.getMarker(CHILD_MAKER_NAME + \"-CS\");","72","\t\tLog4jMarker log4jSlf4jParent = new Log4jMarker(log4jParent);","73","\t\tLog4jMarker log4jSlf4jMarker = new Log4jMarker(log4jMarker);","74","\t\tString nullStr = null;","75","\t\tAssert.assertFalse(log4jSlf4jParent.contains(nullStr));","76","\t\tAssert.assertFalse(log4jSlf4jMarker.contains(nullStr));","77","\t}","78","","79","    @Test"],"delete":[]}],"src\/changes\/changes.xml":[{"add":["92","      <action issue=\"LOG4J2-1060\" dev=\"ggregory\" type=\"fix\">\r","93","        Log4jMarker#contains(Marker) does not respect org.slf4j.Marker contract.\r","94","      <\/action>      \r"],"delete":[]}]}},"fe8387f74b609dcc3e7619f0bd4a30fb9dc4a037":{"changes":{"src\/changes\/changes.xml":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["33","      <action issue=\"LOG4J2-2123\" dev=\"rgoers\" type=\"fix\" due-to=\"Jacob Tolar\">","34","        DefaultMergeStrategy did not merge filters on loggers correctly","35","      <\/action>"],"delete":[]}]}},"1341bb6690ea2e24a9cd0377523a845f0a466b61":{"changes":{"src\/changes\/changes.xml":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["33","      <action issue=\"LOG4J2-2129\" dev=\"rgoers\" type=\"fix\" due-to=\"Blazej Bucko\">","34","        Log4j2 throws NoClassDefFoundError in Java 9 in java.util.ServiceLoader.","35","      <\/action>"],"delete":[]}]}},"d86a2159893e2f523b46618c219774b752836891":{"changes":{"src\/changes\/changes.xml":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/util\/datetime\/FixedDateFormat.java":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["26","      <action issue=\"LOG4J2-1268\" dev=\"rpopma\" type=\"fix\">","27","        FixedDateFormat was incorrect for formats having MMM with the French locale.","28","      <\/action>"],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/util\/datetime\/FixedDateFormat.java":[{"add":["102","         *\r","111","         *\r","120","         *\r","135","         *\r","144","         *\r","154","         *\r","179","    private int dateLength;\r","185","     *\r","211","     *\r","221","     *\r","260","            dateLength = result.length();\r","267","        final char[] result = new char[length << 1]; \/\/ double size for locales with lengthy DateFormatSymbols\r"],"delete":["102","         * \r","111","         * \r","120","         * \r","135","         * \r","144","         * \r","154","         * \r","164","    private final int dateLength;\r","185","     * \r","195","        this.dateLength = fixedFormat.getDatePatternLength();\r","212","     * \r","222","     * \r","267","        final char[] result = new char[length];\r"]}]}},"bda86100de64c9f0ffe3c0a4dd5a219c52143b01":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/mom\/JmsManager.java":"MODIFY"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/mom\/JmsManager.java":[{"add":["141","    private MapMessage map(final org.apache.logging.log4j.message.MapMessage log4jMapMessage, final MapMessage jmsMapMessage)"],"delete":["141","    private MapMessage map(org.apache.logging.log4j.message.MapMessage log4jMapMessage, MapMessage jmsMapMessage)"]}]}},"370d965fab1577086bee7b73dfb5ea9f6f6c801b":{"changes":{"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/lookup\/MapLookupTest.java":"MODIFY"},"diff":{"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/lookup\/MapLookupTest.java":[{"add":["81","      assertEquals(\"B1\", lookup.lookup(event, \"A1\"));"],"delete":["81","      assertEquals(\"B1\", lookup.lookup(event, \"A\"));"]}]}},"b331da4ad6a49df4363b2056cb8d9e8efc4a2ce0":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/DirectWriteRolloverStrategy.java":"MODIFY","src\/site\/xdoc\/manual\/appenders.xml":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/DefaultRolloverStrategy.java":"MODIFY","src\/changes\/changes.xml":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/AbstractRolloverStrategy.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/EligibleFilesTest.java":"MODIFY"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/DirectWriteRolloverStrategy.java":[{"add":["111","        super(strSubstitutor);"],"delete":["95","    private final StrSubstitutor strSubstitutor;","114","        this.strSubstitutor = strSubstitutor;","131","    public StrSubstitutor getStrSubstitutor() {","132","        return strSubstitutor;","133","    }","134","","139","    private SortedMap<Integer, Path> getEligibleFiles(final RollingFileManager manager) {","140","        final StringBuilder buf = new StringBuilder();","141","        manager.getPatternProcessor().formatFileName(strSubstitutor, buf, -1);","142","        return getEligibleFiles(buf.toString());","143","    }","144",""]}],"src\/site\/xdoc\/manual\/appenders.xml":[{"add":["2611","              <p>The default rollover strategy supports three variations for incrementing the counter. The first is","2705","              <p>","2706","                Finally, as of release 2.8, if the fileIndex attribute is set to \"nomax\" then the min and max values","2707","                will be ignored and file numbering will increment by 1 and each rollover will have an incrementally","2708","                higher value with no maximum number of files.","2709","              <\/p>"],"delete":["2611","              <p>The default rollover strategy supports two variations for incrementing the counter. The first is"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/DefaultRolloverStrategy.java":[{"add":["19","import java.io.IOException;","20","import java.nio.file.Files;","21","import java.nio.file.Path;","26","import java.util.Map;","27","import java.util.SortedMap;","107","        int minIndex;","108","        int maxIndex;","109","        boolean useMax;","110","","111","        if (fileIndex != null && fileIndex.equalsIgnoreCase(\"nomax\")) {","112","            minIndex = Integer.MIN_VALUE;","113","            maxIndex = Integer.MAX_VALUE;","114","            useMax = false;","115","        } else {","116","            useMax = fileIndex == null ? true : fileIndex.equalsIgnoreCase(\"max\");","117","            minIndex = MIN_WINDOW_SIZE;","118","            if (min != null) {","119","                minIndex = Integer.parseInt(min);","120","                if (minIndex < 1) {","121","                    LOGGER.error(\"Minimum window size too small. Limited to \" + MIN_WINDOW_SIZE);","122","                    minIndex = MIN_WINDOW_SIZE;","123","                }","125","            maxIndex = DEFAULT_WINDOW_SIZE;","126","            if (max != null) {","127","                maxIndex = Integer.parseInt(max);","128","                if (maxIndex < minIndex) {","129","                    maxIndex = minIndex < DEFAULT_WINDOW_SIZE ? DEFAULT_WINDOW_SIZE : minIndex;","130","                    LOGGER.error(\"Maximum window size must be greater than the minimum windows size. Set to \" + maxIndex);","131","                }","164","        super(strSubstitutor);","211","        final SortedMap<Integer, Path> eligibleFiles = getEligibleFiles(manager);","212","        final int maxFiles = highIndex - lowIndex + 1;","214","        boolean renameFiles = false;","215","        while (eligibleFiles.size() >= maxFiles) {","216","            try {","217","                LOGGER.debug(\"Eligible files: {}\", eligibleFiles);","218","                Integer key = eligibleFiles.firstKey();","219","                LOGGER.debug(\"Deleting {}\", eligibleFiles.get(key).toFile().getAbsolutePath());","220","                Files.delete(eligibleFiles.get(key));","221","                eligibleFiles.remove(key);","222","                renameFiles = true;","223","            } catch (IOException ioe) {","224","                LOGGER.error(\"Unable to delete {}\", eligibleFiles.firstKey(), ioe);","227","        }","228","        final StringBuilder buf = new StringBuilder();","229","        if (renameFiles) {","230","            for (Map.Entry<Integer, Path> entry : eligibleFiles.entrySet()) {","231","                buf.setLength(0);","232","                \/\/ LOG4J2-531: directory scan & rollover must use same format","233","                manager.getPatternProcessor().formatFileName(strSubstitutor, buf, entry.getKey() - 1);","234","                String currentName = entry.getValue().toFile().getName();","235","                String renameTo = buf.toString();","236","                int suffixLength = suffixLength(renameTo);","237","                if (suffixLength > 0 && suffixLength(currentName) == 0) {","238","                   renameTo = renameTo.substring(0, renameTo.length() - suffixLength);","240","                Action action = new FileRenameAction(entry.getValue().toFile(), new File(renameTo), true);","241","                try {","242","                    LOGGER.debug(\"DefaultRolloverStrategy.purgeAscending executing {}\", action);","243","                    if (!action.execute()) {","246","                } catch (final Exception ex) {","247","                    LOGGER.warn(\"Exception during purge in RollingFileAppender\", ex);","252","","253","        return eligibleFiles.size() > 0 ?","254","                (eligibleFiles.lastKey() < highIndex ? eligibleFiles.lastKey() + 1 : highIndex) : lowIndex;","267","        \/\/ Retrieve the files in descending order, so the highest key will be first.","268","        final SortedMap<Integer, Path> eligibleFiles = getEligibleFiles(manager, false);","269","        final int maxFiles = highIndex - lowIndex + 1;","271","        while (eligibleFiles.size() >= maxFiles) {","272","            try {","273","                Integer key = eligibleFiles.firstKey();","274","                Files.delete(eligibleFiles.get(key));","275","                eligibleFiles.remove(key);","276","            } catch (IOException ioe) {","277","                LOGGER.error(\"Unable to delete {}\", eligibleFiles.firstKey(), ioe);","281","        final StringBuilder buf = new StringBuilder();","282","        for (Map.Entry<Integer, Path> entry : eligibleFiles.entrySet()) {","283","            buf.setLength(0);","284","            \/\/ LOG4J2-531: directory scan & rollover must use same format","285","            manager.getPatternProcessor().formatFileName(strSubstitutor, buf, entry.getKey() + 1);","286","            String currentName = entry.getValue().toFile().getName();","287","            String renameTo = buf.toString();","288","            int suffixLength = suffixLength(renameTo);","289","            if (suffixLength > 0 && suffixLength(currentName) == 0) {","290","                renameTo = renameTo.substring(0, renameTo.length() - suffixLength);","291","            }","292","            Action action = new FileRenameAction(entry.getValue().toFile(), new File(renameTo), true);","294","                LOGGER.debug(\"DefaultRolloverStrategy.purgeDescending executing {}\", action);","316","        int fileIndex;","317","        if (minIndex == Integer.MIN_VALUE) {","318","            final SortedMap<Integer, Path> eligibleFiles = getEligibleFiles(manager);","319","            fileIndex = eligibleFiles.size() > 0 ? eligibleFiles.lastKey() + 1 : 1;","320","        } else {","321","            if (maxIndex < 0) {","322","                return null;","323","            }","324","            final long startNanos = System.nanoTime();","325","            fileIndex = purge(minIndex, maxIndex, manager);","326","            if (fileIndex < 0) {","327","                return null;","328","            }","329","            if (LOGGER.isTraceEnabled()) {","330","                final double durationMillis = TimeUnit.NANOSECONDS.toMillis(System.nanoTime() - startNanos);","331","                LOGGER.trace(\"DefaultRolloverStrategy.purge() took {} milliseconds\", durationMillis);","332","            }","363","        return \"DefaultRolloverStrategy(min=\" + minIndex + \", max=\" + maxIndex + \", useMax=\" + useMax + \")\";"],"delete":["23","import java.util.Objects;","29","import org.apache.logging.log4j.core.appender.rolling.action.CommonsCompressAction;","30","import org.apache.logging.log4j.core.appender.rolling.action.CompositeAction;","32","import org.apache.logging.log4j.core.appender.rolling.action.GzCompressAction;","33","import org.apache.logging.log4j.core.appender.rolling.action.ZipCompressAction;","107","        final boolean useMax = fileIndex == null ? true : fileIndex.equalsIgnoreCase(\"max\");","108","        int minIndex = MIN_WINDOW_SIZE;","109","        if (min != null) {","110","            minIndex = Integer.parseInt(min);","111","            if (minIndex < 1) {","112","                LOGGER.error(\"Minimum window size too small. Limited to \" + MIN_WINDOW_SIZE);","113","                minIndex = MIN_WINDOW_SIZE;","115","        }","116","        int maxIndex = DEFAULT_WINDOW_SIZE;","117","        if (max != null) {","118","            maxIndex = Integer.parseInt(max);","119","            if (maxIndex < minIndex) {","120","                maxIndex = minIndex < DEFAULT_WINDOW_SIZE ? DEFAULT_WINDOW_SIZE : minIndex;","121","                LOGGER.error(\"Maximum window size must be greater than the minimum windows size. Set to \" + maxIndex);","139","    private final StrSubstitutor strSubstitutor;","159","        this.strSubstitutor = strSubstitutor;","180","    public StrSubstitutor getStrSubstitutor() {","181","        return strSubstitutor;","182","    }","183","","206","        final List<FileRenameAction> renames = new ArrayList<>();","207","        final StringBuilder buf = new StringBuilder();","209","        \/\/ LOG4J2-531: directory scan & rollover must use same format","210","        manager.getPatternProcessor().formatFileName(strSubstitutor, buf, highIndex);","211","        String highFilename = strSubstitutor.replace(buf);","212","        final int suffixLength = suffixLength(highFilename);","213","        int curMaxIndex = 0;","214","","215","        for (int i = highIndex; i >= lowIndex; i--) {","216","            File toRename = new File(highFilename);","217","            if (i == highIndex && toRename.exists()) {","218","                curMaxIndex = highIndex;","219","            } else if (curMaxIndex == 0 && toRename.exists()) {","220","                curMaxIndex = i + 1;","223","","224","            boolean isBase = false;","225","","226","            if (suffixLength > 0) {","227","                final File toRenameBase = new File(highFilename.substring(0, highFilename.length() - suffixLength));","228","","229","                if (toRename.exists()) {","230","                    if (toRenameBase.exists()) {","231","                        LOGGER.debug(\"DefaultRolloverStrategy.purgeAscending deleting {} base of {}.\", \/\/","232","                                toRenameBase, toRename);","233","                        toRenameBase.delete();","234","                    }","235","                } else {","236","                    toRename = toRenameBase;","237","                    isBase = true;","239","            }","240","","241","            if (toRename.exists()) {","242","                \/\/","243","                \/\/ if at lower index and then all slots full","244","                \/\/ attempt to delete last file","245","                \/\/ if that fails then abandon purge","246","                if (i == lowIndex) {","247","                    LOGGER.debug(\"DefaultRolloverStrategy.purgeAscending deleting {} at low index {}: all slots full.\",","248","                            toRename, i);","249","                    if (!toRename.delete()) {","252","","253","                    break;","254","                }","255","","256","                \/\/","257","                \/\/ if intermediate index","258","                \/\/ add a rename action to the list","259","                buf.setLength(0);","260","                \/\/ LOG4J2-531: directory scan & rollover must use same format","261","                manager.getPatternProcessor().formatFileName(strSubstitutor, buf, i - 1);","262","","263","                final String lowFilename = strSubstitutor.replace(buf);","264","                String renameTo = lowFilename;","265","","266","                if (isBase) {","267","                    renameTo = lowFilename.substring(0, lowFilename.length() - suffixLength);","268","                }","269","","270","                renames.add(new FileRenameAction(toRename, new File(renameTo), true));","271","                highFilename = lowFilename;","272","            } else {","273","                buf.setLength(0);","274","                \/\/ LOG4J2-531: directory scan & rollover must use same format","275","                manager.getPatternProcessor().formatFileName(strSubstitutor, buf, i - 1);","276","","277","                highFilename = strSubstitutor.replace(buf);","278","            }","279","        }","280","        if (curMaxIndex == 0) {","281","            curMaxIndex = lowIndex;","282","        }","283","","284","        \/\/","285","        \/\/ work renames backwards","286","        \/\/","287","        for (int i = renames.size() - 1; i >= 0; i--) {","288","            final Action action = renames.get(i);","289","            try {","290","                LOGGER.debug(\"DefaultRolloverStrategy.purgeAscending executing {} of {}: {}\", \/\/","291","                        i, renames.size(), action);","292","                if (!action.execute()) {","295","            } catch (final Exception ex) {","296","                LOGGER.warn(\"Exception during purge in RollingFileAppender\", ex);","297","                return -1;","300","        return curMaxIndex;","313","        final List<FileRenameAction> renames = new ArrayList<>();","314","        final StringBuilder buf = new StringBuilder();","316","        \/\/ LOG4J2-531: directory scan & rollover must use same format","317","        manager.getPatternProcessor().formatFileName(strSubstitutor, buf, lowIndex);","318","","319","        String lowFilename = strSubstitutor.replace(buf);","320","        final int suffixLength = suffixLength(lowFilename);","321","","322","        for (int i = lowIndex; i <= highIndex; i++) {","323","            File toRename = new File(lowFilename);","324","            boolean isBase = false;","325","","326","            if (suffixLength > 0) {","327","                final File toRenameBase = new File(lowFilename.substring(0, lowFilename.length() - suffixLength));","328","","329","                if (toRename.exists()) {","330","                    if (toRenameBase.exists()) {","331","                        LOGGER.debug(\"DefaultRolloverStrategy.purgeDescending deleting {} base of {}.\", \/\/","332","                                toRenameBase, toRename);","333","                        toRenameBase.delete();","334","                    }","335","                } else {","336","                    toRename = toRenameBase;","337","                    isBase = true;","338","                }","339","            }","340","","341","            if (toRename.exists()) {","342","                \/\/","343","                \/\/ if at upper index then","344","                \/\/ attempt to delete last file","345","                \/\/ if that fails then abandon purge","346","                if (i == highIndex) {","347","                    LOGGER.debug(","348","                            \"DefaultRolloverStrategy.purgeDescending deleting {} at high index {}: all slots full.\", \/\/","349","                            toRename, i);","350","                    if (!toRename.delete()) {","351","                        return -1;","352","                    }","353","","354","                    break;","355","                }","356","","357","                \/\/","358","                \/\/ if intermediate index","359","                \/\/ add a rename action to the list","360","                buf.setLength(0);","361","                \/\/ LOG4J2-531: directory scan & rollover must use same format","362","                manager.getPatternProcessor().formatFileName(strSubstitutor, buf, i + 1);","363","","364","                final String highFilename = strSubstitutor.replace(buf);","365","                String renameTo = highFilename;","366","","367","                if (isBase) {","368","                    renameTo = highFilename.substring(0, highFilename.length() - suffixLength);","369","                }","370","","371","                renames.add(new FileRenameAction(toRename, new File(renameTo), true));","372","                lowFilename = highFilename;","373","            } else {","377","","378","        \/\/","379","        \/\/ work renames backwards","380","        \/\/","381","        for (int i = renames.size() - 1; i >= 0; i--) {","382","            final Action action = renames.get(i);","384","                LOGGER.debug(\"DefaultRolloverStrategy.purgeDescending executing {} of {}: {}\", \/\/","385","                        i, renames.size(), action);","407","        if (maxIndex < 0) {","408","            return null;","409","        }","410","        final long startNanos = System.nanoTime();","411","        final int fileIndex = purge(minIndex, maxIndex, manager);","412","        if (fileIndex < 0) {","413","            return null;","414","        }","415","        if (LOGGER.isTraceEnabled()) {","416","            final double durationMillis = TimeUnit.NANOSECONDS.toMillis(System.nanoTime() - startNanos);","417","            LOGGER.trace(\"DefaultRolloverStrategy.purge() took {} milliseconds\", durationMillis);","448","        return \"DefaultRolloverStrategy(min=\" + minIndex + \", max=\" + maxIndex + ')';"]}],"src\/changes\/changes.xml":[{"add":["26","      <action issue=\"LOG4J2-1032\" dev=\"rgoers\" type=\"add\">","27","        Make DefaultRolloverStrategy more efficent when renaming files. Add nomax option to the fileIndex attribute.","28","      <\/action>"],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/AbstractRolloverStrategy.java":[{"add":["40","import org.apache.logging.log4j.core.lookup.StrSubstitutor;","53","    protected final StrSubstitutor strSubstitutor;","54","","55","    protected AbstractRolloverStrategy(final StrSubstitutor strSubstitutor) {","56","        this.strSubstitutor = strSubstitutor;","57","    }","58","","59","","60","    public StrSubstitutor getStrSubstitutor() {","61","        return strSubstitutor;","62","    }","63","","86","","87","    protected SortedMap<Integer, Path> getEligibleFiles(final RollingFileManager manager) {","88","        return getEligibleFiles(manager, true);","89","    }","90","","91","    protected SortedMap<Integer, Path> getEligibleFiles(final RollingFileManager manager,","92","                                                        final boolean isAscending) {","93","        final StringBuilder buf = new StringBuilder();","94","        manager.getPatternProcessor().formatFileName(strSubstitutor, buf, -1);","95","        return getEligibleFiles(buf.toString(), isAscending);","96","    }","97","","99","        return getEligibleFiles(path, true);","100","    }","101","","102","    protected SortedMap<Integer, Path> getEligibleFiles(String path, boolean isAscending) {","103","        TreeMap<Integer, Path> eligibleFiles = new TreeMap<>();","130","        return isAscending? eligibleFiles : eligibleFiles.descendingMap();"],"delete":["75","        SortedMap<Integer, Path> eligibleFiles = new TreeMap<>();","102","        return eligibleFiles;"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/EligibleFilesTest.java":[{"add":["41","        public TestRolloverStrategy() {","42","            super(null);","43","        }","44",""],"delete":[]}]}},"9d459d4a606c4eddbb093fbfb955daf68d099c40":{"changes":{"log4j-api\/src\/test\/java\/org\/apache\/logging\/log4j\/util\/PropertiesUtilTest.java":"MODIFY","src\/changes\/changes.xml":"MODIFY","log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/util\/PropertiesUtil.java":"MODIFY"},"diff":{"log4j-api\/src\/test\/java\/org\/apache\/logging\/log4j\/util\/PropertiesUtilTest.java":[{"add":["19","import org.junit.Before;","20","import org.junit.Test;","21","","27","import static org.junit.Assert.assertEquals;","28","import static org.junit.Assert.assertNotNull;","29","import static org.junit.Assert.assertNull;","95","","96","    @Test","97","    public void testNonStringSystemProperties() {","98","        Object key1 = \"1\";","99","        Object key2 = new Object();","100","        System.getProperties().put(key1, new Object());","101","        System.getProperties().put(key2, \"value-2\");","102","        try {","103","            final PropertiesUtil util = new PropertiesUtil(new Properties());","104","            assertNull(util.getStringProperty(\"1\"));","105","        } finally {","106","            System.getProperties().remove(key1);","107","            System.getProperties().remove(key2);","108","        }","109","    }"],"delete":["24","import org.junit.Before;","25","import org.junit.Test;","26","","27","import static org.junit.Assert.*;"]}],"src\/changes\/changes.xml":[{"add":["111","      <action issue=\"LOG4J2-2355\" dev=\"ckozak\" type=\"fix\" due-to=\"Henrik Brautaset Aronsen\">","112","        PropertiesUtil ignores non-string system properties. Fixes a NoClassDefFoundError initializing StatusLogger","113","        caused by an NPE while initializing the static PropertiesUtil field.","114","      <\/action>"],"delete":[]}],"log4j-api\/src\/main\/java\/org\/apache\/logging\/log4j\/util\/PropertiesUtil.java":[{"add":["332","                        if (key != null && value != null) {"],"delete":["332","                        if (value != null) {","341","                        } else  {","342","                            LowLevelLogUtil.log(\"Property \" + key + \" was skipped because of null value.\");"]}]}},"7c4da9b025bd1c8d4df013c3dec0fe2206033f4e":{"changes":{"src\/changes\/changes.xml":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggerConfigHelper.java":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["23","      <action issue=\"LOG4J2-425\" dev=\"rpopma\" type=\"fix\">","24","        Resolved memory leak by populating AsyncLoggerConfigHelper ring buffer ","25","        via EventTranslatorTwoArg, eliminating the need for a ThreadLocal.","26","      <\/action>"],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/async\/AsyncLoggerConfigHelper.java":[{"add":["29","import com.lmax.disruptor.EventTranslatorTwoArg;","86","    private final EventTranslatorTwoArg<Log4jEventWrapper, LogEvent, AsyncLoggerConfig> translator ","87","            = new EventTranslatorTwoArg<Log4jEventWrapper, LogEvent, AsyncLoggerConfig>() {","88","","90","        public void translateTo(Log4jEventWrapper ringBufferElement, long sequence, ","91","                LogEvent logEvent, AsyncLoggerConfig loggerConfig) {","92","            ringBufferElement.event = logEvent;","93","            ringBufferElement.loggerConfig = loggerConfig;","280","    ","282","        disruptor.getRingBuffer().publishEvent(translator, event, asyncLoggerConfig);"],"delete":["29","import com.lmax.disruptor.EventTranslator;","86","    private final EventTranslator<Log4jEventWrapper> translator = new EventTranslator<Log4jEventWrapper>() {","88","        public void translateTo(final Log4jEventWrapper event,","89","                final long sequence) {","90","            event.event = currentLogEvent.get();","91","            event.loggerConfig = asyncLoggerConfig;","95","    private final ThreadLocal<LogEvent> currentLogEvent = new ThreadLocal<LogEvent>();","279","","281","        currentLogEvent.set(event);","282","        disruptor.publishEvent(translator);","283","        currentLogEvent.set(null); \/\/ clear reference to allow GC"]}]}},"547574f972754001b4c0cd162dcff3c9346aa69e":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/net\/DatagramSocketManager.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/OutputStreamManager.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/RollingRandomAccessFileManager.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/test\/appender\/InMemoryAppender.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/RollingRandomAccessFileManagerTest.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/ConsoleAppender.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/net\/AbstractSocketManager.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/MemoryMappedFileManager.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/OutputStreamAppenderTest.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/OnStartupTriggeringPolicyTest.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/FileManager.java":"MODIFY","src\/changes\/changes.xml":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/net\/TcpSocketManager.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/RollingFileManager.java":"MODIFY","log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/RandomAccessFileManager.java":"MODIFY","log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/RandomAccessFileManagerTest.java":"MODIFY"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/net\/DatagramSocketManager.java":[{"add":["47","        super(name, os, inetAddress, host, port, layout, true);"],"delete":["47","        super(name, os, inetAddress, host, port, layout);"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/OutputStreamManager.java":[{"add":["32","    protected OutputStreamManager(final OutputStream os, final String streamName, final Layout<?> layout,","33","            boolean writeHeader) {","37","        if (writeHeader && layout != null) {"],"delete":["32","    protected OutputStreamManager(final OutputStream os, final String streamName, final Layout<?> layout) {","36","        if (layout != null) {"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/RollingRandomAccessFileManager.java":[{"add":["52","            final String advertiseURI, final Layout<? extends Serializable> layout, final boolean writeHeader) {","53","        super(fileName, pattern, os, append, size, time, policy, strategy, advertiseURI, layout, bufferSize,","54","                writeHeader);","184","            final boolean writeHeader = !data.append || !file.exists();","198","                        data.advertiseURI, data.layout, writeHeader);"],"delete":["52","            final String advertiseURI, final Layout<? extends Serializable> layout) {","53","        super(fileName, pattern, os, append, size, time, policy, strategy, advertiseURI, layout, bufferSize);","196","                        data.advertiseURI, data.layout);"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/test\/appender\/InMemoryAppender.java":[{"add":["34","                            final boolean ignoreExceptions, final boolean writeHeader) {","35","        super(name, layout, filters, ignoreExceptions, true, new InMemoryManager(name, layout, writeHeader));","45","        public InMemoryManager(final String name, final Layout<? extends Serializable> layout,","46","                final boolean writeHeader) {","47","            super(new ByteArrayOutputStream(), name, layout, writeHeader);"],"delete":["34","                            final boolean ignoreExceptions) {","35","        super(name, layout, filters, ignoreExceptions, true, new InMemoryManager(name, layout));","45","        public InMemoryManager(final String name, final Layout<? extends Serializable> layout) {","46","            super(new ByteArrayOutputStream(), name, layout);"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/RollingRandomAccessFileManagerTest.java":[{"add":["64","                triggerPolicy, rolloverStrategy, null, null, true);","95","                triggerPolicy, rolloverStrategy, null, null, true);","122","                triggerPolicy, rolloverStrategy, null, null, true);"],"delete":["64","                triggerPolicy, rolloverStrategy, null, null);","95","                triggerPolicy, rolloverStrategy, null, null);","122","                triggerPolicy, rolloverStrategy, null, null);"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/ConsoleAppender.java":[{"add":["354","            return new OutputStreamManager(data.os, data.type, data.layout, true);"],"delete":["354","            return new OutputStreamManager(data.os, data.type, data.layout);"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/net\/AbstractSocketManager.java":[{"add":["55","    public AbstractSocketManager(final String name, final OutputStream os, final InetAddress inetAddress,","56","            final String host, final int port, final Layout<? extends Serializable> layout, final boolean writeHeader) {","57","        super(os, name, layout, writeHeader);"],"delete":["55","    public AbstractSocketManager(final String name, final OutputStream os, final InetAddress inetAddress, final String host,","56","                                 final int port, final Layout<? extends Serializable> layout) {","57","        super(os, name, layout);"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/MemoryMappedFileManager.java":[{"add":["66","            final Layout<? extends Serializable> layout, final boolean writeHeader) throws IOException {","67","        super(os, fileName, layout, writeHeader);","309","            final boolean writeHeader = !data.append || !file.exists();","317","                        data.advertiseURI, data.layout, writeHeader);"],"delete":["66","            final Layout<? extends Serializable> layout) throws IOException {","67","        super(os, fileName, layout);","316","                        data.advertiseURI, data.layout);"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/OutputStreamAppenderTest.java":[{"add":["38","        final boolean writeHeader = true;","39","        final InMemoryAppender app = new InMemoryAppender(\"test\", layout, null, false, writeHeader);","40","        final String expectedHeader = null;","41","        assertMessage(\"Test\", app, expectedHeader);","42","    }","43","","44","    @Test","45","    public void testHeaderRequested() {","46","        final PatternLayout layout = PatternLayout.newBuilder().withHeader(\"HEADERHEADER\").build();","47","        final boolean writeHeader = true;","48","        final InMemoryAppender app = new InMemoryAppender(\"test\", layout, null, false, writeHeader);","49","        final String expectedHeader = \"HEADERHEADER\";","50","        assertMessage(\"Test\", app, expectedHeader);","51","    }","52","","53","    @Test","54","    public void testHeaderSuppressed() {","55","        final PatternLayout layout = PatternLayout.newBuilder().withHeader(\"HEADERHEADER\").build();","56","        final boolean writeHeader = false;","57","        final InMemoryAppender app = new InMemoryAppender(\"test\", layout, null, false, writeHeader);","58","        final String expectedHeader = null;","59","        assertMessage(\"Test\", app, expectedHeader);","60","    }","61","","62","    private void assertMessage(String string, InMemoryAppender app, String header) {","63","        final LogEvent event = new Log4jLogEvent(\"TestLogger\", null, OutputStreamAppenderTest.class.getName(),","64","                Level.INFO, new SimpleMessage(\"Test\"), null);","68","        app.append(event);","71","        final String expectedHeader = header == null ? \"\" : header;","72","        final String expected = expectedHeader + \"Test\" + Constants.LINE_SEPARATOR + \"Test\" + Constants.LINE_SEPARATOR;","73","        assertTrue(\"Incorrect message: \" + msg, msg.equals(expected));"],"delete":["38","        final InMemoryAppender app = new InMemoryAppender(\"test\", layout, null, false);","39","        final LogEvent event = new Log4jLogEvent(\"TestLogger\", null, OutputStreamAppenderTest.class.getName(), Level.INFO,","40","            new SimpleMessage(\"Test\"), null);","46","        assertTrue(\"Incorrect message: \" + msg , msg.endsWith(\"Test\" + Constants.LINE_SEPARATOR));"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/OnStartupTriggeringPolicyTest.java":[{"add":["54","                false, 0, System.currentTimeMillis(), policy, strategy, null, null, 8192, true);"],"delete":["54","                false, 0, System.currentTimeMillis(), policy, strategy, null, null, 8192);"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/FileManager.java":[{"add":["46","            final String advertiseURI, final Layout<? extends Serializable> layout, final int bufferSize,","47","            final boolean writeHeader) {","48","        super(os, fileName, layout, writeHeader);","199","            final boolean writeHeader = !data.append || !file.exists();","209","                return new FileManager(name, os, data.append, data.locking, data.advertiseURI, data.layout, bufferSize,","210","                        writeHeader);"],"delete":["46","            final String advertiseURI, final Layout<? extends Serializable> layout, final int bufferSize) {","47","        super(os, fileName, layout);","207","                return new FileManager(name, os, data.append, data.locking, data.advertiseURI, data.layout, bufferSize);"]}],"src\/changes\/changes.xml":[{"add":["26","      <action issue=\"LOG4J2-889\" dev=\"rpopma\" type=\"fix\">\r","27","        Header in layout should not be written on application startup if appending to an existing file.\r","28","      <\/action>\r"],"delete":[]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/net\/TcpSocketManager.java":[{"add":["80","        super(name, os, inetAddress, host, port, layout, true);"],"delete":["80","        super(name, os, inetAddress, host, port, layout);"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/rolling\/RollingFileManager.java":[{"add":["51","            final Layout<? extends Serializable> layout, final int bufferSize, final boolean writeHeader) {","52","        super(fileName, os, append, false, advertiseURI, layout, bufferSize, writeHeader);","312","            final boolean writeHeader = !data.append || !file.exists();","324","                    data.strategy, data.advertiseURI, data.layout, bufferSize, writeHeader);"],"delete":["51","            final Layout<? extends Serializable> layout, final int bufferSize) {","52","        super(fileName, os, append, false, advertiseURI, layout, bufferSize);","323","                    data.strategy, data.advertiseURI, data.layout, bufferSize);"]}],"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/appender\/RandomAccessFileManager.java":[{"add":["49","            final String advertiseURI, final Layout<? extends Serializable> layout, final boolean writeHeader) {","50","        super(os, fileName, layout, writeHeader);","212","            final boolean writeHeader = !data.append || !file.exists();","223","                        data.bufferSize, data.advertiseURI, data.layout, writeHeader);"],"delete":["49","            final String advertiseURI, final Layout<? extends Serializable> layout) {","50","        super(os, fileName, layout);","222","                        data.bufferSize, data.advertiseURI, data.layout);"]}],"log4j-core\/src\/test\/java\/org\/apache\/logging\/log4j\/core\/appender\/RandomAccessFileManagerTest.java":[{"add":["46","                    RandomAccessFileManager.DEFAULT_BUFFER_SIZE, null, null, true);","68","                    RandomAccessFileManager.DEFAULT_BUFFER_SIZE, null, null, true);","89","                    bufferSize, null, null, true);","103","                    bufferSize, null, null, true);"],"delete":["46","                    RandomAccessFileManager.DEFAULT_BUFFER_SIZE, null, null);","68","                    RandomAccessFileManager.DEFAULT_BUFFER_SIZE, null, null);","89","                    bufferSize, null, null);","103","                    bufferSize, null, null);"]}]}},"d3c6e3ae848dbebfa02e843c707f85ec9e181d79":{"changes":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/helpers\/FileUtils.java":"MODIFY"},"diff":{"log4j-core\/src\/main\/java\/org\/apache\/logging\/log4j\/core\/helpers\/FileUtils.java":[{"add":["66","            if (new File(fileName).exists()) { \/\/ LOG4J2-466","67","                return new File(fileName); \/\/ allow files with '+' char in name"],"delete":["66","            if (new File(fileName).exists()) {","67","                return new File(fileName);"]}]}},"a630a15d11fbed7e205e9ff59bac1cee62bb5a78":{"changes":{"src\/changes\/changes.xml":"MODIFY"},"diff":{"src\/changes\/changes.xml":[{"add":["169","      <action issue=\"LOG4J2-2388\" dev=\"ggregory\" type=\"fix\" due-to=\"Failled\">"],"delete":["169","      <action issue=\"LOG4J2-2388\" dev=\"ggregory\" type=\"fix\">"]}]}}}